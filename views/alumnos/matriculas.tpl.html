<div ui-view="edit_alumno" class="row"></div> <div class="row"> <div class="col-xs-12 col-md-12"> <div class="well with-header with-footer"> <div class="header bordered-yellow">Alumnos <a ui-sref="panel.matriculas.nuevo" uib-tooltip="Ingresa datos de un nuevo alumno" class="btn btn-info shiny">Crear alumno</a></div> <div class="form-group"> <label>Grupo en el cual matricular</label> <div><span uib-tooltip="Debe seleccionar un grupo" tooltip-placement="right"> <ui-select ng-model="dato.grupo" on-select="onGrupoSelect($item, $model)" theme="select2" style="min-width: 200px"> <ui-select-match placeholder="Grupo a matricular" allow-clear="true">{{$select.selected.nombre}}</ui-select-match> <ui-select-choices repeat="grupo in grupos | filter: $select.search"> <div ng-bind-html="grupo.nombre | highlight: $select.search"></div> </ui-select-choices> </ui-select></span></div> </div> <table class="table table-striped"> <thead> <tr> <th style="max-width: 10px">No <th> <a href="" ng-click="dato.sortType = 'no_matricula'; dato.sortReverse = !dato.sortReverse">Matrícula <span ng-show="dato.sortType == 'no_matricula' &amp;&amp; !dato.sortReverse" class="fa fa-caret-down"></span><span ng-show="dato.sortType == 'no_matricula' &amp;&amp; dato.sortReverse" class="fa fa-caret-up"></span></a> <th> <a href="" ng-click="dato.sortType = 'apellidos'; dato.sortReverse = !dato.sortReverse">Apellidos <span ng-show="dato.sortType == 'apellidos' &amp;&amp; !dato.sortReverse" class="fa fa-caret-down"></span><span ng-show="dato.sortType == 'apellidos' &amp;&amp; dato.sortReverse" class="fa fa-caret-up"></span></a> <th> <a href="" ng-click="dato.sortType = 'nombres'; dato.sortReverse = !dato.sortReverse">Nombres <span ng-show="dato.sortType == 'nombres' &amp;&amp; !dato.sortReverse" class="fa fa-caret-down"></span><span ng-show="dato.sortType == 'nombres' &amp;&amp; dato.sortReverse" class="fa fa-caret-up"></span></a> <th style="max-width: 20px; padding: 0px 0px 8px"> <a href="" ng-click="dato.sortType = 'sexo'; dato.sortReverse = !dato.sortReverse"><i style="font-weight: bold" class="fa fa-venus-mars"> </i><span ng-show="dato.sortType == 'sexo' &amp;&amp; !dato.sortReverse" class="fa fa-caret-down"></span><span ng-show="dato.sortType == 'sexo' &amp;&amp; dato.sortReverse" class="fa fa-caret-up"></span></a> <th style="min-width: 120px; text-align: center"> <a href="" ng-click="dato.sortType = 'estado'; dato.sortReverse = !dato.sortReverse">Estado <span ng-show="dato.sortType == 'estado' &amp;&amp; !dato.sortReverse" class="fa fa-caret-down"></span><span ng-show="dato.sortType == 'estado' &amp;&amp; dato.sortReverse" class="fa fa-caret-up"></span></a> <th><a href="" ng-click="dato.sortType = 'fecha_retiro'; dato.sortReverse = !dato.sortReverse">Retirado <span ng-show="dato.sortType == 'fecha_retiro' &amp;&amp; !dato.sortReverse" class="fa fa-caret-down"></span><span ng-show="dato.sortType == 'fecha_retiro' &amp;&amp; dato.sortReverse" class="fa fa-caret-up"></span></a> <th><a href="" ng-click="dato.sortType = 'fecha_matricula'; dato.sortReverse = !dato.sortReverse">Matriculado <span ng-show="dato.sortType == 'fecha_matricula' &amp;&amp; !dato.sortReverse" class="fa fa-caret-down"></span><span ng-show="dato.sortType == 'fecha_matricula' &amp;&amp; dato.sortReverse" class="fa fa-caret-up"></span></a>   <tbody class="filasestrechas"> <tr ng-repeat="alumno in alumnos_all | filter: filterActuales | orderBy:dato.sortType:dato.sortReverse  track by $index" ng-class="{'filagris': alumno.grupo_id!=dato.grupo.id, 'filawarning': alumno.estado=='RETI', 'filadanger': alumno.estado=='ASIS' }"> <td>{{ $index+1 }} <td class="content-menu-matrics"> {{ alumno.no_matricula }} <div><a ui-sref="panel.matriculas.detalles({alumno_id: alumno.alumno_id})" uib-tooltip="Ver matrículas" class="btn btn-default btn-xs menu-matrics"> <i class="fa fa-pencil"></i></a></div>  <td> <div uib-popover-template="views+'alumnos/popoverAlumnoInfo.tpl.html'" popover-title="{{alumno.nombres + ' ' + alumno.apellidos}}" popover-trigger="mouseenter" popover-popup-delay="500"> <img ng-src="{{perfilPath + alumno.foto_nombre}}" style="width: 20px; height: 20px; margin-top: -3px">{{ alumno.apellidos }}</div>  <td> {{ alumno.nombres }}  <td>{{ alumno.sexo }} <td><span ng-show="alumno.grupo_id==dato.grupo.id || alumno.estado=='RETI' "><span style="margin-top: -2px; padding-bottom: 2px" class="btn-group"> <label ng-model="alumno.estado" uib-btn-radio="'MATR'" ng-click="reMatricularUno(alumno)" class="btn btn-info btn-xs">Matr</label> <label ng-model="alumno.estado" uib-btn-radio="'ASIS'" ng-click="setAsistente(alumno)" class="btn btn-info btn-xs">Asis</label> <label ng-model="alumno.estado" uib-btn-radio="'RETI'" ng-click="retirar(alumno)" class="btn btn-info btn-xs">Reti</label></span></span> <div ng-show="alumno.grupo_id!=dato.grupo.id " style="margin-top: -2px; padding-bottom: 2px" class="btn-group"> <label ng-click="setNewAsistente(alumno)" uib-tooltip="Inscribir como asistente" class="btn btn-success shiny btn-xs">Asis</label> <label ng-click="matricularUno(alumno)" uib-tooltip="Matricular" class="btn btn-success shiny btn-xs">Matric</label> <label ng-click="matricularEn(alumno)" uib-tooltip="Matricular en..." tooltip-placement="right" class="btn btn-success shiny btn-xs">...</label> </div>  <td> <input ng-model="alumno.fecha_retiro" type="date" ng-show="alumno.estado=='RETI'" ng-change="cambiarFechaRetiro(alumno)" ng-model-options="{ updateOn: 'default blur', debounce: {'default': 1000, 'blur': 0} }">  <td> <input ng-model="alumno.fecha_matricula" type="date" ng-change="cambiarFechaMatricula(alumno)" ng-model-options="{ updateOn: 'default blur', debounce: {'default': 1000, 'blur': 0} }">   <!-- Ahora mostraremos los que NO son de este, año este grupo--> <tr ng-repeat="alumno in alumnos_all | filter: filterNOActuales | orderBy:dato.sortType:dato.sortReverse  track by $index" ng-class="{'filagris': alumno.grupo_id!=dato.grupo.id, 'filawarning': alumno.estado=='RETI', 'filadanger': alumno.estado=='ASIS' }"> <td>{{ $index+1 }} <td class="content-menu-matrics"> {{ alumno.no_matricula }} <div><a ui-sref="panel.matriculas.detalles({alumno_id: alumno.alumno_id})" uib-tooltip="Ver matrículas" class="btn btn-default btn-xs menu-matrics"> <i class="fa fa-pencil"></i></a></div>  <td> <div uib-popover-template="views+'alumnos/popoverAlumnoInfo.tpl.html'" popover-title="{{alumno.nombres + ' ' + alumno.apellidos}}" popover-trigger="mouseenter" popover-popup-delay="500"> <img ng-src="{{perfilPath + alumno.foto_nombre}}" style="width: 20px; height: 20px; margin-top: -3px">{{ alumno.apellidos }}</div>  <td> {{ alumno.nombres }}  <td>{{ alumno.sexo }} <td><span ng-show="alumno.grupo_id==dato.grupo.id"><span style="margin-top: -2px; padding-bottom: 2px" class="btn-group"> <label ng-model="alumno.estado" uib-btn-radio="'MATR'" ng-click="reMatricularUno(alumno)" class="btn btn-info btn-xs">Matr</label> <label ng-model="alumno.estado" uib-btn-radio="'ASIS'" ng-click="setAsistente(alumno)" class="btn btn-info btn-xs">Asis</label> <label ng-model="alumno.estado" uib-btn-radio="'RETI'" ng-click="retirar(alumno)" class="btn btn-info btn-xs">Reti</label></span></span> <div ng-show="alumno.grupo_id!=dato.grupo.id " style="margin-top: -2px; padding-bottom: 2px" class="btn-group"> <label ng-click="setNewAsistente(alumno)" uib-tooltip="Inscribir como asistente" class="btn btn-success shiny btn-xs">Asis</label> <label ng-click="matricularUno(alumno)" uib-tooltip="Matricular" class="btn btn-success shiny btn-xs">Matric</label> <label ng-click="matricularEn(alumno)" uib-tooltip="Matricular en..." tooltip-placement="right" class="btn btn-success shiny btn-xs">...</label> </div>  <td> <input ng-model="alumno.fecha_retiro" type="date" ng-show="alumno.estado=='RETI'" ng-change="cambiarFechaRetiro(alumno)" ng-model-options="{ updateOn: 'default blur', debounce: {'default': 1000, 'blur': 0} }">  <td> <input ng-model="alumno.fecha_matricula" type="date" ng-change="cambiarFechaMatricula(alumno)" ng-model-options="{ updateOn: 'default blur', debounce: {'default': 1000, 'blur': 0} }">    <tfoot> <tr> <td>  <td>  <td>  <td>  <td>  <td>  <td>  <td>    </table> </div> </div> </div> <div ui-view="matricula_detalle" class="row"></div>