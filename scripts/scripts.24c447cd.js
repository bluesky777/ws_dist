function ECB(a,b){this.count=a,this.dataCodewords=b,this.__defineGetter__("Count",function(){return this.count}),this.__defineGetter__("DataCodewords",function(){return this.dataCodewords})}function ECBlocks(a,b,c){this.ecCodewordsPerBlock=a,c?this.ecBlocks=new Array(b,c):this.ecBlocks=new Array(b),this.__defineGetter__("ECCodewordsPerBlock",function(){return this.ecCodewordsPerBlock}),this.__defineGetter__("TotalECCodewords",function(){return this.ecCodewordsPerBlock*this.NumBlocks}),this.__defineGetter__("NumBlocks",function(){for(var a=0,b=0;b<this.ecBlocks.length;b++)a+=this.ecBlocks[b].length;return a}),this.getECBlocks=function(){return this.ecBlocks}}function Version(a,b,c,d,e,f){this.versionNumber=a,this.alignmentPatternCenters=b,this.ecBlocks=new Array(c,d,e,f);for(var g=0,h=c.ECCodewordsPerBlock,i=c.getECBlocks(),j=0;j<i.length;j++){var k=i[j];g+=k.Count*(k.DataCodewords+h)}this.totalCodewords=g,this.__defineGetter__("VersionNumber",function(){return this.versionNumber}),this.__defineGetter__("AlignmentPatternCenters",function(){return this.alignmentPatternCenters}),this.__defineGetter__("TotalCodewords",function(){return this.totalCodewords}),this.__defineGetter__("DimensionForVersion",function(){return 17+4*this.versionNumber}),this.buildFunctionPattern=function(){var a=this.DimensionForVersion,b=new BitMatrix(a);b.setRegion(0,0,9,9),b.setRegion(a-8,0,8,9),b.setRegion(0,a-8,9,8);for(var c=this.alignmentPatternCenters.length,d=0;c>d;d++)for(var e=this.alignmentPatternCenters[d]-2,f=0;c>f;f++)0==d&&(0==f||f==c-1)||d==c-1&&0==f||b.setRegion(this.alignmentPatternCenters[f]-2,e,5,5);return b.setRegion(6,9,1,a-17),b.setRegion(9,6,a-17,1),this.versionNumber>6&&(b.setRegion(a-11,0,3,6),b.setRegion(0,a-11,6,3)),b},this.getECBlocksForLevel=function(a){return this.ecBlocks[a.ordinal()]}}function buildVersions(){return new Array(new Version(1,new Array,new ECBlocks(7,new ECB(1,19)),new ECBlocks(10,new ECB(1,16)),new ECBlocks(13,new ECB(1,13)),new ECBlocks(17,new ECB(1,9))),new Version(2,new Array(6,18),new ECBlocks(10,new ECB(1,34)),new ECBlocks(16,new ECB(1,28)),new ECBlocks(22,new ECB(1,22)),new ECBlocks(28,new ECB(1,16))),new Version(3,new Array(6,22),new ECBlocks(15,new ECB(1,55)),new ECBlocks(26,new ECB(1,44)),new ECBlocks(18,new ECB(2,17)),new ECBlocks(22,new ECB(2,13))),new Version(4,new Array(6,26),new ECBlocks(20,new ECB(1,80)),new ECBlocks(18,new ECB(2,32)),new ECBlocks(26,new ECB(2,24)),new ECBlocks(16,new ECB(4,9))),new Version(5,new Array(6,30),new ECBlocks(26,new ECB(1,108)),new ECBlocks(24,new ECB(2,43)),new ECBlocks(18,new ECB(2,15),new ECB(2,16)),new ECBlocks(22,new ECB(2,11),new ECB(2,12))),new Version(6,new Array(6,34),new ECBlocks(18,new ECB(2,68)),new ECBlocks(16,new ECB(4,27)),new ECBlocks(24,new ECB(4,19)),new ECBlocks(28,new ECB(4,15))),new Version(7,new Array(6,22,38),new ECBlocks(20,new ECB(2,78)),new ECBlocks(18,new ECB(4,31)),new ECBlocks(18,new ECB(2,14),new ECB(4,15)),new ECBlocks(26,new ECB(4,13),new ECB(1,14))),new Version(8,new Array(6,24,42),new ECBlocks(24,new ECB(2,97)),new ECBlocks(22,new ECB(2,38),new ECB(2,39)),new ECBlocks(22,new ECB(4,18),new ECB(2,19)),new ECBlocks(26,new ECB(4,14),new ECB(2,15))),new Version(9,new Array(6,26,46),new ECBlocks(30,new ECB(2,116)),new ECBlocks(22,new ECB(3,36),new ECB(2,37)),new ECBlocks(20,new ECB(4,16),new ECB(4,17)),new ECBlocks(24,new ECB(4,12),new ECB(4,13))),new Version(10,new Array(6,28,50),new ECBlocks(18,new ECB(2,68),new ECB(2,69)),new ECBlocks(26,new ECB(4,43),new ECB(1,44)),new ECBlocks(24,new ECB(6,19),new ECB(2,20)),new ECBlocks(28,new ECB(6,15),new ECB(2,16))),new Version(11,new Array(6,30,54),new ECBlocks(20,new ECB(4,81)),new ECBlocks(30,new ECB(1,50),new ECB(4,51)),new ECBlocks(28,new ECB(4,22),new ECB(4,23)),new ECBlocks(24,new ECB(3,12),new ECB(8,13))),new Version(12,new Array(6,32,58),new ECBlocks(24,new ECB(2,92),new ECB(2,93)),new ECBlocks(22,new ECB(6,36),new ECB(2,37)),new ECBlocks(26,new ECB(4,20),new ECB(6,21)),new ECBlocks(28,new ECB(7,14),new ECB(4,15))),new Version(13,new Array(6,34,62),new ECBlocks(26,new ECB(4,107)),new ECBlocks(22,new ECB(8,37),new ECB(1,38)),new ECBlocks(24,new ECB(8,20),new ECB(4,21)),new ECBlocks(22,new ECB(12,11),new ECB(4,12))),new Version(14,new Array(6,26,46,66),new ECBlocks(30,new ECB(3,115),new ECB(1,116)),new ECBlocks(24,new ECB(4,40),new ECB(5,41)),new ECBlocks(20,new ECB(11,16),new ECB(5,17)),new ECBlocks(24,new ECB(11,12),new ECB(5,13))),new Version(15,new Array(6,26,48,70),new ECBlocks(22,new ECB(5,87),new ECB(1,88)),new ECBlocks(24,new ECB(5,41),new ECB(5,42)),new ECBlocks(30,new ECB(5,24),new ECB(7,25)),new ECBlocks(24,new ECB(11,12),new ECB(7,13))),new Version(16,new Array(6,26,50,74),new ECBlocks(24,new ECB(5,98),new ECB(1,99)),new ECBlocks(28,new ECB(7,45),new ECB(3,46)),new ECBlocks(24,new ECB(15,19),new ECB(2,20)),new ECBlocks(30,new ECB(3,15),new ECB(13,16))),new Version(17,new Array(6,30,54,78),new ECBlocks(28,new ECB(1,107),new ECB(5,108)),new ECBlocks(28,new ECB(10,46),new ECB(1,47)),new ECBlocks(28,new ECB(1,22),new ECB(15,23)),new ECBlocks(28,new ECB(2,14),new ECB(17,15))),new Version(18,new Array(6,30,56,82),new ECBlocks(30,new ECB(5,120),new ECB(1,121)),new ECBlocks(26,new ECB(9,43),new ECB(4,44)),new ECBlocks(28,new ECB(17,22),new ECB(1,23)),new ECBlocks(28,new ECB(2,14),new ECB(19,15))),new Version(19,new Array(6,30,58,86),new ECBlocks(28,new ECB(3,113),new ECB(4,114)),new ECBlocks(26,new ECB(3,44),new ECB(11,45)),new ECBlocks(26,new ECB(17,21),new ECB(4,22)),new ECBlocks(26,new ECB(9,13),new ECB(16,14))),new Version(20,new Array(6,34,62,90),new ECBlocks(28,new ECB(3,107),new ECB(5,108)),new ECBlocks(26,new ECB(3,41),new ECB(13,42)),new ECBlocks(30,new ECB(15,24),new ECB(5,25)),new ECBlocks(28,new ECB(15,15),new ECB(10,16))),new Version(21,new Array(6,28,50,72,94),new ECBlocks(28,new ECB(4,116),new ECB(4,117)),new ECBlocks(26,new ECB(17,42)),new ECBlocks(28,new ECB(17,22),new ECB(6,23)),new ECBlocks(30,new ECB(19,16),new ECB(6,17))),new Version(22,new Array(6,26,50,74,98),new ECBlocks(28,new ECB(2,111),new ECB(7,112)),new ECBlocks(28,new ECB(17,46)),new ECBlocks(30,new ECB(7,24),new ECB(16,25)),new ECBlocks(24,new ECB(34,13))),new Version(23,new Array(6,30,54,74,102),new ECBlocks(30,new ECB(4,121),new ECB(5,122)),new ECBlocks(28,new ECB(4,47),new ECB(14,48)),new ECBlocks(30,new ECB(11,24),new ECB(14,25)),new ECBlocks(30,new ECB(16,15),new ECB(14,16))),new Version(24,new Array(6,28,54,80,106),new ECBlocks(30,new ECB(6,117),new ECB(4,118)),new ECBlocks(28,new ECB(6,45),new ECB(14,46)),new ECBlocks(30,new ECB(11,24),new ECB(16,25)),new ECBlocks(30,new ECB(30,16),new ECB(2,17))),new Version(25,new Array(6,32,58,84,110),new ECBlocks(26,new ECB(8,106),new ECB(4,107)),new ECBlocks(28,new ECB(8,47),new ECB(13,48)),new ECBlocks(30,new ECB(7,24),new ECB(22,25)),new ECBlocks(30,new ECB(22,15),new ECB(13,16))),new Version(26,new Array(6,30,58,86,114),new ECBlocks(28,new ECB(10,114),new ECB(2,115)),new ECBlocks(28,new ECB(19,46),new ECB(4,47)),new ECBlocks(28,new ECB(28,22),new ECB(6,23)),new ECBlocks(30,new ECB(33,16),new ECB(4,17))),new Version(27,new Array(6,34,62,90,118),new ECBlocks(30,new ECB(8,122),new ECB(4,123)),new ECBlocks(28,new ECB(22,45),new ECB(3,46)),new ECBlocks(30,new ECB(8,23),new ECB(26,24)),new ECBlocks(30,new ECB(12,15),new ECB(28,16))),new Version(28,new Array(6,26,50,74,98,122),new ECBlocks(30,new ECB(3,117),new ECB(10,118)),new ECBlocks(28,new ECB(3,45),new ECB(23,46)),new ECBlocks(30,new ECB(4,24),new ECB(31,25)),new ECBlocks(30,new ECB(11,15),new ECB(31,16))),new Version(29,new Array(6,30,54,78,102,126),new ECBlocks(30,new ECB(7,116),new ECB(7,117)),new ECBlocks(28,new ECB(21,45),new ECB(7,46)),new ECBlocks(30,new ECB(1,23),new ECB(37,24)),new ECBlocks(30,new ECB(19,15),new ECB(26,16))),new Version(30,new Array(6,26,52,78,104,130),new ECBlocks(30,new ECB(5,115),new ECB(10,116)),new ECBlocks(28,new ECB(19,47),new ECB(10,48)),new ECBlocks(30,new ECB(15,24),new ECB(25,25)),new ECBlocks(30,new ECB(23,15),new ECB(25,16))),new Version(31,new Array(6,30,56,82,108,134),new ECBlocks(30,new ECB(13,115),new ECB(3,116)),new ECBlocks(28,new ECB(2,46),new ECB(29,47)),new ECBlocks(30,new ECB(42,24),new ECB(1,25)),new ECBlocks(30,new ECB(23,15),new ECB(28,16))),new Version(32,new Array(6,34,60,86,112,138),new ECBlocks(30,new ECB(17,115)),new ECBlocks(28,new ECB(10,46),new ECB(23,47)),new ECBlocks(30,new ECB(10,24),new ECB(35,25)),new ECBlocks(30,new ECB(19,15),new ECB(35,16))),new Version(33,new Array(6,30,58,86,114,142),new ECBlocks(30,new ECB(17,115),new ECB(1,116)),new ECBlocks(28,new ECB(14,46),new ECB(21,47)),new ECBlocks(30,new ECB(29,24),new ECB(19,25)),new ECBlocks(30,new ECB(11,15),new ECB(46,16))),new Version(34,new Array(6,34,62,90,118,146),new ECBlocks(30,new ECB(13,115),new ECB(6,116)),new ECBlocks(28,new ECB(14,46),new ECB(23,47)),new ECBlocks(30,new ECB(44,24),new ECB(7,25)),new ECBlocks(30,new ECB(59,16),new ECB(1,17))),new Version(35,new Array(6,30,54,78,102,126,150),new ECBlocks(30,new ECB(12,121),new ECB(7,122)),new ECBlocks(28,new ECB(12,47),new ECB(26,48)),new ECBlocks(30,new ECB(39,24),new ECB(14,25)),new ECBlocks(30,new ECB(22,15),new ECB(41,16))),new Version(36,new Array(6,24,50,76,102,128,154),new ECBlocks(30,new ECB(6,121),new ECB(14,122)),new ECBlocks(28,new ECB(6,47),new ECB(34,48)),new ECBlocks(30,new ECB(46,24),new ECB(10,25)),new ECBlocks(30,new ECB(2,15),new ECB(64,16))),new Version(37,new Array(6,28,54,80,106,132,158),new ECBlocks(30,new ECB(17,122),new ECB(4,123)),new ECBlocks(28,new ECB(29,46),new ECB(14,47)),new ECBlocks(30,new ECB(49,24),new ECB(10,25)),new ECBlocks(30,new ECB(24,15),new ECB(46,16))),new Version(38,new Array(6,32,58,84,110,136,162),new ECBlocks(30,new ECB(4,122),new ECB(18,123)),new ECBlocks(28,new ECB(13,46),new ECB(32,47)),new ECBlocks(30,new ECB(48,24),new ECB(14,25)),new ECBlocks(30,new ECB(42,15),new ECB(32,16))),new Version(39,new Array(6,26,54,82,110,138,166),new ECBlocks(30,new ECB(20,117),new ECB(4,118)),new ECBlocks(28,new ECB(40,47),new ECB(7,48)),new ECBlocks(30,new ECB(43,24),new ECB(22,25)),new ECBlocks(30,new ECB(10,15),new ECB(67,16))),new Version(40,new Array(6,30,58,86,114,142,170),new ECBlocks(30,new ECB(19,118),new ECB(6,119)),new ECBlocks(28,new ECB(18,47),new ECB(31,48)),new ECBlocks(30,new ECB(34,24),new ECB(34,25)),new ECBlocks(30,new ECB(20,15),new ECB(61,16))))}function PerspectiveTransform(a,b,c,d,e,f,g,h,i){this.a11=a,this.a12=d,this.a13=g,this.a21=b,this.a22=e,this.a23=h,this.a31=c,this.a32=f,this.a33=i,this.transformPoints1=function(a){for(var b=a.length,c=this.a11,d=this.a12,e=this.a13,f=this.a21,g=this.a22,h=this.a23,i=this.a31,j=this.a32,k=this.a33,l=0;b>l;l+=2){var m=a[l],n=a[l+1],o=e*m+h*n+k;a[l]=(c*m+f*n+i)/o,a[l+1]=(d*m+g*n+j)/o}},this.transformPoints2=function(a,b){for(var c=a.length,d=0;c>d;d++){var e=a[d],f=b[d],g=this.a13*e+this.a23*f+this.a33;a[d]=(this.a11*e+this.a21*f+this.a31)/g,b[d]=(this.a12*e+this.a22*f+this.a32)/g}},this.buildAdjoint=function(){return new PerspectiveTransform(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},this.times=function(a){return new PerspectiveTransform(this.a11*a.a11+this.a21*a.a12+this.a31*a.a13,this.a11*a.a21+this.a21*a.a22+this.a31*a.a23,this.a11*a.a31+this.a21*a.a32+this.a31*a.a33,this.a12*a.a11+this.a22*a.a12+this.a32*a.a13,this.a12*a.a21+this.a22*a.a22+this.a32*a.a23,this.a12*a.a31+this.a22*a.a32+this.a32*a.a33,this.a13*a.a11+this.a23*a.a12+this.a33*a.a13,this.a13*a.a21+this.a23*a.a22+this.a33*a.a23,this.a13*a.a31+this.a23*a.a32+this.a33*a.a33)}}function DetectorResult(a,b){this.bits=a,this.points=b}function Detector(a){this.image=a,this.resultPointCallback=null,this.sizeOfBlackWhiteBlackRun=function(a,b,c,d){var e=Math.abs(d-b)>Math.abs(c-a);if(e){var f=a;a=b,b=f,f=c,c=d,d=f}for(var g=Math.abs(c-a),h=Math.abs(d-b),i=-g>>1,j=d>b?1:-1,k=c>a?1:-1,l=0,m=a,n=b;m!=c;m+=k){var o=e?n:m,p=e?m:n;if(1==l?this.image[o+p*qrcode.width]&&l++:this.image[o+p*qrcode.width]||l++,3==l){var q=m-a,r=n-b;return Math.sqrt(q*q+r*r)}if(i+=h,i>0){if(n==d)break;n+=j,i-=g}}var s=c-a,t=d-b;return Math.sqrt(s*s+t*t)},this.sizeOfBlackWhiteBlackRunBothWays=function(a,b,c,d){var e=this.sizeOfBlackWhiteBlackRun(a,b,c,d),f=1,g=a-(c-a);0>g?(f=a/(a-g),g=0):g>=qrcode.width&&(f=(qrcode.width-1-a)/(g-a),g=qrcode.width-1);var h=Math.floor(b-(d-b)*f);return f=1,0>h?(f=b/(b-h),h=0):h>=qrcode.height&&(f=(qrcode.height-1-b)/(h-b),h=qrcode.height-1),g=Math.floor(a+(g-a)*f),e+=this.sizeOfBlackWhiteBlackRun(a,b,g,h),e-1},this.calculateModuleSizeOneWay=function(a,b){var c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.X),Math.floor(a.Y),Math.floor(b.X),Math.floor(b.Y)),d=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(b.X),Math.floor(b.Y),Math.floor(a.X),Math.floor(a.Y));return isNaN(c)?d/7:isNaN(d)?c/7:(c+d)/14},this.calculateModuleSize=function(a,b,c){return(this.calculateModuleSizeOneWay(a,b)+this.calculateModuleSizeOneWay(a,c))/2},this.distance=function(a,b){return xDiff=a.X-b.X,yDiff=a.Y-b.Y,Math.sqrt(xDiff*xDiff+yDiff*yDiff)},this.computeDimension=function(a,b,c,d){var e=Math.round(this.distance(a,b)/d),f=Math.round(this.distance(a,c)/d),g=(e+f>>1)+7;switch(3&g){case 0:g++;break;case 2:g--;break;case 3:throw"Error"}return g},this.findAlignmentInRegion=function(a,b,c,d){var e=Math.floor(d*a),f=Math.max(0,b-e),g=Math.min(qrcode.width-1,b+e);if(3*a>g-f)throw"Error";var h=Math.max(0,c-e),i=Math.min(qrcode.height-1,c+e),j=new AlignmentPatternFinder(this.image,f,h,g-f,i-h,a,this.resultPointCallback);return j.find()},this.createTransform=function(a,b,c,d,e){var f,g,h,i,j=e-3.5;null!=d?(f=d.X,g=d.Y,h=i=j-3):(f=b.X-a.X+c.X,g=b.Y-a.Y+c.Y,h=i=j);var k=PerspectiveTransform.quadrilateralToQuadrilateral(3.5,3.5,j,3.5,h,i,3.5,j,a.X,a.Y,b.X,b.Y,f,g,c.X,c.Y);return k},this.sampleGrid=function(a,b,c){var d=GridSampler;return d.sampleGrid3(a,c,b)},this.processFinderPatternInfo=function(a){var b=a.TopLeft,c=a.TopRight,d=a.BottomLeft,e=this.calculateModuleSize(b,c,d);if(1>e)throw"Error";var f=this.computeDimension(b,c,d,e),g=Version.getProvisionalVersionForDimension(f),h=g.DimensionForVersion-7,i=null;if(g.AlignmentPatternCenters.length>0)for(var j=c.X-b.X+d.X,k=c.Y-b.Y+d.Y,l=1-3/h,m=Math.floor(b.X+l*(j-b.X)),n=Math.floor(b.Y+l*(k-b.Y)),o=4;16>=o;o<<=1){i=this.findAlignmentInRegion(e,m,n,o);break}var p,q=this.createTransform(b,c,d,i,f),r=this.sampleGrid(this.image,q,f);return p=null==i?new Array(d,b,c):new Array(d,b,c,i),new DetectorResult(r,p)},this.detect=function(){var a=(new FinderPatternFinder).findFinderPattern(this.image);return this.processFinderPatternInfo(a)}}function FormatInformation(a){this.errorCorrectionLevel=ErrorCorrectionLevel.forBits(a>>3&3),this.dataMask=7&a,this.__defineGetter__("ErrorCorrectionLevel",function(){return this.errorCorrectionLevel}),this.__defineGetter__("DataMask",function(){return this.dataMask}),this.GetHashCode=function(){return this.errorCorrectionLevel.ordinal()<<3|dataMask},this.Equals=function(a){var b=a;return this.errorCorrectionLevel==b.errorCorrectionLevel&&this.dataMask==b.dataMask}}function ErrorCorrectionLevel(a,b,c){this.ordinal_Renamed_Field=a,this.bits=b,this.name=c,this.__defineGetter__("Bits",function(){return this.bits}),this.__defineGetter__("Name",function(){return this.name}),this.ordinal=function(){return this.ordinal_Renamed_Field}}function BitMatrix(a,b){if(b||(b=a),1>a||1>b)throw"Both dimensions must be greater than 0";this.width=a,this.height=b;var c=a>>5;0!=(31&a)&&c++,this.rowSize=c,this.bits=new Array(c*b);for(var d=0;d<this.bits.length;d++)this.bits[d]=0;this.__defineGetter__("Width",function(){return this.width}),this.__defineGetter__("Height",function(){return this.height}),this.__defineGetter__("Dimension",function(){if(this.width!=this.height)throw"Can't call getDimension() on a non-square matrix";return this.width}),this.get_Renamed=function(a,b){var c=b*this.rowSize+(a>>5);return 0!=(1&URShift(this.bits[c],31&a))},this.set_Renamed=function(a,b){var c=b*this.rowSize+(a>>5);this.bits[c]|=1<<(31&a)},this.flip=function(a,b){var c=b*this.rowSize+(a>>5);this.bits[c]^=1<<(31&a)},this.clear=function(){for(var a=this.bits.length,b=0;a>b;b++)this.bits[b]=0},this.setRegion=function(a,b,c,d){if(0>b||0>a)throw"Left and top must be nonnegative";if(1>d||1>c)throw"Height and width must be at least 1";var e=a+c,f=b+d;if(f>this.height||e>this.width)throw"The region must fit inside the matrix";for(var g=b;f>g;g++)for(var h=g*this.rowSize,i=a;e>i;i++)this.bits[h+(i>>5)]|=1<<(31&i)}}function DataBlock(a,b){this.numDataCodewords=a,this.codewords=b,this.__defineGetter__("NumDataCodewords",function(){return this.numDataCodewords}),this.__defineGetter__("Codewords",function(){return this.codewords})}function BitMatrixParser(a){var b=a.Dimension;if(21>b||1!=(3&b))throw"Error BitMatrixParser";this.bitMatrix=a,this.parsedVersion=null,this.parsedFormatInfo=null,this.copyBit=function(a,b,c){return this.bitMatrix.get_Renamed(a,b)?c<<1|1:c<<1},this.readFormatInformation=function(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;for(var a=0,b=0;6>b;b++)a=this.copyBit(b,8,a);a=this.copyBit(7,8,a),a=this.copyBit(8,8,a),a=this.copyBit(8,7,a);for(var c=5;c>=0;c--)a=this.copyBit(8,c,a);if(this.parsedFormatInfo=FormatInformation.decodeFormatInformation(a),null!=this.parsedFormatInfo)return this.parsedFormatInfo;var d=this.bitMatrix.Dimension;a=0;for(var e=d-8,b=d-1;b>=e;b--)a=this.copyBit(b,8,a);for(var c=d-7;d>c;c++)a=this.copyBit(8,c,a);if(this.parsedFormatInfo=FormatInformation.decodeFormatInformation(a),null!=this.parsedFormatInfo)return this.parsedFormatInfo;throw"Error readFormatInformation"},this.readVersion=function(){if(null!=this.parsedVersion)return this.parsedVersion;var a=this.bitMatrix.Dimension,b=a-17>>2;if(6>=b)return Version.getVersionForNumber(b);for(var c=0,d=a-11,e=5;e>=0;e--)for(var f=a-9;f>=d;f--)c=this.copyBit(f,e,c);if(this.parsedVersion=Version.decodeVersionInformation(c),null!=this.parsedVersion&&this.parsedVersion.DimensionForVersion==a)return this.parsedVersion;c=0;for(var f=5;f>=0;f--)for(var e=a-9;e>=d;e--)c=this.copyBit(f,e,c);if(this.parsedVersion=Version.decodeVersionInformation(c),null!=this.parsedVersion&&this.parsedVersion.DimensionForVersion==a)return this.parsedVersion;throw"Error readVersion"},this.readCodewords=function(){var a=this.readFormatInformation(),b=this.readVersion(),c=DataMask.forReference(a.DataMask),d=this.bitMatrix.Dimension;c.unmaskBitMatrix(this.bitMatrix,d);for(var e=b.buildFunctionPattern(),f=!0,g=new Array(b.TotalCodewords),h=0,i=0,j=0,k=d-1;k>0;k-=2){6==k&&k--;for(var l=0;d>l;l++)for(var m=f?d-1-l:l,n=0;2>n;n++)e.get_Renamed(k-n,m)||(j++,i<<=1,this.bitMatrix.get_Renamed(k-n,m)&&(i|=1),8==j&&(g[h++]=i,j=0,i=0));f^=!0}if(h!=b.TotalCodewords)throw"Error readCodewords";return g}}function DataMask000(){this.unmaskBitMatrix=function(a,b){for(var c=0;b>c;c++)for(var d=0;b>d;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return 0==(a+b&1)}}function DataMask001(){this.unmaskBitMatrix=function(a,b){for(var c=0;b>c;c++)for(var d=0;b>d;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return 0==(1&a)}}function DataMask010(){this.unmaskBitMatrix=function(a,b){for(var c=0;b>c;c++)for(var d=0;b>d;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return b%3==0}}function DataMask011(){this.unmaskBitMatrix=function(a,b){for(var c=0;b>c;c++)for(var d=0;b>d;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return(a+b)%3==0}}function DataMask100(){this.unmaskBitMatrix=function(a,b){for(var c=0;b>c;c++)for(var d=0;b>d;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return 0==(URShift(a,1)+b/3&1)}}function DataMask101(){this.unmaskBitMatrix=function(a,b){for(var c=0;b>c;c++)for(var d=0;b>d;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){var c=a*b;return(1&c)+c%3==0}}function DataMask110(){this.unmaskBitMatrix=function(a,b){for(var c=0;b>c;c++)for(var d=0;b>d;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){var c=a*b;return 0==((1&c)+c%3&1)}}function DataMask111(){this.unmaskBitMatrix=function(a,b){for(var c=0;b>c;c++)for(var d=0;b>d;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return 0==((a+b&1)+a*b%3&1)}}function ReedSolomonDecoder(a){this.field=a,this.decode=function(a,b){for(var c=new GF256Poly(this.field,a),d=new Array(b),e=0;e<d.length;e++)d[e]=0;for(var f=!1,g=!0,e=0;b>e;e++){var h=c.evaluateAt(this.field.exp(f?e+1:e));d[d.length-1-e]=h,0!=h&&(g=!1)}if(!g)for(var i=new GF256Poly(this.field,d),j=this.runEuclideanAlgorithm(this.field.buildMonomial(b,1),i,b),k=j[0],l=j[1],m=this.findErrorLocations(k),n=this.findErrorMagnitudes(l,m,f),e=0;e<m.length;e++){var o=a.length-1-this.field.log(m[e]);if(0>o)throw"ReedSolomonException Bad error location";a[o]=GF256.addOrSubtract(a[o],n[e])}},this.runEuclideanAlgorithm=function(a,b,c){if(a.Degree<b.Degree){var d=a;a=b,b=d}for(var e=a,f=b,g=this.field.One,h=this.field.Zero,i=this.field.Zero,j=this.field.One;f.Degree>=Math.floor(c/2);){var k=e,l=g,m=i;if(e=f,g=h,i=j,e.Zero)throw"r_{i-1} was zero";f=k;for(var n=this.field.Zero,o=e.getCoefficient(e.Degree),p=this.field.inverse(o);f.Degree>=e.Degree&&!f.Zero;){var q=f.Degree-e.Degree,r=this.field.multiply(f.getCoefficient(f.Degree),p);n=n.addOrSubtract(this.field.buildMonomial(q,r)),f=f.addOrSubtract(e.multiplyByMonomial(q,r))}h=n.multiply1(g).addOrSubtract(l),j=n.multiply1(i).addOrSubtract(m)}var s=j.getCoefficient(0);if(0==s)throw"ReedSolomonException sigmaTilde(0) was zero";var t=this.field.inverse(s),u=j.multiply2(t),v=f.multiply2(t);return new Array(u,v)},this.findErrorLocations=function(a){var b=a.Degree;if(1==b)return new Array(a.getCoefficient(1));for(var c=new Array(b),d=0,e=1;256>e&&b>d;e++)0==a.evaluateAt(e)&&(c[d]=this.field.inverse(e),d++);if(d!=b)throw"Error locator degree does not match number of roots";return c},this.findErrorMagnitudes=function(a,b,c){for(var d=b.length,e=new Array(d),f=0;d>f;f++){for(var g=this.field.inverse(b[f]),h=1,i=0;d>i;i++)f!=i&&(h=this.field.multiply(h,GF256.addOrSubtract(1,this.field.multiply(b[i],g))));e[f]=this.field.multiply(a.evaluateAt(g),this.field.inverse(h)),c&&(e[f]=this.field.multiply(e[f],g))}return e}}function GF256Poly(a,b){if(null==b||0==b.length)throw"System.ArgumentException";this.field=a;var c=b.length;if(c>1&&0==b[0]){for(var d=1;c>d&&0==b[d];)d++;if(d==c)this.coefficients=a.Zero.coefficients;else{this.coefficients=new Array(c-d);for(var e=0;e<this.coefficients.length;e++)this.coefficients[e]=0;for(var f=0;f<this.coefficients.length;f++)this.coefficients[f]=b[d+f]}}else this.coefficients=b;this.__defineGetter__("Zero",function(){return 0==this.coefficients[0]}),this.__defineGetter__("Degree",function(){return this.coefficients.length-1}),this.__defineGetter__("Coefficients",function(){return this.coefficients}),this.getCoefficient=function(a){return this.coefficients[this.coefficients.length-1-a]},this.evaluateAt=function(a){if(0==a)return this.getCoefficient(0);var b=this.coefficients.length;if(1==a){for(var c=0,d=0;b>d;d++)c=GF256.addOrSubtract(c,this.coefficients[d]);return c}for(var e=this.coefficients[0],d=1;b>d;d++)e=GF256.addOrSubtract(this.field.multiply(a,e),this.coefficients[d]);return e},this.addOrSubtract=function(b){if(this.field!=b.field)throw"GF256Polys do not have same GF256 field";if(this.Zero)return b;if(b.Zero)return this;var c=this.coefficients,d=b.coefficients;if(c.length>d.length){var e=c;c=d,d=e}for(var f=new Array(d.length),g=d.length-c.length,h=0;g>h;h++)f[h]=d[h];for(var i=g;i<d.length;i++)f[i]=GF256.addOrSubtract(c[i-g],d[i]);return new GF256Poly(a,f)},this.multiply1=function(a){if(this.field!=a.field)throw"GF256Polys do not have same GF256 field";if(this.Zero||a.Zero)return this.field.Zero;for(var b=this.coefficients,c=b.length,d=a.coefficients,e=d.length,f=new Array(c+e-1),g=0;c>g;g++)for(var h=b[g],i=0;e>i;i++)f[g+i]=GF256.addOrSubtract(f[g+i],this.field.multiply(h,d[i]));return new GF256Poly(this.field,f)},this.multiply2=function(a){if(0==a)return this.field.Zero;if(1==a)return this;for(var b=this.coefficients.length,c=new Array(b),d=0;b>d;d++)c[d]=this.field.multiply(this.coefficients[d],a);return new GF256Poly(this.field,c)},this.multiplyByMonomial=function(a,b){if(0>a)throw"System.ArgumentException";if(0==b)return this.field.Zero;for(var c=this.coefficients.length,d=new Array(c+a),e=0;e<d.length;e++)d[e]=0;for(var e=0;c>e;e++)d[e]=this.field.multiply(this.coefficients[e],b);return new GF256Poly(this.field,d)},this.divide=function(a){if(this.field!=a.field)throw"GF256Polys do not have same GF256 field";if(a.Zero)throw"Divide by 0";for(var b=this.field.Zero,c=this,d=a.getCoefficient(a.Degree),e=this.field.inverse(d);c.Degree>=a.Degree&&!c.Zero;){var f=c.Degree-a.Degree,g=this.field.multiply(c.getCoefficient(c.Degree),e),h=a.multiplyByMonomial(f,g),i=this.field.buildMonomial(f,g);b=b.addOrSubtract(i),c=c.addOrSubtract(h)}return new Array(b,c)}}function GF256(a){this.expTable=new Array(256),this.logTable=new Array(256);for(var b=1,c=0;256>c;c++)this.expTable[c]=b,b<<=1,b>=256&&(b^=a);for(var c=0;255>c;c++)this.logTable[this.expTable[c]]=c;var d=new Array(1);d[0]=0,this.zero=new GF256Poly(this,new Array(d));var e=new Array(1);e[0]=1,this.one=new GF256Poly(this,new Array(e)),this.__defineGetter__("Zero",function(){return this.zero}),this.__defineGetter__("One",function(){return this.one}),this.buildMonomial=function(a,b){if(0>a)throw"System.ArgumentException";if(0==b)return zero;for(var c=new Array(a+1),d=0;d<c.length;d++)c[d]=0;return c[0]=b,new GF256Poly(this,c)},this.exp=function(a){return this.expTable[a]},this.log=function(a){if(0==a)throw"System.ArgumentException";return this.logTable[a]},this.inverse=function(a){if(0==a)throw"System.ArithmeticException";return this.expTable[255-this.logTable[a]]},this.multiply=function(a,b){return 0==a||0==b?0:1==a?b:1==b?a:this.expTable[(this.logTable[a]+this.logTable[b])%255]}}function URShift(a,b){return a>=0?a>>b:(a>>b)+(2<<~b)}function FinderPattern(a,b,c){this.x=a,this.y=b,this.count=1,this.estimatedModuleSize=c,this.__defineGetter__("EstimatedModuleSize",function(){return this.estimatedModuleSize}),this.__defineGetter__("Count",function(){return this.count}),this.__defineGetter__("X",function(){return this.x}),this.__defineGetter__("Y",function(){return this.y}),this.incrementCount=function(){this.count++},this.aboutEquals=function(a,b,c){if(Math.abs(b-this.y)<=a&&Math.abs(c-this.x)<=a){var d=Math.abs(a-this.estimatedModuleSize);return 1>=d||d/this.estimatedModuleSize<=1}return!1}}function FinderPatternInfo(a){this.bottomLeft=a[0],this.topLeft=a[1],this.topRight=a[2],this.__defineGetter__("BottomLeft",function(){return this.bottomLeft}),this.__defineGetter__("TopLeft",function(){return this.topLeft}),this.__defineGetter__("TopRight",function(){return this.topRight})}function FinderPatternFinder(){this.image=null,this.possibleCenters=[],this.hasSkipped=!1,this.crossCheckStateCount=new Array(0,0,0,0,0),this.resultPointCallback=null,this.__defineGetter__("CrossCheckStateCount",function(){return this.crossCheckStateCount[0]=0,this.crossCheckStateCount[1]=0,this.crossCheckStateCount[2]=0,this.crossCheckStateCount[3]=0,this.crossCheckStateCount[4]=0,this.crossCheckStateCount}),this.foundPatternCross=function(a){for(var b=0,c=0;5>c;c++){var d=a[c];if(0==d)return!1;b+=d}if(7>b)return!1;var e=Math.floor((b<<INTEGER_MATH_SHIFT)/7),f=Math.floor(e/2);return Math.abs(e-(a[0]<<INTEGER_MATH_SHIFT))<f&&Math.abs(e-(a[1]<<INTEGER_MATH_SHIFT))<f&&Math.abs(3*e-(a[2]<<INTEGER_MATH_SHIFT))<3*f&&Math.abs(e-(a[3]<<INTEGER_MATH_SHIFT))<f&&Math.abs(e-(a[4]<<INTEGER_MATH_SHIFT))<f},this.centerFromEnd=function(a,b){return b-a[4]-a[3]-a[2]/2},this.crossCheckVertical=function(a,b,c,d){for(var e=this.image,f=qrcode.height,g=this.CrossCheckStateCount,h=a;h>=0&&e[b+h*qrcode.width];)g[2]++,h--;if(0>h)return NaN;for(;h>=0&&!e[b+h*qrcode.width]&&g[1]<=c;)g[1]++,h--;if(0>h||g[1]>c)return NaN;for(;h>=0&&e[b+h*qrcode.width]&&g[0]<=c;)g[0]++,h--;if(g[0]>c)return NaN;for(h=a+1;f>h&&e[b+h*qrcode.width];)g[2]++,h++;if(h==f)return NaN;for(;f>h&&!e[b+h*qrcode.width]&&g[3]<c;)g[3]++,h++;if(h==f||g[3]>=c)return NaN;for(;f>h&&e[b+h*qrcode.width]&&g[4]<c;)g[4]++,h++;if(g[4]>=c)return NaN;var i=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(i-d)>=2*d?NaN:this.foundPatternCross(g)?this.centerFromEnd(g,h):NaN},this.crossCheckHorizontal=function(a,b,c,d){for(var e=this.image,f=qrcode.width,g=this.CrossCheckStateCount,h=a;h>=0&&e[h+b*qrcode.width];)g[2]++,h--;if(0>h)return NaN;for(;h>=0&&!e[h+b*qrcode.width]&&g[1]<=c;)g[1]++,h--;if(0>h||g[1]>c)return NaN;for(;h>=0&&e[h+b*qrcode.width]&&g[0]<=c;)g[0]++,h--;if(g[0]>c)return NaN;for(h=a+1;f>h&&e[h+b*qrcode.width];)g[2]++,h++;if(h==f)return NaN;for(;f>h&&!e[h+b*qrcode.width]&&g[3]<c;)g[3]++,h++;if(h==f||g[3]>=c)return NaN;for(;f>h&&e[h+b*qrcode.width]&&g[4]<c;)g[4]++,h++;if(g[4]>=c)return NaN;var i=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(i-d)>=d?NaN:this.foundPatternCross(g)?this.centerFromEnd(g,h):NaN},this.handlePossibleCenter=function(a,b,c){var d=a[0]+a[1]+a[2]+a[3]+a[4],e=this.centerFromEnd(a,c),f=this.crossCheckVertical(b,Math.floor(e),a[2],d);if(!isNaN(f)&&(e=this.crossCheckHorizontal(Math.floor(e),Math.floor(f),a[2],d),!isNaN(e))){for(var g=d/7,h=!1,i=this.possibleCenters.length,j=0;i>j;j++){var k=this.possibleCenters[j];if(k.aboutEquals(g,f,e)){k.incrementCount(),h=!0;break}}if(!h){var l=new FinderPattern(e,f,g);this.possibleCenters.push(l),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(l)}return!0}return!1},this.selectBestPatterns=function(){var a=this.possibleCenters.length;if(3>a)throw"Couldn't find enough finder patterns";if(a>3){for(var b=0,c=0,d=0;a>d;d++){var e=this.possibleCenters[d].EstimatedModuleSize;b+=e,c+=e*e}var f=b/a;this.possibleCenters.sort(function(a,b){var c=Math.abs(b.EstimatedModuleSize-f),d=Math.abs(a.EstimatedModuleSize-f);return d>c?-1:c==d?0:1});for(var g=Math.sqrt(c/a-f*f),h=Math.max(.2*f,g),d=0;d<this.possibleCenters.length&&this.possibleCenters.length>3;d++){var i=this.possibleCenters[d];Math.abs(i.EstimatedModuleSize-f)>h&&(this.possibleCenters.remove(d),d--)}}return this.possibleCenters.length>3&&this.possibleCenters.sort(function(a,b){return a.count>b.count?-1:a.count<b.count?1:0}),new Array(this.possibleCenters[0],this.possibleCenters[1],this.possibleCenters[2])},this.findRowSkip=function(){var a=this.possibleCenters.length;if(1>=a)return 0;for(var b=null,c=0;a>c;c++){var d=this.possibleCenters[c];if(d.Count>=CENTER_QUORUM){if(null!=b)return this.hasSkipped=!0,Math.floor((Math.abs(b.X-d.X)-Math.abs(b.Y-d.Y))/2);b=d}}return 0},this.haveMultiplyConfirmedCenters=function(){for(var a=0,b=0,c=this.possibleCenters.length,d=0;c>d;d++){var e=this.possibleCenters[d];e.Count>=CENTER_QUORUM&&(a++,b+=e.EstimatedModuleSize)}if(3>a)return!1;for(var f=b/c,g=0,d=0;c>d;d++)e=this.possibleCenters[d],g+=Math.abs(e.EstimatedModuleSize-f);return.05*b>=g},this.findFinderPattern=function(a){var b=!1;this.image=a;var c=qrcode.height,d=qrcode.width,e=Math.floor(3*c/(4*MAX_MODULES));(MIN_SKIP>e||b)&&(e=MIN_SKIP);for(var f=!1,g=new Array(5),h=e-1;c>h&&!f;h+=e){g[0]=0,g[1]=0,g[2]=0,g[3]=0,g[4]=0;for(var i=0,j=0;d>j;j++)if(a[j+h*qrcode.width])1==(1&i)&&i++,g[i]++;else if(0==(1&i))if(4==i)if(this.foundPatternCross(g)){var k=this.handlePossibleCenter(g,h,j);if(k)if(e=2,this.hasSkipped)f=this.haveMultiplyConfirmedCenters();else{var l=this.findRowSkip();l>g[2]&&(h+=l-g[2]-e,j=d-1)}else{do j++;while(d>j&&!a[j+h*qrcode.width]);j--}i=0,g[0]=0,g[1]=0,g[2]=0,g[3]=0,g[4]=0}else g[0]=g[2],g[1]=g[3],g[2]=g[4],g[3]=1,g[4]=0,i=3;else g[++i]++;else g[i]++;if(this.foundPatternCross(g)){var k=this.handlePossibleCenter(g,h,d);k&&(e=g[0],
this.hasSkipped&&(f=haveMultiplyConfirmedCenters()))}}var m=this.selectBestPatterns();return qrcode.orderBestPatterns(m),new FinderPatternInfo(m)}}function AlignmentPattern(a,b,c){this.x=a,this.y=b,this.count=1,this.estimatedModuleSize=c,this.__defineGetter__("EstimatedModuleSize",function(){return this.estimatedModuleSize}),this.__defineGetter__("Count",function(){return this.count}),this.__defineGetter__("X",function(){return Math.floor(this.x)}),this.__defineGetter__("Y",function(){return Math.floor(this.y)}),this.incrementCount=function(){this.count++},this.aboutEquals=function(a,b,c){if(Math.abs(b-this.y)<=a&&Math.abs(c-this.x)<=a){var d=Math.abs(a-this.estimatedModuleSize);return 1>=d||d/this.estimatedModuleSize<=1}return!1}}function AlignmentPatternFinder(a,b,c,d,e,f,g){this.image=a,this.possibleCenters=new Array,this.startX=b,this.startY=c,this.width=d,this.height=e,this.moduleSize=f,this.crossCheckStateCount=new Array(0,0,0),this.resultPointCallback=g,this.centerFromEnd=function(a,b){return b-a[2]-a[1]/2},this.foundPatternCross=function(a){for(var b=this.moduleSize,c=b/2,d=0;3>d;d++)if(Math.abs(b-a[d])>=c)return!1;return!0},this.crossCheckVertical=function(a,b,c,d){var e=this.image,f=qrcode.height,g=this.crossCheckStateCount;g[0]=0,g[1]=0,g[2]=0;for(var h=a;h>=0&&e[b+h*qrcode.width]&&g[1]<=c;)g[1]++,h--;if(0>h||g[1]>c)return NaN;for(;h>=0&&!e[b+h*qrcode.width]&&g[0]<=c;)g[0]++,h--;if(g[0]>c)return NaN;for(h=a+1;f>h&&e[b+h*qrcode.width]&&g[1]<=c;)g[1]++,h++;if(h==f||g[1]>c)return NaN;for(;f>h&&!e[b+h*qrcode.width]&&g[2]<=c;)g[2]++,h++;if(g[2]>c)return NaN;var i=g[0]+g[1]+g[2];return 5*Math.abs(i-d)>=2*d?NaN:this.foundPatternCross(g)?this.centerFromEnd(g,h):NaN},this.handlePossibleCenter=function(a,b,c){var d=a[0]+a[1]+a[2],e=this.centerFromEnd(a,c),f=this.crossCheckVertical(b,Math.floor(e),2*a[1],d);if(!isNaN(f)){for(var g=(a[0]+a[1]+a[2])/3,h=this.possibleCenters.length,i=0;h>i;i++){var j=this.possibleCenters[i];if(j.aboutEquals(g,f,e))return new AlignmentPattern(e,f,g)}var k=new AlignmentPattern(e,f,g);this.possibleCenters.push(k),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(k)}return null},this.find=function(){for(var b=this.startX,e=this.height,f=b+d,g=c+(e>>1),h=new Array(0,0,0),i=0;e>i;i++){var j=g+(0==(1&i)?i+1>>1:-(i+1>>1));h[0]=0,h[1]=0,h[2]=0;for(var k=b;f>k&&!a[k+qrcode.width*j];)k++;for(var l=0;f>k;){if(a[k+j*qrcode.width])if(1==l)h[l]++;else if(2==l){if(this.foundPatternCross(h)){var m=this.handlePossibleCenter(h,j,k);if(null!=m)return m}h[0]=h[2],h[1]=1,h[2]=0,l=1}else h[++l]++;else 1==l&&l++,h[l]++;k++}if(this.foundPatternCross(h)){var m=this.handlePossibleCenter(h,j,f);if(null!=m)return m}}if(0!=this.possibleCenters.length)return this.possibleCenters[0];throw"Couldn't find enough alignment patterns"}}function QRCodeDataBlockReader(a,b,c){this.blockPointer=0,this.bitPointer=7,this.dataLength=0,this.blocks=a,this.numErrorCorrectionCode=c,9>=b?this.dataLengthMode=0:b>=10&&26>=b?this.dataLengthMode=1:b>=27&&40>=b&&(this.dataLengthMode=2),this.getNextBits=function(a){var b=0;if(a<this.bitPointer+1){for(var c=0,d=0;a>d;d++)c+=1<<d;return c<<=this.bitPointer-a+1,b=(this.blocks[this.blockPointer]&c)>>this.bitPointer-a+1,this.bitPointer-=a,b}if(a<this.bitPointer+1+8){for(var e=0,d=0;d<this.bitPointer+1;d++)e+=1<<d;return b=(this.blocks[this.blockPointer]&e)<<a-(this.bitPointer+1),this.blockPointer++,b+=this.blocks[this.blockPointer]>>8-(a-(this.bitPointer+1)),this.bitPointer=this.bitPointer-a%8,this.bitPointer<0&&(this.bitPointer=8+this.bitPointer),b}if(a<this.bitPointer+1+16){for(var e=0,f=0,d=0;d<this.bitPointer+1;d++)e+=1<<d;var g=(this.blocks[this.blockPointer]&e)<<a-(this.bitPointer+1);this.blockPointer++;var h=this.blocks[this.blockPointer]<<a-(this.bitPointer+1+8);this.blockPointer++;for(var d=0;d<a-(this.bitPointer+1+8);d++)f+=1<<d;f<<=8-(a-(this.bitPointer+1+8));var i=(this.blocks[this.blockPointer]&f)>>8-(a-(this.bitPointer+1+8));return b=g+h+i,this.bitPointer=this.bitPointer-(a-8)%8,this.bitPointer<0&&(this.bitPointer=8+this.bitPointer),b}return 0},this.NextMode=function(){return this.blockPointer>this.blocks.length-this.numErrorCorrectionCode-2?0:this.getNextBits(4)},this.getDataLength=function(a){for(var b=0;a>>b!=1;)b++;return this.getNextBits(qrcode.sizeOfDataLengthInfo[this.dataLengthMode][b])},this.getRomanAndFigureString=function(a){var b=a,c=0,d="",e=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":");do if(b>1){c=this.getNextBits(11);var f=Math.floor(c/45),g=c%45;d+=e[f],d+=e[g],b-=2}else 1==b&&(c=this.getNextBits(6),d+=e[c],b-=1);while(b>0);return d},this.getFigureString=function(a){var b=a,c=0,d="";do b>=3?(c=this.getNextBits(10),100>c&&(d+="0"),10>c&&(d+="0"),b-=3):2==b?(c=this.getNextBits(7),10>c&&(d+="0"),b-=2):1==b&&(c=this.getNextBits(4),b-=1),d+=c;while(b>0);return d},this.get8bitByteArray=function(a){var b=a,c=0,d=new Array;do c=this.getNextBits(8),d.push(c),b--;while(b>0);return d},this.getKanjiString=function(a){var b=a,c=0,d="";do{c=getNextBits(13);var e=c%192,f=c/192,g=(f<<8)+e,h=0;h=40956>=g+33088?g+33088:g+49472,d+=String.fromCharCode(h),b--}while(b>0);return d},this.__defineGetter__("DataByte",function(){for(var a=new Array,b=1,c=2,d=4,e=8;;){var f=this.NextMode();if(0==f){if(a.length>0)break;throw"Empty data block"}if(f!=b&&f!=c&&f!=d&&f!=e)throw"Invalid mode: "+f+" in (block:"+this.blockPointer+" bit:"+this.bitPointer+")";if(dataLength=this.getDataLength(f),dataLength<1)throw"Invalid data length: "+dataLength;switch(f){case b:for(var g=this.getFigureString(dataLength),h=new Array(g.length),i=0;i<g.length;i++)h[i]=g.charCodeAt(i);a.push(h);break;case c:for(var g=this.getRomanAndFigureString(dataLength),h=new Array(g.length),i=0;i<g.length;i++)h[i]=g.charCodeAt(i);a.push(h);break;case d:var j=this.get8bitByteArray(dataLength);a.push(j);break;case e:var g=this.getKanjiString(dataLength);a.push(g)}}return a})}(function(){"use strict";angular.module("WissenSystem",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ui.router","ui.bootstrap","ui.select","pascalprecht.translate","angular-loading-bar","restangular","toastr","http-auth-interceptor","ui.grid","ui.grid.edit","ui.grid.resizeColumns","ui.grid.exporter","ui.grid.selection","ngFileUpload","FBAngular","ngMaterial","textAngular","angular-svg-round-progress","qrScanner","ja.qr","ngWebSocket"]).constant("App",function(){var a,b,c,d;return c=location.hostname,a=c+"/","undefined"!=typeof Storage?null===localStorage.getItem("dominio")?(console.log("No hay dominio almacenado"),localStorage.setItem("dominio",c)):a=localStorage.getItem("dominio")+"/":alert("El navegador no soporta LocalStorage"),console.log("hostname: ",location.hostname),location.hostname.match("lalvirtual")&&(a="http://lalvirtual.com/wissen/"),location.hostname.match("olimpiadaslibertad")&&(a="http://olimpiadaslibertad.com/"),d="http://"+a+"wissenLaravel/public/",b=a+"ProyectoDecimo/",{Server:d,views:"views/",images:d+"images/",perfilPath:d+"images/perfil/",imgSystemPath:d+"images/eventos/",dominio:a}}()).constant("AUTH_EVENTS",{loginSuccess:"auth-login-success",loginFailed:"auth-login-failed",logoutSuccess:"auth-logout-success",sessionTimeout:"auth-session-timeout",notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized"}).constant("USER_ROLES",{all:"*",admin:"admin",participante:"participante",tecnico:"tecnico",profesor:"profesor",guest:"guest"}).constant("PERMISSIONS",{can_work_like_admin:"can_work_like_admin",can_work_like_teacher:"can_work_like_teacher",can_work_like_participante:"can_work_like_participante",can_work_like_tecnico:"can_work_like_tecnico",can_work_like_guest:"can_work_like_guest",can_accept_images:"can_accept_images",can_edit_participantes:"can_edit_participantes",can_edit_usuarios:"can_edit_usuarios"})}).call(this),function(){"use strict";angular.module("WissenSystem").controller("MainCtrl",["$scope","$window","$interval",function(a,b,c){}]).controller("LandingCtrl",["$scope","$window","$interval",function(a,b,c){}])}.call(this),function(a,b,c){"use strict";function d(){this.$get=["$$sanitizeUri",function(a){return function(b){var c=[];return g(b,l(c,function(b,c){return!/^unsafe/.test(a(b,c))})),c.join("")}}]}function e(a){var c=[],d=l(c,b.noop);return d.chars(a),c.join("")}function f(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function g(a,c){function d(a,d,f,g){if(d=b.lowercase(d),B[d])for(;j.last()&&C[j.last()];)e("",j.last());A[d]&&j.last()==d&&e("",d),g=x[d]||!!g,g||j.push(d);var i={};f.replace(p,function(a,b,c,d,e){var f=c||d||e||"";i[b]=h(f)}),c.start&&c.start(d,i,g)}function e(a,d){var e,f=0;if(d=b.lowercase(d))for(f=j.length-1;f>=0&&j[f]!=d;f--);if(f>=0){for(e=j.length-1;e>=f;e--)c.end&&c.end(j[e]);j.length=f}}var f,g,i,j=[],k=a;for(j.last=function(){return j[j.length-1]};a;){if(g=!0,j.last()&&D[j.last()])a=a.replace(new RegExp("(.*)<\\s*\\/\\s*"+j.last()+"[^>]*>","i"),function(a,b){return b=b.replace(s,"$1").replace(u,"$1"),c.chars&&c.chars(h(b)),""}),e("",j.last());else if(0===a.indexOf("<!--")?(f=a.indexOf("--",4),f>=0&&a.lastIndexOf("-->",f)===f&&(c.comment&&c.comment(a.substring(4,f)),a=a.substring(f+3),g=!1)):t.test(a)?(i=a.match(t),i&&(a=a.replace(i[0],""),g=!1)):r.test(a)?(i=a.match(o),i&&(a=a.substring(i[0].length),i[0].replace(o,e),g=!1)):q.test(a)&&(i=a.match(n),i&&(a=a.substring(i[0].length),i[0].replace(n,d),g=!1)),g){f=a.indexOf("<");var l=0>f?a:a.substring(0,f);a=0>f?"":a.substring(f),c.chars&&c.chars(h(l))}if(a==k)throw m("badparse","The sanitizer was unable to parse the following block of html: {0}",a);k=a}e()}function h(a){if(!a)return"";var b=I.exec(a),c=b[1],d=b[3],e=b[2];return e&&(H.innerHTML=e.replace(/</g,"&lt;"),e="textContent"in H?H.textContent:H.innerText),c+e+d}function i(a){return a.replace(/&/g,"&amp;").replace(v,function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1);return"&#"+(1024*(b-55296)+(c-56320)+65536)+";"}).replace(w,function(a){var b=a.charCodeAt(0);return 159>=b||173==b||b>=1536&&1540>=b||1807==b||6068==b||6069==b||b>=8204&&8207>=b||b>=8232&&8239>=b||b>=8288&&8303>=b||65279==b||b>=65520&&65535>=b?"&#"+b+";":a}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function j(a){var c="",d=a.split(";");return b.forEach(d,function(a){var d=a.split(":");if(2==d.length){var e=J(b.lowercase(d[0])),a=J(b.lowercase(d[1]));(("color"===e||"background-color"===e)&&(a.match(/^rgb\([0-9%,\. ]*\)$/i)||a.match(/^rgba\([0-9%,\. ]*\)$/i)||a.match(/^hsl\([0-9%,\. ]*\)$/i)||a.match(/^hsla\([0-9%,\. ]*\)$/i)||a.match(/^#[0-9a-f]{3,6}$/i)||a.match(/^[a-z]*$/i))||"text-align"===e&&("left"===a||"right"===a||"center"===a||"justify"===a)||"float"===e&&("left"===a||"right"===a||"none"===a)||("width"===e||"height"===e)&&a.match(/[0-9\.]*(px|em|rem|%)/))&&(c+=e+": "+a+";")}}),c}function k(a,b,c,d){return"img"===a&&b["ta-insert-video"]&&("ta-insert-video"===c||"allowfullscreen"===c||"frameborder"===c||"contenteditble"===c&&"false"===d)?!0:!1}function l(a,c){var d=!1,e=b.bind(a,a.push);return{start:function(a,f,g){a=b.lowercase(a),!d&&D[a]&&(d=a),d||E[a]!==!0||(e("<"),e(a),b.forEach(f,function(d,g){var h=b.lowercase(g),l="img"===a&&"src"===h||"background"===h;("style"===h&&""!==(d=j(d))||k(a,f,h,d)||G[h]===!0&&(F[h]!==!0||c(d,l)))&&(e(" "),e(g),e('="'),e(i(d)),e('"'))}),e(g?"/>":">"))},end:function(a){a=b.lowercase(a),d||E[a]!==!0||(e("</"),e(a),e(">")),a==d&&(d=!1)},chars:function(a){d||e(i(a))}}}var m=b.$$minErr("$sanitize"),n=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,o=/^<\s*\/\s*([\w:-]+)[^>]*>/,p=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,q=/^</,r=/^<\s*\//,s=/<!--(.*?)-->/g,t=/<!DOCTYPE([^>]*?)>/i,u=/<!\[CDATA\[(.*?)]]>/g,v=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,w=/([^\#-~| |!])/g,x=f("area,br,col,hr,img,wbr"),y=f("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),z=f("rp,rt"),A=b.extend({},z,y),B=b.extend({},y,f("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),C=b.extend({},z,f("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),D=f("script,style"),E=b.extend({},x,B,C,A),F=f("background,cite,href,longdesc,src,usemap"),G=b.extend({},F,f("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width")),H=document.createElement("pre"),I=/^(\s*)([\s\S]*?)(\s*)$/,J=function(){return String.prototype.trim?function(a){return b.isString(a)?a.trim():a}:function(a){return b.isString(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}();b.module("ngSanitize",[]).provider("$sanitize",d),b.module("ngSanitize").filter("linky",["$sanitize",function(a){var c=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>]/,d=/^mailto:/;return function(f,g){function h(a){a&&n.push(e(a))}function i(a,c){n.push("<a "),b.isDefined(g)&&(n.push('target="'),n.push(g),n.push('" ')),n.push('href="'),n.push(a),n.push('">'),h(c),n.push("</a>")}if(!f)return f;for(var j,k,l,m=f,n=[];j=m.match(c);)k=j[0],j[2]==j[3]&&(k="mailto:"+k),l=j.index,h(m.substr(0,l)),i(k,j[0].replace(d,"")),m=m.substring(l+j[0].length);return h(m),a(n.join(""))}}])}(window,window.angular),function(){"use strict";angular.module("WissenSystem").controller("ApplicationController",["$scope","USER_ROLES","AuthService","toastr","$state","$rootScope","Restangular","$filter","$timeout","MySocket",function(a,b,c,d,e,f,g,h,i,j){return a.isAuthorized=c.isAuthorized,a.hasRoleOrPerm=c.hasRoleOrPerm,a.USER_ROLES=b,a.isLoginPage=!1,a.navFull=!0,a.toggleNav=function(){return a.navFull=!a.navFull,f.navOffCanvas=!f.navOffCanvas,console.log("navOffCanvas: "+a.navOffCanvas),i(function(){return f.$broadcast("c3.resize")},260)},a.tema="theme-zero",a.cambiarTema=function(b){return a.tema=b},a.floatingSidebar=0,a.toggleFloatingSidebar=function(){return a.floatingSidebar=a.floatingSidebar?!1:!0},a.idiomas_del_sistema=function(){var b,c,d,e,f;for(a.idiomas_usados=h("idiomas_del_sistema")(a.idiomas),e=a.idiomas_usados,f=[],c=0,d=e.length;d>c;c++)b=e[c],"ES"===b.abrev?f.push(b.actual=!0):f.push(void 0);return f},a.idiomas=[],g.all("idiomas").getList().then(function(b){return a.idiomas=b,a.idiomas_del_sistema()},function(a){return console.log("No se trajeron los idiomas del sistema.",a)}),a.in_evento_actual={}}])}.call(this),function(){angular.module("WissenSystem").config(["$cookiesProvider","$stateProvider","$urlRouterProvider","$httpProvider","$locationProvider","App","PERMISSIONS","RestangularProvider","$intervalProvider","$rootScopeProvider","USER_ROLES","toastrConfig","uiSelectConfig","$provide",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return h.setBaseUrl(f.Server+"api/"),d.defaults.useXDomain=!0,delete d.defaults.headers.common["X-Requested-With"],d.defaults.headers.common.Accept="application/json",d.defaults.headers.common["Content-Type"]="application/json",m.theme="select2",m.resetSearchInput=!0,c.otherwise("/login"),b.state("main",{url:"/",views:{principal:{templateUrl:f.views+"main/main.tpl.html",controller:"MainCtrl"}},data:{pageTitle:"En Construcción"}}).state("landing",{url:"/landing",views:{principal:{templateUrl:f.views+"main/landing.tpl.html",controller:"LandingCtrl"}},data:{pageTitle:"Liceo Adventista Libertad"}}).state("login",{url:"/login",views:{principal:{templateUrl:""+f.views+"login/login.tpl.html",controller:"LoginCtrl"}},data:{pageTitle:"Ingresar a Wissen"}}).state("logout",{url:"/logout",views:{principal:{templateUrl:""+f.views+"login/logout.tpl.html",controller:"LogoutCtrl"}},data:{icon_fa:"fa fa-user"}}),j.bigLoader=!0,n.decorator("taOptions",["taRegisterTool","$delegate",function(a,b){return b.forceTextAngularSanitize=!1,b}]),_.mixin({findByValues:function(a,b,c){var d;return d=_.filter(a,function(a){return _.contains(c,a[b])}),0===d.length?!1:d[0]}}),this}]).filter("capitalize",function(){return function(a,b){return a?a.replace(/([^\W_]+[^\s-]*) */g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}):""}})}.call(this),function(){angular.module("WissenSystem").run(["$rootScope","cfpLoadingBar","$state","$stateParams","$translate","$cookies","Restangular","Perfil","AuthService","AUTH_EVENTS","toastr",function(a,b,c,d,e,f,g,h,i,j,k){var l;return a.examen_actual=[],a.$state=c,a.$stateParams=d,a.lastState=null,a.lastStateParam=null,a.$on("event:auth-loginRequired",function(a){return console.log("Acceso no permitido, vamos a loguear",a),c.transitionTo("login")}),l=function(){return null===a.lastState||"login"===a.lastState||"/"===a.lastState||"main"===a.lastState?c.go("panel"):c.transitionTo(a.lastState,a.lastStateParam)},a.$on("event:auth-loginConfirmed",function(){return console.log("Logueado con éxito!"),l()}),a.$on("$stateChangeStart",function(b,c,d,e,f){return null===a.lastState||"logout"!==c.name&&"login"!==c.name&&"main"!==c.name?(a.lastState=c.name,a.lastStateParam=d):void 0}),a.$on("$stateChangeSuccess",function(b,d,e,f,g){return a.pageTitle=c.current.name}),a.$on("$stateChangeError",function(b,d,e,f,g){return console.log(a.lastState,"-Evento fallido: ",b),k.warning("Lo sentimos, hubo un error o no puedes acceder a esta vista"),"panel"!==a.lastState?c.transitionTo("panel"):c.transitionTo("login")}),a.$on("$translatePartialLoaderStructureChanged",function(){return e.refresh(),console.log("Translate refrescado supuestamente.")}),a.$on(j.loginSuccess,function(){return l()}),a.$on(j.loginFailed,function(a){return k.error("Datos incorrecto.","No se pudo loguear"),console.log("Evento loginFailed: ",a)}),a.$on(j.notAuthenticated,function(a){return k.warning("No está autorizado.","Acceso exclusivo"),console.log("Evento notAuthenticated: ",a),c.transitionTo("login")}),a.$on(j.notAuthorized,function(b){return k.warning("No está autorizado para entrar a esta vista","Restringido"),c.go("panel"),console.log("Evento notAuthorized: ",b,a.lastState)})}])}.call(this),function(){"use strict";angular.module("WissenSystem").config(["$stateProvider","App","USER_ROLES","PERMISSIONS","$translateProvider",function(a,b,c,d,e){return e.translations("EN",{LOGIN_MSG:"Sign In to the panel"}).translations("ES",{LOGIN_MSG:"Ingresa al panel"})}])}.call(this),function(){"use strict";angular.module("WissenSystem").controller("LoginCtrl",["$scope","$state","$mdDialog","AUTH_EVENTS","AuthService","$stateParams","Restangular","$cookies","Perfil","App","cfpLoadingBar","toastr","MySocket","SocketData","$rootScope","$http",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){a.logoPath="images/MyVc-1.gif",a.imagesPath=j.images,a.modificando_servidor=!1,a.editando_nombre_punto=!1,a.dominio=localStorage.getItem("dominio"),a.MySocket=m,a.SocketData=n,a.usuarios_all=[],a.selectedUser={},a.in_evento_actual.qr="",a.in_evento_actual.nombre||g.one("welcome").customGET().then(function(b){return a.in_evento_actual=b,a.in_evento_actual.ip=localStorage.getItem("nombre_punto")?localStorage.getItem("nombre_punto"):a.in_evento_actual.ip,m.conectar(b.qr)},function(a){return l.warning("No se trae el evento principal")}),a.credentials={username:"",password:""},k.complete(),a.login=function(){var b;return b=e.login_credentials(a.credentials),b.then(function(a){},function(a){return console.log("Promise de login_credentials rechazada",a)})},a.mostrar_modificar_servidor=function(){return a.modificando_servidor=!a.modificando_servidor},a.guardar_servidor=function(){return localStorage.setItem("dominio",a.dominio),location.reload()},a.borrar_servidor=function(){return localStorage.removeItem("dominio")},a.editarNombrePunto=function(b){var d,e;return e={},e.target=document.getElementById("nombre_punto"),d=c.show({controller:"PasswordNombrePuntoCtrl",templateUrl:j.views+"login/password_nombre_punto.tpl.html",parent:angular.element(document.body),clickOutsideToClose:!0,fullscreen:!0,targetEvent:e}).then(function(b){return console.log(b),""!==b&&null!==b&&b===a.in_evento_actual.password?a.editando_nombre_punto=!0:l.warning("Contraseña incorrecta")},function(){return a.status="You didn't name your dog."})},a.seleccionarUsu=function(b){var c,d,e,f,g;if(b.seleccionado=!b.seleccionado,b.seleccionado){for(a.selectedUser=b,f=a.usuarios_all,g=[],d=0,e=f.length;e>d;d++)c=f[d],c.id!==b.id?g.push(c.seleccionado=!1):g.push(void 0);return g}},a.seleccionarCkUsu=function(b){var c,d,e,f,g;if(b.seleccionado){for(a.selectedUser=b,f=n.usuarios_all,g=[],d=0,e=f.length;e>d;d++)c=f[d],c.id!==b.id?g.push(c.seleccionado=!1):g.push(void 0);return g}},a.ingresar_seleccionado=function(){return a.selectedUser.id?g.one("qr/validar-usuario").customPUT({user_id:a.selectedUser.id,token_auth:n.token_auth}).then(function(a){return a.token?(h.put("xtoken",a.token),p.defaults.headers.common.Authorization="Bearer "+h.get("xtoken"),b.go("panel")):void 0},function(a){return l.warning("No se pudo ingresar"),console.log("No se pudo ingresar ",a)}):l.warning("Selecciona el usuario correspondiente")},a.guardarNombrePunto=function(){return localStorage.setItem("nombre_punto",a.in_evento_actual.ip),a.editando_nombre_punto=!1},o.$on("nombre_punto_cambiado",function(b,c){return localStorage.setItem("nombre_punto",c.nombre),a.in_evento_actual.ip=c.nombre})}]).controller("PasswordNombrePuntoCtrl",["$scope","$mdDialog","toastr",function(a,b,c){a.validar=function(a){return b.hide(a)},a.cancelar=function(){return b.cancel()}}])}.call(this),function(){"use strict";angular.module("WissenSystem").config(["$stateProvider","App","USER_ROLES","PERMISSIONS","$translateProvider",function(a,b,c,d,e){a.state("panel",{url:"/panel",views:{principal:{templateUrl:""+b.views+"panel/panel.tpl.html",controller:"PanelCtrl"}},resolve:{resolved_user:["AuthService",function(a){return a.verificar()}]},data:{pageTitle:"WissenSystem - Bienvenido"}}),e.preferredLanguage("ES"),e.translations("EN",{INICIO_MENU:"Home",USERS_MENU:"Users",EVENTS_MENU:"Events",ENTIDADES_MENU:"Entities",CATEGS_MENU:"Categories",PREGUNTAS_MENU:"Questions",EVALUACIONES_MENU:"Tests",IDIOMA_MENU:"Language",INFORMES_MENU:"Reports",CONTROL_MENU:"Monitoring",SCANNER_MENU:"QR Scanner",SALIR:"Sign out",ELIMINATORIAS:"Playoffs",GRAN_FINAL:"Great ultimate",INSCRITO_EN:"You are signed in:",NO_ESTAS_INSCRITO:"You are`t signed in any category.",EXAM_HECHOS:"Done Exams"}).translations("ES",{INICIO_MENU:"Inicio",EVENTS_MENU:"Eventos",ENTIDADES_MENU:"Entidades",CATEGS_MENU:"Categorías",PREGUNTAS_MENU:"Preguntas",EVALUACIONES_MENU:"Evaluaciones",USERS_MENU:"Usuarios",IDIOMA_MENU:"Idioma",INFORMES_MENU:"Informes",CONTROL_MENU:"Control",SCANNER_MENU:"Escaner QR",SALIR:"Salir",ELIMINATORIAS:"Eliminatorias",GRAN_FINAL:"Gran final",INSCRITO_EN:"Estás inscrito en:",NO_ESTAS_INSCRITO:"No estás inscrito en ninguna categoría.",EXAM_HECHOS:"Exámenes hechos"}).translations("PT",{INICIO_MENU:"Iniciação",EVENTS_MENU:"Eventos",ENTIDADES_MENU:"Entidades",CATEGS_MENU:"Categorias",PREGUNTAS_MENU:"Interrogatório",EVALUACIONES_MENU:"Evaluations",USERS_MENU:"Usuários",IDIOMA_MENU:"Língua",INFORMES_MENU:"Informação",CONTROL_MENU:"Controle",SCANNER_MENU:"QR Scanner",SALIR:"Deixar",ELIMINATORIAS:"Playoffs",GRAN_FINAL:"Grande final",INSCRITO_EN:"Você está matriculado:",NO_ESTAS_INSCRITO:"Você não está registrado em qualquer categoria.",EXAM_HECHOS:"Testes feitos"}).translations("FR",{INICIO_MENU:"Initiation",EVENTS_MENU:"Événements",ENTIDADES_MENU:"Entités",CATEGS_MENU:"Catégories",PREGUNTAS_MENU:"Questionnement",EVALUACIONES_MENU:"Evaluations",USERS_MENU:"Utilisateurs",IDIOMA_MENU:"Langue",INFORMES_MENU:"Rapports",CONTROL_MENU:"Contrôle",SCANNER_MENU:"QR Scanner",SALIR:"Laisser",ELIMINATORIAS:"Playoffs",GRAN_FINAL:"Grande finale",INSCRITO_EN:"Vous êtes inscrit à:",NO_ESTAS_INSCRITO:"Vous n'êtes pas inscrit dans aucune catégorie.",EXAM_HECHOS:"Tests effectués"})}])}.call(this),function(){"use strict";angular.module("WissenSystem").controller("PanelCtrl",["$scope","$http","Restangular","$state","$cookies","$rootScope","AuthService","Perfil","App","resolved_user","toastr","$translate","$filter","$uibModal","MySocket","Fullscreen",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){a.USER=j,a.imagesPath=i.images,g.verificar_acceso(),f.$on("$stateChangeSuccess",function(b,c,d,e,f){return a.cambiarTema("theme-zero")}),f.reload=function(){return d.go(d.current,$stateParams,{reload:!0})},a.setFullScreen=function(){return p.toggleAll()},a.openMenu=function(a,b){var c;return c=b,a(b)},a.cambiarIdioma=function(b){return c.one("idiomas/cambiar-idioma").customPUT({idioma_id:b.id}).then(function(c){var d,e,f,g;for(l.use(b.abrev),a.USER.idioma_main_id=b.id,a.idiomas_del_sistema(),g=a.idiomas_usados,e=0,f=g.length;f>e;e++)d=g[e],d.actual=d.abrev===b.abrev?!0:!1;return k.success("Idioma cambiado por "+b.abrev)},function(a){return console.log("No se pudo cambiar el idioma.",a)})},a.set_system_event=function(b){return c.one("eventos/set-evento-actual").customPUT({id:b.id}).then(function(c){return console.log("Evento cambiado: ",c),angular.forEach(a.USER.eventos,function(a,b){return a.actual=!1}),b.actual=!0,k.success("Evento actual cambiado por "+b.alias)},function(a){return console.log("Error conectando!",a),k.warning("No se pudo cambiar el evento actual.")})},a.evento_actual={},a.el_evento_actual=function(){if(a.USER){if(!g.isAuthorized("can_work_like_admin"))return a.evento_actual=a.USER.evento_actual;try{return a.evento_actual=m("filter")(a.USER.eventos,{id:a.USER.evento_selected_id})[0]}catch(b){return a.evento_actual={}}finally{f.$broadcast("cambia_evento_actual")}}},a.el_evento_actual(),a.set_user_event=function(b){return c.one("eventos/set-user-event").customPUT({evento_id:b.id}).then(function(c){return console.log("Evento cambiado: ",c),a.USER.evento_selected_id=b.id,a.el_evento_actual(),k.success("Evento actual cambiado por "+b.alias),f.$broadcast("cambio_evento_user")},function(a){return console.log("Error conectando!",a),k.warning("No se pudo cambiar el evento actual.")})},a.logout=function(){return o.unregister(),g.logout(),a.in_evento_actual={},c.one("login/logout").customPUT().then(function(a){return console.log("Desconectado con éxito: ",a)},function(a){return console.log("Error desconectando!",a)})},a.traerEventos=function(){return c.all("eventos").getList().then(function(b){return a.USER.eventos=b,a.el_evento_actual()},function(a){return console.log("No se trajeron los eventos.")})}}])}.call(this),function(){angular.module("WissenSystem").directive("chatContainerDir",["App",function(a){return{restrict:"E",templateUrl:""+a.views+"panel/chatContainerDir.tpl.html",scope:{eventoactual:"=",user:"="},controller:"ChatContainerCtrl"}}]).controller("ChatContainerCtrl",["$scope","Restangular","toastr","$filter","AuthService","$state","$uibModal","App","MySocket","$rootScope",function(a,b,c,d,e,f,g,h,i,j){return a.imagesPath=h.images,a.enviarMensaje=function(){return""!==a.newMensaje?(i.send_email(a.newMensaje),a.newMensaje=""):void 0},j.$on("llegaCorrespondencia",function(b,c){return a.mensajes=c.mensajes})}])}.call(this),function(){angular.module("WissenSystem").config(["App","$stateProvider","$translateProvider",function(a,b,c){return b.state("panel.eventos",{url:"^/eventos",views:{contenido_panel:{templateUrl:""+a.views+"eventos/eventos.tpl.html",controller:"EventosCtrl"},data:{pageTitle:"Eventos"}}}).state("panel.eventos_user",{url:"/eventos_user",templateUrl:"views/eventos/eventos_user.tpl.html",controller:"EventosUserCtrl"}),c.translations("EN",{EVENTS_TITLE:"Events",CREAR_EVENTO:"Create event"}).translations("ES",{EVENTS_TITLE:"Eventos"})}])}.call(this),function(){angular.module("WissenSystem").controller("EventosCtrl",["$scope","Restangular","$uibModal","$filter","App","toastr",function(a,b,c,d,e,f){return a.newEvent={with_pay:!1},a.currentEvent={idiomas_extras:[]},a.creando=!1,a.editando=!1,a.guardando_nuevo=!1,a.guardando_edit=!1,a.guardar_evento=function(){return a.guardando_nuevo=!0,b.one("eventos/store").customPOST(a.newEvent).then(function(b){return console.log("Evento guardado",b),b.idiomas_extras=a.newEvent.idiomas_extras,a.USER.eventos.push(b),a.guardando_nuevo=!1,a.creando=!1,f.success("Evento guardado con éxito.","Creado"),a.newEvent={with_pay:!1}},function(b){return console.log("No se pudo guardar el evento",b),f.warning("No se pudo crear evento.","Problema"),a.guardando_nuevo=!1}),a.el_evento_actual()},a.update_evento=function(){return a.guardando_edit=!0,b.one("eventos/update").customPUT(a.currentEvent).then(function(b){return console.log("Evento editado",b),a.guardando_edit=!1,f.success("Evento actualizado con éxito.")},function(b){return console.log("El Evento no se pudo editar",b),f.warning("No se pudo editar evento.","Problema"),a.guardando_edit=!1}),a.el_evento_actual()},a.crear_evento=function(){return a.editando=!1,a.creando=!0},a.cancelar_newevento=function(){return a.creando=!1},a.cancelar_currentEvento=function(){return a.editando=!1},a.editarEvento=function(b){return a.editando=!0,a.currentEvent=b,console.log("currentEvent",b)},a.quitandoIdiomas=function(c,d){var e;return console.log(c),e={evento_id:a.currentEvent.id,idioma_id:c.id},b.one("idiomas/destroy").customDELETE("",e).then(function(a){return f.success("Idioma quitado con éxito.","Eliminado")},function(a){return f.warning("No se pudo eliminar idioma.","Problema"),console.log("Error eliminando idioma: ",a)}),a.el_evento_actual()},a.idiomasSelect=function(c,d){var e;return console.log(c,a.currentEvent.idiomas_extras),e={evento_id:a.currentEvent.id,idioma_id:c.id},b.one("idiomas/store").customPOST(e).then(function(a){return f.success("Idioma agregado con éxito.","Añadido")},function(a){return f.warning("No se pudo agregar idioma.","Problema"),console.log("Error agregando idioma: ",a)}),a.el_evento_actual()},a.eliminarEvento=function(b){var f;return f=c.open({templateUrl:e.views+"eventos/removeEvento.tpl.html",controller:"RemoveEventoCtrl",resolve:{elemento:function(){return b}}}),f.result.then(function(b){return a.USER.eventos=d("filter")(a.USER.eventos,{id:"!"+b.id}),console.log("Resultado del modal: ",b)}),a.el_evento_actual()},a.traerEventos()}]).controller("RemoveEventoCtrl",["$scope","$uibModalInstance","elemento","Restangular","toastr",function(a,b,c,d,e){return a.elemento=c,a.ok=function(){return d.all("eventos/destroy").customDELETE(c.id).then(function(a){return e.success("Evento eliminado con éxito.","Eliminado"),b.close(c)},function(a){return e.warning("No se pudo eliminar al elemento.","Problema"),console.log("Error eliminando elemento: ",a),b.dismiss("cancel")})},a.cancel=function(){return b.dismiss("cancel")}}])}.call(this),function(){angular.module("WissenSystem").controller("EventosUserCtrl",["$scope","Restangular",function(a,b){}])}.call(this),function(){angular.module("WissenSystem").config(["App","$stateProvider","$translateProvider",function(a,b,c){return b.state("panel.entidades",{url:"^/entidades",views:{contenido_panel:{templateUrl:""+a.views+"entidades/entidades.tpl.html",controller:"EntidadesCtrl"}},data:{pageTitle:"Entidades"}}),c.translations("EN",{ENTIDADES_TITLE:"Entities"}).translations("ES",{ENTIDADES_TITLE:"Entidades"})}])}.call(this),function(){angular.module("WissenSystem").controller("EntidadesCtrl",["$scope","Restangular","uiGridConstants","App","$filter","$uibModal","toastr",function(a,b,c,d,e,f,g){var h,i;a.imgSystemPath=d.imgSystemPath,a.perfilPath=d.perfilPath,a.creando=!1,a.editando=!1,h='<a tooltip="Editar" tooltip-placement="left" class="btn btn-default btn-xs shiny icon-only info" ng-click="grid.appScope.editar(row.entity)"><i class="fa fa-edit "></i></a>',i='<a tooltip="X Eliminar" tooltip-placement="right" class="btn btn-default btn-xs shiny icon-only danger" ng-click="grid.appScope.eliminar(row.entity)"><i class="fa fa-trash "></i></a>',
a.gridOptions={showGridFooter:!0,enableSorting:!0,enableFiltering:!0,enebleGridColumnMenu:!1,columnDefs:[{field:"id",displayName:"Id",width:50,enableCellEdit:!1,enableColumnMenu:!1},{name:"edit",displayName:"Edit",width:70,enableSorting:!1,enableFiltering:!1,cellTemplate:h+i,enableCellEdit:!1,enableColumnMenu:!1},{field:"nombre",filter:{condition:c.filter.CONTAINS},enableHiding:!1},{field:"alias",width:70,filter:{condition:c.filter.CONTAINS},displayName:"Alias"},{field:"lider_nombre",displayName:"Lider",filter:{condition:c.filter.CONTAINS}}],multiSelect:!1,onRegisterApi:function(c){return a.gridApi=c,c.edit.on.afterCellEdit(a,function(c,d,e,f){return console.log("Fila editada, ",c," Column:",d," newValue:"+e+" oldValue:"+f),e!==f&&b.one("entidades/update",c.id).customPUT(c).then(function(b){return a.toastr.success("Entidad actualizada con éxito","Actualizado")},function(b){return a.toastr.error("Cambio no guardado","Error"),console.log("Falló al intentar guardar: ",b)}),a.$apply()})}},b.all("entidades").getList().then(function(b){return a.gridOptions.data=b}),b.all("imagenes").getList().then(function(b){return a.imagenes=b}),a.editar=function(b){return a.creando=!1,a.editando=!0,a.currentEntidad=b},a.eliminar=function(b){var c;return c=f.open({templateUrl:d.views+"eventos/removeEvento.tpl.html",controller:"RemoveEntidadCtrl",resolve:{elemento:function(){return b}}}),c.result.then(function(b){return a.gridOptions.data=e("filter")(a.gridOptions.data,{id:"!"+b.id}),console.log("Resultado del modal: ",b)})},a.crearNuevo=function(){return a.creando=!0,a.editando=!1},a.cancelarNuevo=function(){return a.creando=!1,a.guardando=!1},a.cancelarEdit=function(){return a.editando=!1},a.guardando=!1,a.guardar_nuevo=function(){return a.guardando=!0,b.one("entidades/store").customPOST(a.newEntidad).then(function(b){return console.log("Entidad guardado",b),a.gridOptions.data.push(b),a.guardando=!1,a.creando=!1,g.success("Entidad guardada con éxito.","Creado"),a.newEntidad={nombre:"",lider_nombre:""}},function(b){return console.log("No se pudo guardar el entidad",b),g.warning("No se pudo crear entidad.","Problema"),a.guardando=!1})},a.guardando_cambios=!1,a.guardar_cambios=function(){return a.guardando_cambios=!0,console.log(a.currentEntidad.imgUsuario),a.currentEntidad.logo_id=a.currentEntidad.imgUsuario.id,b.one("entidades/update").customPUT(a.currentEntidad).then(function(b){return a.guardando_cambios=!1,a.editando=!1,g.success("Entidad guardada con éxito.","Creado"),a.newEntidad={nombre:"",lider_nombre:""}},function(b){return console.log("No se pudo guardar entidad",b),g.warning("No se pudo crear entidad.","Problema"),a.guardando_cambios=!1})}}]).controller("RemoveEntidadCtrl",["$scope","$uibModalInstance","elemento","Restangular","toastr",function(a,b,c,d,e){return a.elemento=c,a.ok=function(){return d.all("entidades/destroy").customDELETE(c.id).then(function(a){return e.success("Entidad eliminada con éxito.","Eliminado"),b.close(c)},function(a){return e.warning("No se pudo eliminar elemento.","Problema"),console.log("Error eliminando elemento: ",a),b.dismiss("cancel")})},a.cancel=function(){return b.dismiss("cancel")}}])}.call(this),function(){angular.module("WissenSystem").config(["App","$stateProvider","$translateProvider",function(a,b,c){return b.state("panel.evaluaciones",{url:"^/evaluaciones",views:{contenido_panel:{templateUrl:""+a.views+"evaluaciones/evaluaciones.tpl.html",controller:"EvaluacionesCtrl"}},data:{pageTitle:"Evaluaciones"}}),c.translations("EN",{ENTIDADES_TITLE:"Tests"}).translations("ES",{ENTIDADES_TITLE:"Evaluaciones"})}])}.call(this),function(){angular.module("WissenSystem").controller("EvaluacionesCtrl",["$scope","Restangular","App","toastr",function(a,b,c,d){a.comprobar_evento_actual=function(){return a.evento_actual?a.evento_actual.idioma_principal_id?a.idioma={selected:a.evento_actual.idioma_principal_id}:void 0:d.warning("Pimero debes crear o seleccionar un evento actual")},a.comprobar_evento_actual(),a.$on("cambio_evento_user",function(){return a.comprobar_evento_actual()}),a.$on("cambia_evento_actual",function(){return a.comprobar_evento_actual()}),a.imgSystemPath=c.imgSystemPath,a.perfilPath=c.perfilPath,a.creando=!1,a.editando=!1,a.newEvaluacion={},a.currentEvalua={},a.categorias_king=[],b.all("categorias/categorias-usuario").getList().then(function(b){return a.categorias_king=b}),a.crearNuevo=function(){return a.creando=!0},a.cancelarNuevo=function(){return a.creando=!1},a.cancelarEdit=function(){return a.editando=!1},a.guardando=!1,a.guardarNuevo=function(){return a.guardando=!0,b.one("evaluaciones/store").customPOST(a.newEvaluacion).then(function(b){return a.evaluaciones.push(b),console.log(a.evaluaciones),a.guardando=!1,a.creando=!1,d.success("Evaluación guardada con éxito"),console.log("Evaluación guardada con éxito",b)},function(b){return d.warning("Evaluación guardada con éxito"),a.guardando=!1,console.log("No se pudo guardar la evaluación",b)})}}])}.call(this),function(){angular.module("WissenSystem").directive("gridEvaluaciones",["App",function(a){return{restrict:"E",templateUrl:""+a.views+"evaluaciones/gridEvaluacionesDir.tpl.html",scope:{currenteval:"=",evaluaciones:"=",categoriasking:"=",idioma:"="},link:function(a,b,c){},controller:"GridEvaluacionesCtrl"}}])}.call(this),function(){angular.module("WissenSystem").controller("GridEvaluacionesCtrl",["$scope","Restangular","uiGridConstants","$uibModal","$filter","App","toastr",function(a,b,c,d,e,f,g){var h,i,j,k;h='<a tooltip="Editar" tooltip-placement="left" class="btn btn-xs btn-info" ng-click="grid.appScope.editar(row.entity)"><i class="fa fa-edit "></i></a>',i='<a tooltip="X Eliminar" tooltip-placement="right" class="btn btn-xs btn-danger" ng-click="grid.appScope.eliminar(row.entity)"><i class="fa fa-trash "></i></a>',k='<span ng-bind="row.entity.categoria_id | nombreCategoria:grid.appScope.categoriasking:grid.appScope.idioma"></span>',j='<md-checkbox ng-true-value="1" ng-false-value="0" ng-model="row.entity.actual" ng-change="grid.appScope.setActual(row.entity)" aria-label="Actual" ng-disable="row.entity.actualizando" style="margin-top: 0px;">Actual</md-checkbox>',a.gridOptions={showGridFooter:!0,enableSorting:!0,enableFiltering:!0,enebleGridColumnMenu:!1,columnDefs:[{field:"id",displayName:"Id",width:60,enableCellEdit:!1,enableColumnMenu:!1},{name:"edit",displayName:"Edit",width:80,enableSorting:!1,enableFiltering:!1,cellTemplate:h+i,enableCellEdit:!1,enableColumnMenu:!1},{field:"descripcion",displayName:"Descripción",filter:{condition:c.filter.CONTAINS},enableHiding:!1},{field:"categoria_id",displayName:"Categoría",filter:{condition:c.filter.CONTAINS},cellTemplate:k,enableCellEdit:!1},{field:"actual",displayName:"Actual",width:90,filter:{condition:c.filter.CONTAINS},cellTemplate:j,enableCellEdit:!1}],multiSelect:!1,onRegisterApi:function(c){return a.gridApi=c,c.edit.on.afterCellEdit(a,function(c,d,e,f){return console.log("Fila editada, ",c," Column:",d," newValue:"+e+" oldValue:"+f),e!==f&&b.one("evaluaciones/update").customPUT(c).then(function(a){return g.success("Evaluaciones actualizada con éxito","Actualizado")},function(a){return g.error("Cambio no guardado","Error"),console.log("Falló al intentar guardar: ",a)}),a.$apply()})}},b.all("evaluaciones").getList().then(function(b){return a.evaluaciones=b,a.gridOptions.data=a.evaluaciones}),a.setActual=function(c){return c.actualizando=!0,console.log(c),b.one("evaluaciones/set-actual").customPUT(c).then(function(b){var d,f,h,i,j;for(g.success("Actualizado con éxito","Actualizado"),c.actualizando=!1,d=e("filter")(a.evaluaciones,{categoria_id:c.categoria_id}),j=[],h=0,i=d.length;i>h;h++)f=d[h],f.id!==c.id?j.push(f.actual=0):j.push(void 0);return j},function(a){return g.warning("No se cambió como actual o no"),console.log("No estableció como actual o no",a),c.actualizando=!1})},a.editar=function(b){return a.$parent.creando=!1,a.$parent.editando=!0,a.$parent.currentEvaluacion=b},a.eliminar=function(b){var c;return c=d.open({templateUrl:f.views+"evaluaciones/removeEvaluacion.tpl.html",controller:"RemoveEvaluacionCtrl",resolve:{elemento:function(){return b},categoriasking:function(){return a.categoriasking}}}),c.result.then(function(b){return a.evaluaciones=e("filter")(a.evaluaciones,{id:"!"+b.id}),console.log("Resultado del modal: ",b)})}}]).controller("RemoveEvaluacionCtrl",["$scope","$uibModalInstance","elemento","categoriasking","Restangular","toastr",function(a,b,c,d,e,f){return a.elemento=c,a.categoriasking=d,console.log("elemento",c,d),a.ok=function(){return e.all("evaluaciones/destroy").customDELETE(c.id).then(function(a){return f.success("Evaluacion eliminada con éxito.","Eliminado"),b.close(c)},function(a){return f.warning("No se pudo eliminar evaluación.","Problema"),console.log("Error eliminando elemento: ",a),b.dismiss("Error")})},a.cancel=function(){return b.dismiss("cancel")}}])}.call(this),function(){angular.module("WissenSystem").config(["$stateProvider","App","$translateProvider",function(a,b,c){return a.state("panel.preguntas",{url:"^/preguntas",views:{contenido_panel:{templateUrl:""+b.views+"preguntas/preguntas.tpl.html",controller:"PreguntasCtrl"}},data:{pageTitle:"Preguntas"}}),c.translations("EN",{BUSCAR_PLACEHOLDER:"Find",TIP_BTN_NUEVA_PREGUNTA:"Create a new question",BTN_NUEVA_PREGUNTA:"New question"}).translations("ES",{BUSCAR_PLACEHOLDER:"Buscar",TIP_BTN_NUEVA_PREGUNTA:"Crear una nueva pregunta",BTN_NUEVA_PREGUNTA:"Nueva pregunta"})}])}.call(this),function(){"use strict";angular.module("WissenSystem").controller("PreguntasCtrl",["$scope","$http","Restangular","$state","$cookies","$rootScope","toastr","preguntasServ","$filter",function(a,b,c,d,e,f,g,h,i){return a.myModel="",a.preguntas_king=[],a.evalu_seleccionada={id:-1},a.grupo="grupo",a.king="king",a.comprobar_evento_actual=function(){return a.evento_actual?a.evento_actual.idioma_principal_id?a.idiomaPreg={selected:a.evento_actual.idioma_principal_id}:void 0:g.warning("Pimero debes crear o seleccionar un evento actual")},a.comprobar_evento_actual(),a.$on("cambio_evento_user",function(){return a.comprobar_evento_actual()}),a.$on("cambia_evento_actual",function(){return a.comprobar_evento_actual()}),a.creando=!1,a.inicializado=!1,a.showDetail=!1,a.categoria=0,a.evaluacion_id=0,a.preguntas_king=[],a.preguntas_king2=[],a.categorias=[],a.traerDatos=function(){return c.all("categorias/categorias-usuario").getList().then(function(b){return a.categorias=b,a.categorias.length>0?(a.categoria=b[0].id,a.traerEvaluaciones(),a.traerPreguntas()):void 0},function(a){return console.log("No se trajeron las categorías ",a)})},a.traerDatos(),a.traerEvaluaciones=function(){return c.all("evaluaciones").getList({categoria_id:a.categoria}).then(function(b){return a.evaluaciones=b},function(a){return console.log("No se trajeron las evaluaciones ",a)})},a.traerPreguntas=function(){return c.all("preguntas").getList({categoria_id:a.categoria}).then(function(b){return a.preguntas_king=b,a.preguntas_king2=b,a.inicializado=!0,console.log("$scope.inicializado",a.inicializado)},function(b){return console.log("Pailas la promesa de las preguntas ",b),a.inicializado=!0})},a.traerPreguntasYEvaluaciones=function(){return a.traerPreguntas(),a.traerEvaluaciones()},a.traerPreguntasDeEvaluacion=function(){var b;return"sin_asignar"===a.evaluacion_id?c.all("pregunta_evaluacion/solo-sin-asignar").getList({categoria_id:a.categoria}).then(function(b){return a.preguntas_king=b},function(b){return console.log("No se trajo las preguntas sin asignar ",b),a.inicializado=!0}):(a.traerPreguntas(),b=i("filter")(a.evaluaciones,{id:a.evaluacion_id}),b.length>0&&(a.preguntas_evaluacion=b[0].preguntas_evaluacion),console.log("$scope.evaluacion",a.evaluacion_id,a.preguntas_evaluacion))},a.selectEvaluacion=function(b,c){var d,e,f,g,h;for(a.evalu_seleccionada=b,h=a.evaluaciones,f=0,g=h.length;g>f;f++)d=h[f],d.selected=!1;return b.selected=!0,e=i("filter")(a.evaluaciones,{id:b.id}),e.length>0?a.preguntas_evaluacion2=e[0].preguntas_evaluacion:void 0},a.$on("finalizaEdicionPreg",function(a){}),a.$on("preguntaEliminada",function(b,c){return a.preguntas_king=i("filter")(a.preguntas_king,{id:"!"+c.id,tipo_pregunta:"!undefined"},!0),console.log("Recibido eliminación",c,i("filter")(a.preguntas_king,{id:"!"+c.id,tipo_pregunta:"!undefined"}))}),a.$on("preguntaQuitada",function(b,c){return a.preguntas_evaluacion2=i("filter")(a.preguntas_evaluacion2,{id:"!"+c}),console.log("Recibido quitada",c)}),a.$on("grupoEliminado",function(b,c){return a.preguntas_king=i("filter")(a.preguntas_king,function(a,b){return a.tipo_pregunta?!0:a.id!==c.id?!0:!1})})}]).filter("pregsByCatsAndEvaluacion",["$filter",function(a){return function(b,c,d,e){var f,g,h,i,j;for(h=[],i=0,j=b.length;j>i;i++)g=b[i],parseFloat(g.categoria_id)===parseFloat(c)&&(e&&0!==parseFloat(e)?(f=!1,f=g.tipo_pregunta?a("filter")(d,{pregunta_id:g.id}):a("filter")(d,{grupo_pregs_id:g.id}),f&&f.length>0&&(g.pregunta_eval_id=f[0].id,g.orden=f[0].orden,h.push(g))):h.push(g));return h}}])}.call(this),function(){angular.module("WissenSystem").controller("EditPreguntaCtrl",["$scope","$http","Restangular","$state","$cookies","$rootScope","toastr",function(a,b,c,d,e,f,g){a.eventoactualselec=parseInt(a.eventoactualselec),a.idiomaPreg=[a.eventoactualselec],a.editorOptions={inlineMode:!0,placeholder:""},a.mostrarConfiguracion=!1,a.mostrarConfig=function(){return a.mostrarConfiguracion=!a.mostrarConfiguracion},a.cerrarEdicion=function(){return a.preguntaking.editando=!1},a.finalizarEdicion=function(){return a.$emit("finalizaEdicionPreg"),c.one("preguntas/update").customPUT(a.preguntaking).then(function(b){return console.log("Cambios guardados",b),a.preguntaking.editando=!1,g.success("Cambios guardados con éxito")},function(a){return console.log("No se pudo guardar los cambios",a),g.warning("Cambios NO guardados","Problema")}),console.log("Guardando cambios...")},a.aplicarCambios=function(){return c.one("preguntas/update").customPUT(a.preguntaking).then(function(a){return console.log("Cambios guardados",a),g.success("Cambios guardados con éxito")},function(a){return console.log("No se pudo guardar los cambios",a),g.warning("Cambios NO guardados","Problema")}),console.log("Guardando cambios...")},a.cambiaTipoPregunta=function(){return console.log("Cambia el tipo: ",a.preguntaking.tipo_pregunta),a.$broadcast("cambiaTipoPregunta")}}])}.call(this),function(){angular.module("WissenSystem").directive("editPregunta",["App",function(a){return{restrict:"E",templateUrl:""+a.views+"preguntas/editPreguntaDir.tpl.html",scope:{preguntaking:"=",eventoactual:"=",eventoactualselec:"@"},link:function(a,b,c){},controller:"EditPreguntaCtrl"}}])}.call(this),function(){angular.module("WissenSystem").directive("editPregTraducDir",["App",function(a){return{restrict:"E",templateUrl:""+a.views+"preguntas/editPregTraducDir.tpl.html",scope:{preguntatraduc:"=",preguntaking:"=",eventoactual:"="},link:function(a,b,c){},controller:"EditPregTraducDirCtrl"}}])}.call(this),function(){angular.module("WissenSystem").controller("EditPregTraducDirCtrl",["$scope","$http","Restangular","$state","$cookies","$rootScope","toastr","$filter",function(a,b,c,d,e,f,g,h){var i;return i="Agregar nueva opción",a.inicializar=function(){var b,c,d,e,f;for(f=a.preguntatraduc.opciones,d=0,e=f.length;e>d;d++)if(c=f[d],c.nueva)return;return b={id:-1,definicion:i,nueva:!0,is_correct:!1},a.preguntatraduc.opciones.push(b)},a.inicializar(),a.sortableOptions={"ui-floating":!0,update:function(b,d){var e,f,g,h,i,j,k,l;for(i=[],l=a.preguntatraduc.opciones,g=j=0,k=l.length;k>j;g=++j)h=l[g],-1!==h.id&&(f={},f[""+h.id]=g,i.push(f));return e={pregunta_traduc_id:a.preguntatraduc.id,sortHash:i},c.one("opciones/update-orden").customPUT(e).then(function(a){return console.log("Orden guardado")},function(a){return console.log("No se pudo guardar el orden",a)})}},a.addButtonNewOpcion=function(a,b){return b.creando=!0,b.nueva?(b.definicion="Opción "+a.opciones.length,b.preg_traduc_id=a.id,b.orden=a.opciones.length-1,1===a.opciones.length&&(b.is_correct=!0),c.one("opciones/store").customPOST(b).then(function(c){var d;return console.log("Opción guardada"),b.id=c.id,b.nueva=!1,b.creando=!1,d={id:-1,definicion:i,nueva:!0,is_correct:!1},a.opciones.push(d)},function(a){return console.log("No se pudo guardar la opción",a),b.definicion=i,b.creando=!1,g.warning("No se pudo crear nueva opción")})):void 0},a.setAsCorrect=function(b,c){return"Test"===a.preguntaking.tipo_pregunta&&(angular.forEach(b.opciones,function(a){return a.is_correct=0}),c.is_correct=1),"Multiple"===a.preguntaking.tipo_pregunta?c.is_correct=1:void 0},a.deleteOption=function(a,b,d){return c.one("opciones/destroy",b.id).customDELETE().then(function(c){return console.log("Opción eliminada",c),a.opciones=h("filter")(a.opciones,{id:"!"+b.id})},function(a){return console.log("No se pudo eliminar la opción",a),g.warning("No se pudo eliminar la opción")})},a.$on("cambiaTipoPregunta",function(){var b,c,d,e,f,g,h;if("Test"===a.preguntaking.tipo_pregunta){for(g=a.preguntaking.preguntas_traducidas,h=[],e=0,f=g.length;f>e;e++)d=g[e],b=0,h.push(function(){var a,e,f,g;for(f=d.opciones,g=[],a=0,e=f.length;e>a;a++)c=f[a],c.is_correct?b>0?g.push(c.is_correct=0):g.push(b+=1):g.push(void 0);return g}());return h}})}])}.call(this),function(){angular.module("WissenSystem").controller("ViewPreguntaCtrl",["$scope","App","Restangular","$state","$cookies","$rootScope","$mdToast","$uibModal","$filter",function(a,b,c,d,e,f,g,h,i){return a.elegirOpcion=function(a,b){return angular.forEach(a.opciones,function(a){return a.elegida=!1}),b.elegida=!0},a.toggleMostrarAyuda=function(a){return a.mostrar_ayuda=!a.mostrar_ayuda},a.asignarAEvaluacion=function(c){var d;return d=h.open({templateUrl:b.views+"preguntas/asignarPregunta.tpl.html",controller:"AsignarPreguntaCtrl",resolve:{pregunta:function(){return c},evaluaciones:function(){return a.evaluaciones}}}),d.result.then(function(a){return console.log("Resultado del modal: ",a)})},a.indexChar=function(a){return String.fromCharCode(65+a)},a.editarPregunta=function(a){return a.editando=!0},a.eliminarPregunta=function(c){var d;return console.log("Presionado para eliminar fila: ",c),d=h.open({templateUrl:b.views+"preguntas/removePregunta.tpl.html",controller:"RemovePreguntaCtrl",resolve:{pregunta:function(){return c}}}),d.result.then(function(b){return a.$emit("preguntaEliminada",b),console.log("Resultado del modal: ",b)})},a.previewPregunta=function(a){return a.showDetail===!0?a.showDetail=!1:a.showDetail=!0}}]).controller("RemovePreguntaCtrl",["$scope","$uibModalInstance","pregunta","Restangular","toastr",function(a,b,c,d,e){return a.pregunta=c,a.ok=function(){return d.all("preguntas/destroy/"+c.id).remove().then(function(a){return e.success("Pregunta eliminada con éxito.","Eliminada")},function(a){return e.warning("No se pudo eliminar la pregunta.","Problema"),console.log("Error eliminando pregunta: ",a)}),b.close(c)},a.cancel=function(){return b.dismiss("cancel")}}]).controller("AsignarPreguntaCtrl",["$scope","$uibModalInstance","pregunta","evaluaciones","Restangular","toastr","$filter",function(a,b,c,d,e,f,g){return a.pregunta=c,a.evaluaciones=d,a.asignando=!1,a.selected=!1,a.ok=function(){var h;return a.asignando=!0,h={pregunta_id:c.id,evaluacion_id:a.selected},e.all("pregunta_evaluacion/asignar-pregunta").customPUT(h).then(function(c){var e;return f.success("Pregunta asignada con éxito."),a.asignando=!1,e=g("filter")(d,{id:a.selected})[0],e.preguntas_evaluacion.push(c),b.close(c)},function(b){return f.warning("No se pudo asignar la pregunta.","Problema"),console.log("Error asignando pregunta: ",b),a.asignando=!1})},a.cancel=function(){return b.dismiss("cancel")}}])}.call(this),function(){angular.module("WissenSystem").controller("ViewPreguntaEvalCtrl",["$scope","App","Restangular","$state","$cookies","$rootScope","$mdToast","$uibModal","$filter","toastr",function(a,b,c,d,e,f,g,h,i,j){return a.indexChar=function(a){return String.fromCharCode(65+a)},a.quitarPregunta=function(b){var d;return console.log("Aqui quito la preg",b.pregunta_eval_id,a.preguntasevaluacion2),a.quitando=!0,d={pregunta_id:b.id,evaluacion_id:a.selected,pregunta_eval_id:b.pregunta_eval_id},c.all("pregunta_evaluacion/quitar-pregunta").customPUT(d).then(function(c){return j.success("Pregunta quitada con éxito."),a.quitando=!1,a.$emit("preguntaQuitada",b.pregunta_eval_id)},function(b){return j.warning("No se pudo asignar la pregunta.","Problema"),console.log("Error asignando pregunta: ",b),a.quitando=!1})}}])}.call(this),function(){angular.module("WissenSystem").directive("viewPregunta",["App",function(a){return{restrict:"E",templateUrl:""+a.views+"preguntas/viewPreguntaDir.tpl.html",scope:{idiomapreg:"=",preguntaking:"=",indice:"=",eventoactual:"=",eventoactualselec:"=",evaluaciones:"="},link:function(a,b,c){},controller:"ViewPreguntaCtrl"}}]).directive("viewPreguntaEval",["App",function(a){return{restrict:"E",templateUrl:""+a.views+"preguntas/viewPreguntaEvalDir.tpl.html",scope:{idiomapreg:"=",preguntaking:"=",indice:"=",eventoactual:"=",eventoactualselec:"=",evaluaciones:"=",preguntasevaluacion2:"="},link:function(a,b,c){},controller:"ViewPreguntaEvalCtrl"}}])}.call(this),function(){angular.module("WissenSystem").controller("AddPreguntaCtrl",["$scope","$http","Restangular","$state","$cookies","$rootScope","$mdToast","toastr",function(a,b,c,d,e,f,g,h){return console.log("Add pregunta dir"),a.creando=!1,a.addNewPregunta=function(){return a.creando=!0,c.one("preguntas/store").customPOST({categoria_id:a.categoria}).then(function(b){return b.editando=!0,a.creando=!1,a.preguntasking.push(b),console.log("Pregunta añadida: ",a.preguntasking)},function(b){return console.log("Rechazada la nueva ",b),a.creando=!1,h.warning("No se creó pregunta","Problema")})},a.addNewPreguntaGrupo=function(){return a.creando=!0,c.one("grupo_preguntas/store").customPOST({categoria_id:a.categoria}).then(function(b){return b.editando=!0,a.creando=!1,a.preguntasking.push(b),console.log("Pregunta añadida: ",a.preguntasking)},function(b){return console.log("Rechazada la nueva ",b),a.creando=!1,h.warning("No se creó el grupo pregunta","Problema")})}}])}.call(this),function(){angular.module("WissenSystem").directive("addPregunta",["App",function(a){return{restrict:"E",templateUrl:""+a.views+"preguntas/addPreguntaDir.tpl.html",scope:{preguntasking:"=",categoria:"=",examen:"=",tipo:"="},link:function(a,b,c){},controller:"AddPreguntaCtrl"}}])}.call(this),function(){angular.module("WissenSystem").directive("viewGrupo",["App",function(a){return{restrict:"E",templateUrl:""+a.views+"grupopreg/viewGrupoDir.tpl.html",scope:{idiomapreg:"=",grupoking:"=",indice:"=",eventoactual:"=",idiomaactualselec:"=",evaluaciones:"="},link:function(a,b,c){},controller:"ViewGrupoCtrl"}}]).directive("viewGrupoEval",["App",function(a){return{restrict:"E",templateUrl:""+a.views+"grupopreg/viewGrupoEvalDir.tpl.html",scope:{idiomapreg:"=",grupoking:"=",indice:"=",eventoactual:"=",idiomaactualselec:"=",evaluaciones:"=",preguntasevaluacion2:"="},link:function(a,b,c){},controller:"ViewGrupoEvalCtrl"}}])}.call(this),function(){angular.module("WissenSystem").controller("ViewGrupoCtrl",["$scope","App","Restangular","$state","$cookies","$rootScope","toastr","$uibModal","$filter",function(a,b,c,d,e,f,g,h,i){"$scope.idiomaactualselec = parseInt($scope.idiomaactualselec)\n$scope.idiomaPreg = $scope.idiomaactualselec";return a.creando=!1,a.addNewPregunta=function(b){return a.creando=!0,c.one("preguntas_agrupadas/store").customPOST({contenido_id:b.id}).then(function(c){return c.editando=!0,a.creando=!1,b.preguntas_agrupadas.push(c),console.log("Pregunta añadida: ",b)},function(b){return console.log("Rechazada la nueva ",b),a.creando=!1,g.warning("No se creó pregunta","Problema")})},a.asignarAEvaluacion=function(c){var d;return d=h.open({templateUrl:b.views+"grupopreg/asignarGrupo.tpl.html",controller:"AsignarGrupoCtrl",resolve:{pregunta:function(){return c},evaluaciones:function(){return a.evaluaciones}}}),d.result.then(function(a){return console.log("Resultado del modal: ",a)})},a.toggleMostrarAyuda=function(a){return a.mostrar_ayuda=!a.mostrar_ayuda},a.indexChar=function(a){return String.fromCharCode(65+a)},a.editarGrupo=function(a){return a.editando=!0},a.eliminarContenido=function(c){var d;return d=h.open({templateUrl:b.views+"grupopreg/removeGrupo.tpl.html",controller:"RemoveGrupoCtrl",resolve:{grupoking:function(){return c}}}),d.result.then(function(b){return a.$emit("grupoEliminado",b),console.log("Resultado del modal: ",b)})},a.editarPreguntaAgrup=function(a){return a.editando=!0},a.eliminarPreguntaAgrup=function(c,d){var e;return e=h.open({templateUrl:b.views+"grupopreg/removePreguntaAgrup.tpl.html",controller:"RemovePreguntaAgrupCtrl",resolve:{preg_agrup:function(){return c}}}),e.result.then(function(b){return a.$emit("pregAgrupEliminada",b),console.log("Resultado del modal: ",c.id,i("filter")(d.preguntas_agrupadas,{id:"!"+c.id})),d.preguntas_agrupadas=i("filter")(d.preguntas_agrupadas,{id:"!"+c.id})})},a.previewPreguntaAgrup=function(a){return a.showDetail=!a.showDetail}}]).controller("RemoveGrupoCtrl",["$scope","$uibModalInstance","grupoking","Restangular","toastr",function(a,b,c,d,e){return a.grupoking=c,a.ok=function(){return d.all("grupo_preguntas/destroy/"+c.id).remove().then(function(a){return e.success("Pregunta eliminada con éxito.","Eliminada")},function(a){return e.warning("No se pudo eliminar la grupoking.","Problema"),console.log("Error eliminando grupoking: ",a)}),b.close(c)},a.cancel=function(){return b.dismiss("cancel")}}]).controller("RemovePreguntaAgrupCtrl",["$scope","$uibModalInstance","preg_agrup","Restangular","toastr",function(a,b,c,d,e){return a.preg_agrup=c,a.ok=function(){return d.all("preguntas_agrupadas/destroy/"+c.id).remove().then(function(a){return e.success("Pregunta eliminada con éxito.","Eliminada")},function(a){return e.warning("No se pudo eliminar la preg_agrup.","Problema"),console.log("Error eliminando preg_agrup: ",a)}),b.close(c)},a.cancel=function(){return b.dismiss("cancel")}}]).controller("AsignarGrupoCtrl",["$scope","$uibModalInstance","pregunta","evaluaciones","Restangular","toastr","$filter",function(a,b,c,d,e,f,g){return a.pregunta=c,a.evaluaciones=d,a.asignando=!1,a.selected=!1,a.ok=function(){var h;return a.asignando=!0,h={grupo_pregs_id:c.id,evaluacion_id:a.selected},e.all("pregunta_evaluacion/asignar-grupo").customPUT(h).then(function(c){var e;return f.success("Grupo asignado con éxito."),a.asignando=!1,e=g("filter")(d,{id:a.selected})[0],e.preguntas_evaluacion.push(c),b.close(c)},function(b){return f.warning("No se pudo asignar el grupo.","Problema"),console.log("Error asignando el grupo: ",b),a.asignando=!1})},a.cancel=function(){return b.dismiss("cancel")}}])}.call(this),function(){angular.module("WissenSystem").controller("ViewGrupoEvalCtrl",["$scope","App","Restangular","$state","$cookies","$rootScope","toastr","$uibModal","$filter",function(a,b,c,d,e,f,g,h,i){return a.quitando=!1,a.quitarPregunta=function(b){var d,e;return a.quitando=!0,e=i("filter")(a.preguntasevaluacion2,{grupo_pregs_id:b.id})[0],d={pregunta_id:b.id,evaluacion_id:e.evaluacion_id,pregunta_eval_id:b.pregunta_eval_id},c.all("pregunta_evaluacion/quitar-pregunta").customPUT(d).then(function(c){return g.success("Pregunta quitada con éxito."),a.quitando=!1,a.$emit("preguntaQuitada",b.pregunta_eval_id)},function(b){return g.warning("No se pudo quitar la pregunta grupo.","Problema"),console.log("Error quitando pregunta: ",b),a.quitando=!1})}}])}.call(this),function(){angular.module("WissenSystem").directive("editContenido",["App",function(a){return{restrict:"E",templateUrl:""+a.views+"grupopreg/editContenidoDir.tpl.html",scope:{grupoking:"=",indice:"=",eventoactual:"=",idiomaactualselec:"="},link:function(a,b,c){},controller:"EditContenidoCtrl"}}])}.call(this),function(){angular.module("WissenSystem").controller("EditContenidoCtrl",["$scope","$http","Restangular","$state","$cookies","$rootScope","toastr",function(a,b,c,d,e,f,g){a.idiomaactualselec=parseInt(a.idiomaactualselec),a.idiomaPreg=[a.idiomaactualselec],a.editorOptions={inlineMode:!0,placeholder:""},a.cerrarEdicion=function(){return a.grupoking.editando=!1},a.finalizarEdicion=function(){var b;return a.$emit("finalizaEdicionContenido"),b={contenidos_traducidos:a.grupoking.contenidos_traducidos},c.one("contenido_traduc/update").customPUT(b).then(function(b){return console.log("Cambios guardados",b),a.grupoking.editando=!1,g.success("Cambios guardados con éxito")},function(a){return console.log("No se pudo guardar los cambios",a),g.warning("Cambios NO guardados","Problema")}),console.log("Guardando cambios...")},a.aplicarCambios=function(){var b;return b={contenidos_traducidos:a.grupoking.contenidos_traducidos},c.one("contenido_traduc/update").customPUT(b).then(function(a){return console.log("Cambios guardados",a),g.success("Cambios guardados con éxito")},function(a){return console.log("No se pudo guardar los cambios",a),g.warning("Cambios NO guardados","Problema")}),console.log("Guardando cambios...")}}])}.call(this),function(){angular.module("WissenSystem").directive("editPreguntaAgrupada",["App",function(a){return{restrict:"E",templateUrl:""+a.views+"grupopreg/editPreguntaAgrupDir.tpl.html",scope:{pregagrup:"="},link:function(a,b,c){},controller:"EditPreguntaAgrupCtrl"}}])}.call(this),function(){angular.module("WissenSystem").controller("EditPreguntaAgrupCtrl",["$scope","$http","Restangular","$state","$cookies","$rootScope","toastr",function(a,b,c,d,e,f,g){var h;a.editorOptions={inlineMode:!0,placeholder:""},h="Agregar nueva opción",a.inicializar=function(){var b,c,d,e,f;for(f=a.pregagrup.opciones,d=0,e=f.length;e>d;d++)if(c=f[d],c.nueva)return;return b={id:-1,definicion:h,nueva:!0,is_correct:!1},a.pregagrup.opciones.push(b)},a.inicializar(),a.sortableOptions={"ui-floating":!0,update:function(b,d){var e,f,g,h,i,j,k,l;for(i=[],l=a.pregagrup.opciones,g=j=0,k=l.length;k>j;g=++j)h=l[g],-1!==h.id&&(f={},f[""+h.id]=g,i.push(f));return e={pregunta_agrupada_id:a.pregagrup.id,sortHash:i},c.one("opciones_agrupadas/update-orden").customPUT(e).then(function(a){return console.log("Orden guardado")},function(a){return console.log("No se pudo guardar el orden",a)})}},a.addButtonNewOpcion=function(a,b){return b.creando=!0,b.nueva?(b.definicion="Opción "+a.opciones.length,b.preg_agrupada_id=a.id,b.orden=a.opciones.length-1,1===a.opciones.length&&(b.is_correct=!0),c.one("opciones_agrupadas/store").customPOST(b).then(function(c){var d;return console.log("Opción guardada"),b.id=c.id,b.nueva=!1,b.creando=!1,d={id:-1,definicion:h,nueva:!0,is_correct:!1},a.opciones.push(d)},function(a){return console.log("No se pudo guardar la opción",a),b.definicion=h,b.creando=!1,g.warning("No se pudo crear nueva opción")})):void 0},a.setAsCorrect=function(b,c){return"Test"===a.pregagrup.tipo_pregunta&&(angular.forEach(b.opciones,function(a){return a.is_correct=0}),c.is_correct=1),"Multiple"===a.pregagrup.tipo_pregunta?c.is_correct=1:void 0},a.deleteOption=function(a,b,d){return c.one("opciones_agrupadas/destroy",b.id).customDELETE().then(function(c){return console.log("Opción eliminada",c),a.opciones=$filter("filter")(a.opciones,{id:"!"+b.id})},function(a){return console.log("No se pudo eliminar la opción",a),g.warning("No se pudo eliminar la opción")})},a.cerrarEdicion=function(){return a.pregagrup.editando=!1},a.mostrarConfiguracion=!1,a.mostrarConfig=function(){return a.mostrarConfiguracion=!a.mostrarConfiguracion},a.finalizarEdicion=function(){return a.$emit("finalizaEdicionPregAgrup"),c.one("preguntas_agrupadas/update").customPUT(a.pregagrup).then(function(b){return console.log("Cambios guardados",b),a.pregagrup.editando=!1,g.success("Cambios guardados con éxito")},function(a){return console.log("No se pudo guardar los cambios",a),g.warning("Cambios NO guardados","Problema")}),console.log("Guardando cambios...")},a.aplicarCambios=function(){return c.one("preguntas_agrupadas/update").customPUT(a.pregagrup).then(function(a){
return console.log("Cambios guardados",a),g.success("Cambios guardados con éxito")},function(a){return console.log("No se pudo guardar los cambios",a),g.warning("Cambios NO guardados","Problema")}),console.log("Guardando cambios...")},a.cambiaTipoPregunta=function(){var b,c,d,e,f,g;if(console.log("Cambia el tipo: ",a.pregagrup.tipo_pregunta),"Test"===a.pregagrup.tipo_pregunta){for(b=0,f=a.pregagrup.opciones,g=[],d=0,e=f.length;e>d;d++)c=f[d],c.is_correct?b>0?g.push(c.is_correct=0):g.push(b+=1):g.push(void 0);return g}}}])}.call(this),function(){angular.module("WissenSystem").directive("iniciarDir",["App",function(a){return{restrict:"E",templateUrl:""+a.views+"examen_respuesta/iniciarDir.tpl.html",scope:{eventoactual:"=",user:"="},link:function(a,b,c){},controller:"IniciarCtrl"}}])}.call(this),function(){angular.module("WissenSystem").controller("IniciarCtrl",["$scope","Restangular","toastr","$filter","AuthService","$state","$uibModal","App","SocketData","MySocket","Perfil","$rootScope",function(a,b,c,d,e,f,g,h,i,j,k,l){return a.$state=f,a.categorias_king=[],a.examenes_puntajes=[],a.hasRoleOrPerm=e.hasRoleOrPerm,a.traer_categorias_evento=function(){return b.all("categorias/categorias-evento").getList().then(function(b){return a.categorias_king=b,a.mi_cliente=i.cliente(k.getResourceId()),a.user.categsel=a.mi_cliente.categsel},function(a){return c.warning("No se trajeron las categorias del evento","Problema"),console.log("No se trajo categorias ",a)}),b.all("informes/mis-examenes").getList().then(function(b){return a.examenes_puntajes=b},function(a){return c.warning("No se trajeron los resultados","Problema"),console.log("No se trajo resultados ",a)})},e.hasRoleOrPerm(["admin","profesor","tecnico"])?a.$parent.traerEventos():a.traer_categorias_evento(),a.iniciarExamen=function(b){var c,e,f,i,k;if(a.eventoactual.gran_final){for(e=d("categsInscritasDeUsuario")(a.user,a.categorias_king,a.user.idioma_main_id),i=0,k=e.length;k>i;i++)c=e[i],c.selected=!1;return b.selected=!0,j.change_my_categ_selected(b.categoria_id)}return f=g.open({templateUrl:h.views+"examen_respuesta/seguroIniciarCtrl.tpl.html",controller:"SeguroIniciarCtrl",resolve:{inscripcion:function(){return b},entidades:function(){return a.$parent.entidades}}}),f.result.then(function(a){return console.log("Resultado del modal: ",a)})},a.categoriaSelect=function(){var b;return a.mi_cliente=i.cliente(k.getResourceId()),b=d("categSelectedDeUsuario")(a.mi_cliente.usuario,a.categorias_king,a.user.idioma_main_id,a.mi_cliente.categsel),b.length>0?b[0]:{}},a.iniciarProyeccion=function(){return f.go("proyectando")},l.$on("empezar_examen",function(){var d,e,g,h,i;for(e={categoria_id:a.user.categsel},i=a.user.inscripciones,g=0,h=i.length;h>g;g++)d=i[g],d.categoria_id===a.user.categsel&&(e.inscripcion_id=d.id);return b.all("examenes_respuesta/iniciar").customPOST(e).then(function(a){return l.examen_actual=a,f.transitionTo("panel.examen_respuesta")},function(a){return c.warning("No se pudo iniciar el examen.","Problema"),console.log("Error creando el examen: ",a)})})}])}.call(this),function(){angular.module("WissenSystem").controller("SeguroIniciarCtrl",["$scope","$uibModalInstance","inscripcion","Restangular","toastr","$filter","$state","$rootScope",function(a,b,c,d,e,f,g,h){return a.inscripcion=c,a.ok=function(){return a.asignando=!0,d.all("examenes_respuesta/iniciar").customPOST(c).then(function(a){return h.examen_actual=a,g.transitionTo("panel.examen_respuesta"),b.close(a)},function(a){return e.warning("No se pudo iniciar el examen.","Problema"),console.log("Error creando el examen: ",a)})},a.cancel=function(){return b.dismiss("cancel")}}])}.call(this),function(){"use strict";angular.module("WissenSystem").config(["$stateProvider","App","USER_ROLES","PERMISSIONS","$translateProvider",function(a,b,c,d,e){a.state("panel.examen_respuesta",{url:"^/examen/:examen_respuesta_id",params:{examen_respuesta_id:{value:null}},views:{contenido_panel:{templateUrl:""+b.views+"examen_respuesta/examenRespuesta.tpl.html",controller:"ExamenRespuestaCtrl"}},resolve:{resolved_user:["AuthService",function(a){return a.verificar()}]},data:{pageTitle:"Examen"}}),e.translations("EN",{INICIO_MENU:"Home"}).translations("ES",{INICIO_MENU:"Inicio"})}])}.call(this),function(){angular.module("WissenSystem").controller("ExamenRespuestaCtrl",["$scope","Restangular","toastr","$filter","AuthService","$state","$uibModal","App","$rootScope","resolved_user","$interval","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l){var m;return a.USER=j,a.imagesPath=h.images,a.pregunta_actual=0,a.pregunta_actual_porc=0,a.total_preguntas=0,a.cambiarTema("theme-one"),a.waiting_question=!1,e.verificar_acceso(),a.incializar=function(){return i.examen_actual?i.examen_actual.id||(console.log("Examen no válido",i.examen_actual),f.transitionTo("panel")):(console.log("No hay examen actual"),f.transitionTo("panel")),a.$on("$destroy",function(){return console.log("En destrucción!"),window.onbeforeunload=void 0}),a.categoria_traducida=d("categoriasTraducidas")([i.examen_actual.categoria],a.USER.idioma_main_id),a.categoria_traducida.length>0&&(a.categoria_traducida=a.categoria_traducida[0]),a.examen_actual=i.examen_actual,a.$on("respuesta_elegida",function(b,c){return a.USER.evento_actual.gran_final&&(a.waiting_question=!0),l(function(){return a.pregunta_actual=d("noPregActual")(a.examen_actual.preguntas),a.pregunta_actual_porc=a.pregunta_actual/a.total_preguntas*100,a.check_por_terminado()},500)}),a.$on("tiempo_preg_terminado",function(a){return console.log("Tiempo pregunta terminado")}),a.$on("tiempo_exam_terminado",function(a){return console.log("Tiempo examen terminado"),f.go("panel")}),i.$on("next_question",function(b){return a.waiting_question=!1}),i.$on("prev_question",function(b){return a.waiting_question=!1}),a.tiempo_max=a.USER.evento_actual.gran_final?i.examen_actual.duracion_preg:60*i.examen_actual.duracion_exam,a.pregunta_actual=d("noPregActual")(a.examen_actual.preguntas),a.total_preguntas=d("cantPregsEvaluacion")(a.examen_actual.preguntas),a.pregunta_actual_porc=a.pregunta_actual/a.total_preguntas*100,console.log("no Preg Actual ",a.pregunta_actual,"de",a.total_preguntas,a.pregunta_actual_porc)},f.params.examen_respuesta_id?(m={exa_resp_id:f.params.examen_respuesta_id},b.all("examenes_respuesta/continuar").customPUT(m).then(function(b){var d;return i.examen_actual=b,d=a.check_por_terminado(),d?void 0:(c.success("Continuamos el examen."),a.incializar())},function(a){return c.warning("No se pudo continuar el examen.","Problema"),console.log("Error continuando el examen: ",a)})):a.incializar(),a.check_por_terminado=function(){var b;return b=d("preguntaActual")(a.examen_actual.preguntas),1===b.length&&b[0].terminado?(console.log("Todas las respuestas contestadas",b),c.success("Examen terminado"),f.go("panel"),!0):!1},a.finalizar_examen=function(){return console.log("Finalizar examen")}}])}.call(this),function(){angular.module("WissenSystem").controller("ViewPreguntaExamenCtrl",["$scope","Restangular","toastr","$filter","$rootScope","$state","$uibModal","App",function(a,b,c,d,e,f,g,h){return a.USER=a.$parent.USER,a.idioma=a.USER.idioma_main_id,a.examen_actual=e.examen_actual,a.elegirOpcion=function(b,c,d){var e;return angular.forEach(b.opciones,function(a){return a.elegida=!1}),c.elegida=!0,a.examen_actual.one_by_one?(c.letra=a.indexChar(d),e=g.open({templateUrl:h.views+"examen_respuesta/seguroRespuesta.tpl.html",controller:"SeguroRespuestaPregKingCtrl",resolve:{preguntatop:function(){return a.preguntaking},pregunta_traduc:function(){return b},opcion:function(){return c},examen_actual:function(){return a.examen_actual},agrupada:function(){return!1}}}),e.result.then(function(b){return c.respondida=!0,a.$emit("respuesta_elegida",d)})):void 0},a.toggleMostrarAyuda=function(a){return a.mostrar_ayuda=!a.mostrar_ayuda},a.indexChar=function(a){return String.fromCharCode(65+a)}}]).directive("viewPreguntaExamen",["App",function(a){return{restrict:"E",templateUrl:""+a.views+"examen_respuesta/viewPreguntaExamenDir.tpl.html",scope:{preguntaking:"=",indice:"=",idiomapreg:"="},link:function(a,b,c){},controller:"ViewPreguntaExamenCtrl"}}]).controller("SeguroRespuestaPregKingCtrl",["$scope","$uibModalInstance","opcion","Restangular","toastr","$filter","examen_actual","preguntatop","pregunta_traduc","agrupada","$rootScope",function(a,b,c,d,e,f,g,h,i,j,k){var l;return a.opcion=c,a.examen_actual=g,l={examen_actual_id:g.id,pregunta_top_id:h.id,pregunta_sub_id:i.id,idioma_id:i.idioma_id,tipo_pregunta:h.tipo_pregunta,opcion_id:c.id,tiempo:k.tiempo},a.ok=function(){var a,c,f;return c="examenes_respuesta/responder-pregunta",a="examenes_respuesta/responder-pregunta-agrupada",f=j?a:c,d.all(f).customPUT(l).then(function(a){return b.close(a)},function(a){return e.warning("No se pudo guardar respuesta.","Problema"),console.log("No se pudo guardar respuesta: ",a)})},a.cancel=function(){return b.dismiss("cancel")}}])}.call(this),function(){angular.module("WissenSystem").controller("ViewGrupoExamenCtrl",["$scope","Restangular","toastr","$filter","$rootScope","$state","$uibModal","App",function(a,b,c,d,e,f,g,h){return a.USER=a.$parent.USER,a.idioma=a.USER.idioma_main_id,a.examen_actual=e.examen_actual,a.elegirOpcion=function(b,d,e){var f;return angular.forEach(b.opciones,function(a){return a.elegida=!1}),d.elegida=!0,a.examen_actual.one_by_one?(d.letra=a.indexChar(e),f=g.open({templateUrl:h.views+"examen_respuesta/seguroRespuesta.tpl.html",controller:"SeguroRespuestaPregKingCtrl",resolve:{preguntatop:function(){return a.grupoking},pregunta_traduc:function(){return b},opcion:function(){return d},examen_actual:function(){return a.examen_actual},agrupada:function(){return!0}}}),f.result.then(function(b){return d.respondida=!0,a.$emit("respuesta_elegida",e),c.success("Respuestuesta guardada")})):void 0},a.indexChar=function(a){return String.fromCharCode(65+a)},a.toggleMostrarAyuda=function(a){return a.mostrar_ayuda=!a.mostrar_ayuda}}]).directive("viewGrupoExamen",["App",function(a){return{restrict:"E",templateUrl:""+a.views+"examen_respuesta/viewGrupoExamenDir.tpl.html",scope:{grupoking:"=",indice:"=",idiomapreg:"="},link:function(a,b,c){},controller:"ViewGrupoExamenCtrl"}}])}.call(this),function(){angular.module("WissenSystem").directive("timerDir",["App",function(a){return{restrict:"E",templateUrl:""+a.views+"examen_respuesta/timerDir.tpl.html",scope:{tiempomax:"="},controller:"TimerCtrl"}}]).controller("TimerCtrl",["$scope","Restangular","toastr","$filter","$state","$rootScope","$interval","Perfil",function(a,b,c,d,e,f,g,h){return f.tiempo=0,a.tiempo=f.tiempo,a.start=function(){return a.promise=g(function(){var b,c,d;if(f.tiempo++,a.tiempo=f.tiempo,c=new Date(1e3*f.tiempo),d=c.getSeconds(),b=c.getMinutes(),d=10>d?"0"+d:d,b=10>b?"0"+b:b,a.tiempo_formateado=b+":"+d,a.$parent.USER.evento_actual.gran_final){if(f.examen_actual.duracion_preg<a.tiempo)return a.stop(),a.$emit("tiempo_preg_terminado")}else if(console.log("No gran final",f.examen_actual.duracion_exam,a.tiempo,f.examen_actual.duracion_exam<a.tiempo),60*f.examen_actual.duracion_exam<a.tiempo)return a.stop(),a.$emit("tiempo_exam_terminado")},1e3,0)},a.start(),a.stop=function(){return g.cancel(a.promise)}}])}.call(this),function(){angular.module("WissenSystem").config(["$stateProvider","App","PERMISSIONS",function(a,b,c){return a.state("panel.usuarios",{url:"^/usuarios",views:{contenido_panel:{templateUrl:""+b.views+"usuarios/usuarios.tpl.html",controller:"UsuariosCtrl"}},data:{pageTitle:"Usuarios",needed_permissions:[c.can_edit_usuarios]}})}])}.call(this),function(){angular.module("WissenSystem").controller("UsuariosCtrl",["$scope","$http","Restangular","$state","$cookies","$rootScope","toastr","uiGridConstants","$uibModal","$filter","App","AuthService",function(a,b,c,d,e,f,g,h,i,j,k,l){l.verificar_acceso(),a.imagesPath=k.images,a.usuarios=[],a.currentUsers=[],a.currentUser={inscripciones:[]},a.newUsu={sexo:"M",nivel:"",inscripciones:[]},a.editando=!1,a.creando=!1,a.comprobar_evento_actual=function(){return a.evento_actual?a.evento_actual.idioma_principal_id?a.idiomaPreg={selected:a.evento_actual.idioma_principal_id}:void 0:g.warning("Pimero debes crear o seleccionar un evento actual")},a.comprobar_evento_actual(),a.$on("cambio_evento_user",function(){return a.comprobar_evento_actual(),a.traer_niveles(),a.traer_entidades(),a.traer_categorias()}),a.$on("cambia_evento_actual",function(){return a.comprobar_evento_actual()}),a.niveles_king=[],a.traer_niveles=function(){return c.all("niveles/niveles-usuario").getList().then(function(b){return a.niveles_king=b},function(a){return g.warning("No se trajeron las niveles","Problema"),console.log("No se trajo niveles ",a)})},a.traer_niveles(),a.entidades=[],a.traer_entidades=function(){return c.all("entidades").getList().then(function(b){return a.entidades=b},function(a){return g.warning("No se trajeron las entidades","Problema"),console.log("No se trajo entidades ",a)})},a.traer_entidades(),a.categorias_king1=[],a.categorias_king2=[],a.traer_categorias=function(){return c.all("categorias/categorias-usuario").getList().then(function(b){return a.categorias_king1=b,angular.copy(a.categorias_king1,a.categorias_king2)},function(a){return g.warning("No se trajeron las categorias","Problema"),console.log("No se trajo categorias ",a)})},a.traer_categorias(),a.avatar={masculino:{abrev:"M",def:"Masculino",img:a.imagesPath+"perfil/system/avatars/male1.jpg"},femenino:{abrev:"F",def:"Femenino",img:a.imagesPath+"perfil/system/avatars/female1.jpg"}},a.guardando=!1,a.guardarNuevo=function(){return a.guardando=!0,c.one("usuarios/store").customPOST(a.newUsu).then(function(b){return g.success("Usuario guardado con éxito."),a.usuarios.push(b),a.guardando=!1,console.log("Usuario creado",b)},function(b){return g.warning("No se creó el usuario","Problema"),console.log("No se creó usuario ",b),a.guardando=!1})},a.guardando_edicion=!1,a.guardarEdicion=function(){return a.guardando_edicion=!0,c.one("usuarios/update").customPUT(a.currentUser).then(function(b){return g.success("Cambios guardados."),a.guardando_edicion=!1,console.log("Cambios guardados",b)},function(b){return g.warning("No se guardó cambios del usuario","Problema"),console.log("No se guardó cambios del usuario ",b),a.guardando_edicion=!1})},a.checkeandoCategorias=function(a,b){return b.indexOf(a)>-1},a.toggle=function(a,b){var c;return c=b.indexOf(a),c>-1?b.splice(c,1):b.push(a)},a.checkeandoCategoriasEdit=function(a,b){return b.indexOf(a)>-1},a.toggleEdit=function(a,b){var c;return c=b.indexOf(a),c>-1?b.splice(c,1):b.push(a)},a.cancelarNuevo=function(){return a.creando=!1},a.cancelarEdicion=function(){return a.editando=!1},a.cambiaInscripcion=function(a,b){var d,e;return d=b[0],a.cambiando=!0,e={usuario_id:d.id,categoria_id:a.categoria_id},a.selected?c.one("inscripciones/inscribir").customPUT(e).then(function(b){var c;return a.cambiando=!1,console.log("Inscripción creada",b),c=j("filter")(d.inscripciones,{categoria_id:e.categoria_id}),0===c.length?d.inscripciones.push(b[0]):(c[0].id=b[0].id,c[0].deleted_at=b[0].deleted_at)},function(b){return g.warning("No se inscribó el usuario","Problema"),console.log("No se inscribó el usuario ",b),a.cambiando=!1,a.selected=!1}):c.one("inscripciones/desinscribir").customPUT(e).then(function(b){return a.cambiando=!1,console.log("Inscripción creada",b),d.inscripciones=j("filter")(d.inscripciones,{categoria_id:"!"+e.categoria_id})},function(b){return g.warning("No se quitó inscripción","Problema"),console.log("No se quitó inscripción ",b),a.cambiando=!1,a.selected=!0})}}])}.call(this),function(){angular.module("WissenSystem").directive("gridUsuarios",["App",function(a){return{restrict:"E",templateUrl:""+a.views+"usuarios/gridUsuariosDir.tpl.html",scope:{usuarios:"=",categoriasking:"=",currentusers:"=",nivelesking:"=",idioma:"="},link:function(a,b,c){},controller:"GridUsuariosCtrl"}}])}.call(this),function(){angular.module("WissenSystem").controller("GridUsuariosCtrl",["$scope","$http","Restangular","$state","$cookies","$interval","toastr","uiGridConstants","$uibModal","$filter","App",function(a,b,c,d,e,f,g,h,i,j,k){var l,m,n,o,p;a.currentusers=[],a.currentuser={},a.seleccionar_fila=function(b){return a.gridApi.selection.clearSelectedRows(),a.gridApi.selection.selectRow(b),a.currentuser=b},a.seleccionar_entidad=function(b){var c;return console.log("Presionado para cambiar entidad: ",b),c=i.open({templateUrl:k.views+"usuarios/cambiarEntidadUsuario.tpl.html",controller:"SelectEntidadCtrl",resolve:{usuario:function(){return b},entidades:function(){return a.$parent.entidades}}}),c.result.then(function(a){return b.entidad_id=a,console.log("Resultado del modal: ",a)})},a.editando=!1,a.editar=function(b){return a.gridApi.selection.clearSelectedRows(),a.gridApi.selection.selectRow(b),a.$parent.currentUser=b,a.currentusers=[b],a.$parent.editando=!0},a.eliminar=function(b){var c;return a.gridApi.selection.clearSelectedRows(),a.gridApi.selection.selectRow(b),c=i.open({templateUrl:k.views+"usuarios/removeUsuario.tpl.html",controller:"RemoveUsuarioCtrl",resolve:{usuario:function(){return b},entidades:function(){return a.$parent.entidades}}}),c.result.then(function(b){return a.usuarios=j("filter")(a.usuarios,{id:"!"+b.id}),console.log("Resultado del modal: ",b)})},a.verRoles=function(a){var b;return b=i.open({templateUrl:k.views+"usuarios/verRoles.tpl.html",controller:"VerRolesCtrl",resolve:{usuario:function(){return a},roles:function(){return c.all("roles").getList().then(function(a){return a},function(a){return g.warning("No pudo traer los roles","Problema"),console.log("No pudo traer los roles ",a)})}}}),b.result.then(function(a){return console.log("Resultado del modal: ",a)})},l='<a tooltip="Editar" tooltip-placement="left" class="btn btn-default btn-xs " ng-click="grid.appScope.editar(row.entity)"><i class="fa fa-edit "></i></a>',m='<a tooltip="X Eliminar" tooltip-placement="right" class="btn btn-xs btn-danger" ng-click="grid.appScope.eliminar(row.entity)"><i class="fa fa-trash "></i></a> ',n='<a tooltip="Seleccionar" tooltip-placement="right" class="btn btn-xs btn-info" ng-click="grid.appScope.seleccionar_fila(row.entity)"><i class="fa fa-check "></i></a>',o='<a tooltip="{{row.entity.entidad_id | nombreEntidad:grid.appScope.$parent.entidades:false}}" tooltip-placement="left" class="btn btn-xs shiny btn-info" ng-click="grid.appScope.seleccionar_entidad(row.entity)" ng-bind="row.entity.entidad_id | nombreEntidad:grid.appScope.$parent.entidades:true"></a>',p='<a tooltip="Modificar roles" tooltip-placement="left" class="btn btn-xs btn-info" ng-click="grid.appScope.verRoles(row.entity)"><span ng-repeat="rol in row.entity.roles">{{rol.display_name}}-</span></a>',a.gridOptions={showGridFooter:!0,enableSorting:!0,enableFiltering:!0,selectedItems:a.currentusers,multiSelect:!0,enableRowSelection:!0,enableSelectAll:!0,columnDefs:[{field:"id",displayName:"Id",width:60,enableCellEdit:!1,enableColumnMenu:!1},{name:"edicion",displayName:"Edición",width:100,enableSorting:!1,enableFiltering:!1,cellTemplate:l+m+n,enableCellEdit:!1,enableColumnMenu:!1},{field:"nombres",filter:{condition:h.filter.CONTAINS},enableHiding:!1},{field:"apellidos",filter:{condition:h.filter.CONTAINS}},{field:"sexo",width:60},{field:"username",filter:{condition:h.filter.CONTAINS},displayName:"Usuario"},{field:"entidad_id",displayName:"Entidad",cellTemplate:o,enableCellEdit:!1,filter:{condition:function(b,c){var d,e,f,g;return d=a.$parent.entidades,g=b.toLowerCase(),e=j("nombreEntidad")(c,d,!0),e=e.toLowerCase(),f=j("nombreEntidad")(c,d),f=f.toLowerCase(),-1!==e.indexOf(g)||-1!==f.indexOf(g)}}},{field:"roles",displayName:"Roles",cellTemplate:p,enableCellEdit:!1}],onRegisterApi:function(b){return a.gridApi=b,b.selection.on.rowSelectionChanged(a,function(c){return a.currentusers=b.selection.getSelectedRows()}),b.selection.on.rowSelectionChangedBatch(a,function(c){return a.currentusers=b.selection.getSelectedRows()}),b.edit.on.afterCellEdit(a,function(b,d,e,f){return console.log("Fila editada, ",b," Column:",d," newValue:"+e+" oldValue:"+f),e!==f&&c.one("usuarios/update",b.id).customPUT(b).then(function(a){return g.success("Usuario actualizado con éxito","Actualizado")},function(a){return g.error("Cambio no guardado","Error"),console.log("Falló al intentar guardar: ",a)}),a.$apply()})}},c.all("usuarios").getList().then(function(b){return a.usuarios=b,a.gridOptions.data=a.usuarios}),a.cambiaInscripcion=function(a,b){var d,e,f,h;for(a.cambiando=!0,e={usuarios:[],categoria_id:a.categoria_id},f=0,h=b.length;h>f;f++)d=b[f],e.usuarios.push({user_id:d.id});return a.selected?c.one("inscripciones/inscribir-varios").customPUT(e).then(function(c){var e,f,g,h,i,k;for(g=0,i=b.length;i>g;g++)for(d=b[g],h=0,k=c.length;k>h;h++)f=c[h],f.user_id===d.id&&(e=j("filter")(d.inscripciones,{categoria_id:f.categoria_id}),0===e.length?d.inscripciones.push(f):(e[0].id=f.id,e[0].deleted_at=f.deleted_at));return a.cambiando=!1,console.log("Usuarios inscritos: ",b)},function(b){return g.warning("No se inscribó el usuario","Problema"),console.log("No se inscribó el usuario ",b),a.cambiando=!1,a.selected=!1}):c.one("inscripciones/desinscribir-varios").customPUT(e).then(function(c){var d,e,f,g;for(a.cambiando=!1,g=[],e=0,f=b.length;f>e;e++)d=b[e],g.push(d.inscripciones=j("filter")(d.inscripciones,{categoria_id:"!"+a.categoria_id}));return g},function(b){return g.warning("No se quitó inscripción","Problema"),console.log("No se quitó inscripción ",b),a.cambiando=!1,a.selected=!0})}}]).controller("RemoveUsuarioCtrl",["$scope","$uibModalInstance","usuario","entidades","Restangular","toastr",function(a,b,c,d,e,f){return a.usuario=c,a.entidades=d,console.log("elemento",c,d),a.ok=function(){return e.all("usuarios/destroy").customDELETE(c.id).then(function(a){return f.success("Usuario eliminado con éxito.","Eliminado"),b.close(c)},function(a){return f.warning("No se pudo eliminar al usuario.","Problema"),console.log("Error eliminando usuario: ",a),b.dismiss("Error")})},a.cancel=function(){return b.dismiss("cancel")}}]).controller("SelectEntidadCtrl",["$scope","$uibModalInstance","usuario","entidades","Restangular","toastr","$filter",function(a,b,c,d,e,f,g){return a.usuario=c,a.entidades=d,a.entidades_extras=g("filter")(d,{id:"!"+c.entidad_id}),console.log("elementos",c,d),a.seleccionar=function(c){var d;return d={user_id:a.usuario.id,entidad_id:c.id},e.all("usuarios/cambiar-entidad").customPUT(d).then(function(a){return f.success("Entidad cambiada con éxito.",c.alias),b.close(c.id)},function(a){return f.warning("No se pudo cambiar entidad.","Problema"),console.log("Error cambiando elemento: ",a),b.dismiss("Error")})},a.cancel=function(){return b.dismiss("cancel")}}]).controller("VerRolesCtrl",["$scope","$uibModalInstance","usuario","roles","Restangular","toastr",function(a,b,c,d,e,f){return a.usuario=c,a.roles=d,a.datos={selecteds:[]},a.datos.selecteds=c.roles,a.seleccionando=function(b,d){var g;return g={user_id:c.id,role_id:b.id},console.log(a.datos.selecteds,b),e.one("roles/add-role-to-user").customPUT(g).then(function(a){return f.success("Rol agregado con éxito.")},function(a){return f.warning("No se pudo agregar el rol al usuario.","Problema"),console.log("No se pudo agregar el rol al usuario.: ",a)})},a.quitando=function(a,b){return console.log(a,b),e.one("roles/remove-role-to-user").customPUT({role_id:a.id,user_id:c.id}).then(function(a){return f.success("Rol quitado con éxito.")},function(a){return f.warning("No se pudo quitar el rol al usuario.","Problema"),console.log("No se pudo quitar el rol al usuario.: ",a)})},a.ok=function(){return c.roles=a.datos.selecteds,b.close(c)},a.cancel=function(){return b.dismiss("cancel")}}])}.call(this),function(){angular.module("WissenSystem").config(["App","$stateProvider","$translateProvider",function(a,b,c){return b.state("panel.control",{url:"^/control",views:{contenido_panel:{templateUrl:""+a.views+"control/control.tpl.html",controller:"ControlCtrl"},data:{pageTitle:"Control"}}}).state("panel.crearservidor",{url:"^/crearservidor",views:{contenido_panel:{templateUrl:""+a.views+"control/crear_servidor.tpl.html",controller:"CrearServidorCtrl"},data:{pageTitle:"Creando Chat Server"}}}),c.translations("EN",{CATEGORIAS_TITLE:"Categs",NIVELES_TITLE:"Levels",DISCIPLINA_TITLE:"Disciplines"}).translations("ES",{CATEGORIAS_TITLE:"Categorias",NIVELES_TITLE:"Niveles",DISCIPLINA_TITLE:"Disciplinas"})}])}.call(this),function(){angular.module("WissenSystem").controller("ControlCtrl",["$scope","Restangular","toastr","$state","$window","MySocket","SocketData","$rootScope","$mdSidenav","$filter",function(a,b,c,d,e,f,g,h,i,j){return a.SocketData=g,a.cltdisponible_selected={},a.categorias_king=[],a.categorias_traducidas=[],a.cmdCategSelected={},a.cmdPreguntasTraduc=[],a.cmdPreguntaSelected={},a.cmdNoPregSelected=0,a.cmdShowLogoEntidadPartici=!1,b.all("evaluaciones/categorias-con-preguntas").getList().then(function(b){return a.categorias_king=b,a.categorias_traducidas=j("categoriasTraducidas")(a.categorias_king,a.USER.idioma_main_id)},function(a){return c.warning("No se trajeron las categorias del evento","Problema")}),a.CerrarServidor=function(){return b.one("chat/cerrar-servidor").customPUT().then(function(a){return c.success("Cerrado",a)},function(a){return c.warning("No se cerró servidor"),console.log("No se cerró servidor ",a)})},a.openMenu=function(a,b){return a(b)},a.openMenuCateg=function(a,b){return a(b)},a.showSidenavEditUsu=function(b){return a.clt_to_edit=b.usuario,i("sidenavEditusu").toggle().then(function(){return console.log("toggle  is done")})},a.showSidenavSelectUsu=function(b){return a.cltdisponible_selected=b,f.get_usuarios(),a.clt_to_edit=b.usuario,i("sidenavSelectusu").toggle().then(function(){})},a.Conectar=function(){return f.conectar()},a.qrScanear=function(){var a;return a=d.href("qrscanner"),e.open(a,"_blank"),!0},a.crearservidor=function(){var a;return a=d.href("panel.crearservidor"),e.open(a,"_blank"),!0},a.enviarMensaje=function(){var b,c,d,e;if(""!==a.newMensaje){for(e=g.clientes,c=0,d=e.length;d>c;c++)b=e[c],b.seleccionado&&f.send_email_to(a.newMensaje,b);return a.newMensaje=""}},a.deseleccionarTodo=function(){var a,b,c,d,e;for(d=g.clientes,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.seleccionado?e.push(a.seleccionado=!1):e.push(void 0);return e},a.seleccionarTodo=function(){var a,b,c,d,e;for(d=g.clientes,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.seleccionado?e.push(void 0):e.push(a.seleccionado=!0);return e},a.actualizarClts=function(){return f.get_clts()},a.guardarNombrePunto=function(a){var b;return b=j("clearhtml")(a.nombre_punto),f.guardar_nombre_punto(a.resourceId,b)},a.clickedClt=function(b,c){return a.deseleccionar?c.seleccionado=!1:c.seleccionado=!c.seleccionado},a.sobreClt=function(b,c){return 1===b.buttons?a.deseleccionar?c.seleccionado=!1:c.seleccionado=!0:void 0},a.cerrarSesion=function(a){var b;return b=confirm("¿Cerrar sesión a "+a.usuario.nombres+"?"),b?f.cerrar_sesion(a.resourceId):void 0},a.categoriaSelect=function(b){var c;return c=j("categSelectedDeUsuario")(b.usuario,a.categorias_king,a.USER.idioma_main_id,b.categsel),c.length>0?c[0]:{}},a.cambiarCategSel=function(a,b){return f.change_a_categ_selected(a.resourceId,b.categoria_id)},a.empezarExamen=function(a){return f.empezar_examen(),c.info("Examen empezado")},a.empezarExamenCliente=function(a){return f.empezar_examen_cliente(a.resourceId)},a.showParticipantes=function(){return f.sc_show_participantes(a.categorias_traducidas)},a.showQuestion=function(){return f.sc_show_question(a.cmdNoPregSelected,a.cmdPreguntaSelected)},a.showPuntajeParticip=function(){return f.sc_show_puntaje_particip(a.cmdCategSelected)},a.cmdClickCategSelected=function(b){var c,d,e,f,g,h,i;for(a.cmdCategSelected=b,a.cmdPreguntasTraduc=[],h=b.evaluaciones,i=[],f=0,g=h.length;g>f;f++)c=h[f],c.actual?i.push(function(){var b,f,g,h;for(g=c.preguntas_evaluacion,h=[],b=0,f=g.length;f>b;b++)d=g[b],h.push(function(){var b,c,f,g;for(f=d.preguntas_traducidas,g=[],b=0,c=f.length;c>b;b++)e=f[b],e.idioma_id===a.USER.idioma_main_id?g.push(a.cmdPreguntasTraduc.push(e)):g.push(void 0);return g}());return h}()):i.push(void 0);return i},a.cmdClickPreguntaSelected=function(b,c){return a.cmdNoPregSelected=c+1,a.cmdPreguntaSelected=b,console.log(a.cmdNoPregSelected,b)},a.toggleShowLogoEntidadParticipantes=function(){return f.sc_show_logo_entidad_partici(!a.cmdShowLogoEntidadPartici)},a.nextQuestion=function(){return f.sc_next_question()},f.get_clts()}])}.call(this),function(){angular.module("WissenSystem").controller("CrearServidorCtrl",["$scope","Restangular","toastr","$timeout",function(a,b,c,d){return a.mytimeout={},a.counter=5,a.onTimeout=function(){return a.counter=a.counter-1,a.counter<1?a.stop():a.mytimeout=d(a.onTimeout,1e3)},a.mytimeout=d(a.onTimeout,1e3),a.stop=function(){return d.cancel(a.mytimeout),a.diagnostico="Ya puedes cerrar esta pestaña"},a.mostrarMensaje=function(){return c.info("Por seguridad, no cierres la pestaña hasta que acabe el tiempo")},b.one("chat").customGET().then(function(a){return console.log("Conectando...",a)},function(b){return d.cancel(a.mytimeout),c.warning("Error, tal vez el Chat Server ya está activo"),console.log("Error, tal vez el Chat Server ya está activo. ",b),a.diagnostico="Error, tal vez el Chat Server ya está activo",a.counter=0})}])}.call(this),function(){angular.module("WissenSystem").directive("sidenavSelectUsuDir",["App",function(a){return{restrict:"E",templateUrl:""+a.views+"control/sidenavSelectUsuDir.tpl.html",scope:!1,controller:"SidenavSelectUsuCtrl"}}]).controller("SidenavSelectUsuCtrl",["$scope","Restangular","toastr","MySocket","SocketData","$mdSidenav",function(a,b,c,d,e,f){return a.selectedUser={},a.avatar={masculino:{abrev:"M",def:"Masculino",img:a.imagesPath+"perfil/system/avatars/male1.jpg"},femenino:{abrev:"F",def:"Femenino",img:a.imagesPath+"perfil/system/avatars/female1.jpg"}},a.seleccionarUsu=function(b){var c,d,f,g,h;if(b.seleccionado=!b.seleccionado,b.seleccionado){for(a.selectedUser=b,g=e.usuarios_all,h=[],d=0,f=g.length;f>d;d++)c=g[d],c.id!==b.id?h.push(c.seleccionado=!1):h.push(void 0);return h}},a.seleccionarCkUsu=function(b){var c,d,f,g,h;if(b.seleccionado){for(a.selectedUser=b,g=e.usuarios_all,h=[],d=0,f=g.length;f>d;d++)c=g[d],c.id!==b.id?h.push(c.seleccionado=!1):h.push(void 0);return h}},a.ingresar_seleccionado=function(b){return b?(d.let_him_enter(b.id,a.cltdisponible_selected.resourceId),a.cerrar_sidenav()):a.selectedUser.id?(d.let_him_enter(a.selectedUser.id,a.cltdisponible_selected.resourceId),a.cerrar_sidenav()):c.warning("Selecciona un usuario")},a.cerrar_sidenav=function(){return f("sidenavSelectusu").close()}}])}.call(this),function(){angular.module("WissenSystem").directive("sidenavEditUsuDir",["App",function(a){return{restrict:"E",templateUrl:""+a.views+"control/sidenavEditUsuDir.tpl.html",scope:!1,controller:"SidenavEditUsuCtrl"}}]).controller("SidenavEditUsuCtrl",["$scope","Restangular","toastr","MySocket","SocketData","$mdSidenav","$mdDialog","$filter",function(a,b,c,d,e,f,g,h){return a.niveles_king=[],a.traer_niveles=function(){return b.all("niveles/niveles-usuario").getList().then(function(b){return a.niveles_king=b},function(a){return c.warning("No se trajeron las niveles","Problema"),console.log("No se trajo niveles ",a)})},a.traer_niveles(),a.entidades=[],a.traer_entidades=function(){return b.all("entidades").getList().then(function(b){return a.entidades=b},function(a){return c.warning("No se trajeron las entidades","Problema"),console.log("No se trajo entidades ",a)})},a.traer_entidades(),a.categorias_king1=[],a.categorias_king2=[],a.traer_categorias=function(){return b.all("categorias/categorias-usuario").getList().then(function(b){return a.categorias_king1=b,angular.copy(a.categorias_king1,a.categorias_king2)},function(a){return c.warning("No se trajeron las categorias","Problema"),console.log("No se trajo categorias ",a)})},a.traer_categorias(),a.avatar={masculino:{abrev:"M",def:"Masculino",img:a.imagesPath+"perfil/system/avatars/male1.jpg"
},femenino:{abrev:"F",def:"Femenino",img:a.imagesPath+"perfil/system/avatars/female1.jpg"}},a.guardando_edicion=!1,a.guardar=function(){return a.guardando_edicion=!0,b.one("usuarios/update").customPUT(a.clt_to_edit).then(function(b){return c.success("Cambios guardados."),a.guardando_edicion=!1,console.log("Cambios guardados",b)},function(b){return c.warning("No se guardó cambios del usuario","Problema"),console.log("No se guardó cambios del usuario ",b),a.guardando_edicion=!1})},a.cancelar=function(){return a.guardando_edicion=!1,f("sidenavEditusu").close()},a.cambiarPass=function(d){var e;return e=g.prompt().title("Contraseña").textContent("Escribe nueva contraseña").placeholder("Contraseña").ariaLabel("Contraseña").targetEvent(d).ok("Cambiar").cancel("Cancelar"),g.show(e).then(function(d){var e;return e={usu_id:a.clt_to_edit.id,password:d},b.one("usuarios/cambiar-pass").customPUT(e).then(function(a){return c.success("Contraseña cambiada.")},function(a){return c.warning("No se cambió la contraseña","Problema"),console.log("No se guardó cambios del usuario ",a)})},function(){return console.log("Canceló cambio de pass")})},a.cambiaInscripcion=function(a,d){var e;return a.cambiando=!0,e={usuario_id:d.id,categoria_id:a.categoria_id},a.selected?b.one("inscripciones/inscribir").customPUT(e).then(function(b){var c;return a.cambiando=!1,console.log("Inscripción creada",b),c=h("filter")(d.inscripciones,{categoria_id:e.categoria_id}),0===c.length?d.inscripciones.push(b[0]):(c[0].id=b[0].id,c[0].deleted_at=b[0].deleted_at)},function(b){return c.warning("No se inscribó el usuario","Problema"),console.log("No se inscribó el usuario ",b),a.cambiando=!1,a.selected=!1}):b.one("inscripciones/desinscribir").customPUT(e).then(function(b){return a.cambiando=!1,console.log("Inscripción creada",b),d.inscripciones=h("filter")(d.inscripciones,{categoria_id:"!"+e.categoria_id})},function(b){return c.warning("No se quitó inscripción","Problema"),console.log("No se quitó inscripción ",b),a.cambiando=!1,a.selected=!0})}}])}.call(this),function(){angular.module("WissenSystem").config(["App","$stateProvider","$translateProvider",function(a,b,c){return b.state("panel.categorias",{url:"^/categorias",views:{contenido_panel:{templateUrl:""+a.views+"categorias/categorias.tpl.html",controller:"CategoriasCtrl"}},data:{pageTitle:"Categorias"}}),c.translations("EN",{CATEGORIAS_TITLE:"Categs",NIVELES_TITLE:"Levels",DISCIPLINA_TITLE:"Disciplines"}).translations("ES",{CATEGORIAS_TITLE:"Categorias",NIVELES_TITLE:"Niveles",DISCIPLINA_TITLE:"Disciplinas"})}])}.call(this),function(){angular.module("WissenSystem").controller("CategoriasCtrl",["$scope","Restangular","toastr",function(a,b,c){return a.comprobar_evento_actual=function(){return a.evento_actual?a.evento_actual.idioma_principal_id?a.idiomaPreg={selected:a.evento_actual.idioma_principal_id}:void 0:c.warning("Pimero debes crear o seleccionar un evento actual")},a.categorias_king=[],a.niveles_king=[],a.disciplinas_king=[],a.comprobar_evento_actual(),a.$on("cambio_evento_user",function(){return a.comprobar_evento_actual()}),a.$on("cambia_evento_actual",function(){return a.comprobar_evento_actual()})}])}.call(this),function(){angular.module("WissenSystem").controller("CategoriasDirCtrl",["$scope","Restangular","toastr","$uibModal","App","$filter",function(a,b,c,d,e,f){return a.creando=!1,a.traer_categorias=function(){return b.all("categorias/categorias-usuario").getList().then(function(b){return a.categoriasking=b},function(a){return c.warning("No se trajeron las categorias","Problema"),console.log("No se trajo categorias ",a)})},a.traer_categorias(),a.$on("cambio_evento_user",function(){return a.traer_categorias()}),a.crear_categoria=function(){return a.creando=!0,b.one("categorias/store").customPOST().then(function(b){return b.editando=!0,a.categoriasking.push(b),a.creando=!1,console.log("Categorias creada",b)},function(b){return c.warning("No se creó la categoria","Problema"),console.log("No se creó categoria ",b),a.creando=!1})},a.cerrar_edicion=function(a){return a.editando=!1},a.editarCategoria=function(a){return a.editando=!0},a.eliminarCategoria=function(b){var c;return c=d.open({templateUrl:e.views+"categorias/removeCategoria.tpl.html",controller:"RemoveCategoriaCtrl",resolve:{elemento:function(){return b}}}),c.result.then(function(b){return a.categoriasking=f("filter")(a.categoriasking,{id:"!"+b.id}),console.log("Resultado del modal: ",b)})},a.finalizar_edicion=function(b){return a.guardando(b),b.editando=!1},a.guardando=function(a){return b.all("categorias/guardar").customPUT(a).then(function(a){return c.success("Categoria guardada."),console.log("Categoria guardada: ",a)},function(a){return c.warning("No se pudo guardar la categoria","Problema"),console.log("No se pudo guardar la categoria ",a)})}}]).controller("RemoveCategoriaCtrl",["$scope","$uibModalInstance","elemento","Restangular","toastr",function(a,b,c,d,e){return a.elemento=c,console.log("elemento",c),a.ok=function(){return d.all("categorias/destroy").customDELETE(c.id).then(function(a){return e.success("Categoria eliminada con éxito.","Eliminado"),b.close(c)},function(a){return e.warning("No se pudo eliminar al elemento.","Problema"),console.log("Error eliminando elemento: ",a),b.dismiss("Error")})},a.cancel=function(){return b.dismiss("cancel")}}])}.call(this),function(){angular.module("WissenSystem").directive("categoriasDir",["App",function(a){return{restrict:"E",templateUrl:""+a.views+"categorias/categoriasDir.tpl.html",scope:{idiomapreg:"=",eventoactual:"=",categoriasking:"=",nivelesking:"=",disciplinasking:"="},link:function(a,b,c){},controller:"CategoriasDirCtrl"}}])}.call(this),function(){angular.module("WissenSystem").controller("DisciplinasCtrl",["$scope","Restangular","toastr","$uibModal","App","$filter",function(a,b,c,d,e,f){return a.creando=!1,a.traer_disciplinas=function(){return b.all("disciplinas/disciplinas-usuario").getList().then(function(b){return a.disciplinasking=b},function(a){return c.warning("No se trajeron las disciplinas","Problema"),console.log("No se trajo disciplinas ",a)})},a.traer_disciplinas(),a.$on("cambio_evento_user",function(){return a.traer_disciplinas()}),a.crear_disciplina=function(){return a.creando=!0,b.one("disciplinas/store").customPOST().then(function(b){return b.editando=!0,a.disciplinasking.push(b),a.creando=!1,console.log("Disciplina creada",b)},function(b){return c.warning("No se creó la disciplina","Problema"),console.log("No se creó disciplina ",b),a.creando=!1})},a.cerrar_edicion=function(a){return a.editando=!1},a.editarDisciplina=function(a){return a.editando=!0},a.eliminarDisciplina=function(b){var c;return c=d.open({templateUrl:e.views+"categorias/removeDisciplina.tpl.html",controller:"RemoveDisciplinaCtrl",resolve:{elemento:function(){return b}}}),c.result.then(function(b){return a.disciplinasking=f("filter")(a.disciplinasking,{id:"!"+b.id}),console.log("Resultado del modal: ",b)})},a.finalizar_edicion=function(b){return a.guardando(b),b.editando=!1},a.guardando=function(a){return b.all("disciplinas/guardar").customPUT(a).then(function(a){return c.success("Disciplina guardada."),console.log("Disciplina guardada: ",a)},function(a){return c.warning("No se pudo guardar la disciplina","Problema"),console.log("No se pudo guardar la disciplina ",a)})}}]).controller("RemoveDisciplinaCtrl",["$scope","$uibModalInstance","elemento","Restangular","toastr",function(a,b,c,d,e){return a.elemento=c,console.log("elemento",c),a.ok=function(){return d.all("disciplinas/destroy").customDELETE(c.id).then(function(a){return e.success("Disciplina eliminada con éxito.","Eliminado"),b.close(c)},function(a){return e.warning("No se pudo eliminar al elemento.","Problema"),console.log("Error eliminando elemento: ",a),b.dismiss("Error")})},a.cancel=function(){return b.dismiss("cancel")}}])}.call(this),function(){angular.module("WissenSystem").directive("disciplinasDir",["App",function(a){return{restrict:"E",templateUrl:""+a.views+"categorias/disciplinasDir.tpl.html",scope:{idiomapreg:"=",eventoactual:"=",disciplinasking:"="},link:function(a,b,c){},controller:"DisciplinasCtrl"}}])}.call(this),function(){angular.module("WissenSystem").controller("NivelesCtrl",["$scope","Restangular","toastr","$uibModal","App","$filter",function(a,b,c,d,e,f){return a.creando=!1,a.traer_niveles=function(){return b.all("niveles/niveles-usuario").getList().then(function(b){return a.nivelesking=b},function(a){return c.warning("No se trajeron las niveles","Problema"),console.log("No se trajo niveles ",a)})},a.traer_niveles(),a.$on("cambio_evento_user",function(){return a.traer_niveles()}),a.crear_nivel=function(){return a.creando=!0,b.one("niveles/store").customPOST().then(function(b){return b.editando=!0,a.nivelesking.push(b),a.creando=!1,console.log("Nivel creada",b)},function(b){return c.warning("No se creó el nivel","Problema"),console.log("No se creó nivel ",b),a.creando=!1})},a.cerrar_edicion=function(a){return a.editando=!1},a.editarNivel=function(a){return a.editando=!0},a.eliminarNivel=function(b){var c;return c=d.open({templateUrl:e.views+"categorias/removeNivel.tpl.html",controller:"RemoveNivelCtrl",resolve:{elemento:function(){return b}}}),c.result.then(function(b){return a.nivelesking=f("filter")(a.nivelesking,{id:"!"+b.id}),console.log("Resultado del modal: ",b)})},a.finalizar_edicion=function(b){return a.guardando(b),b.editando=!1},a.guardando=function(a){return b.all("niveles/guardar").customPUT(a).then(function(a){return c.success("Nivel guardada."),console.log("Nivel guardada: ",a)},function(a){return c.warning("No se pudo guardar el nivel","Problema"),console.log("No se pudo guardar el nivel ",a)})}}]).controller("RemoveNivelCtrl",["$scope","$uibModalInstance","elemento","Restangular","toastr",function(a,b,c,d,e){return a.elemento=c,console.log("elemento",c),a.ok=function(){return d.all("niveles/destroy").customDELETE(c.id).then(function(a){return e.success("Nivel eliminado con éxito.","Eliminado"),b.close(c)},function(a){return e.warning("No se pudo eliminar al elemento.","Problema"),console.log("Error eliminando elemento: ",a),b.dismiss("Error")})},a.cancel=function(){return b.dismiss("cancel")}}])}.call(this),function(){angular.module("WissenSystem").directive("nivelesDir",["App",function(a){return{restrict:"E",templateUrl:""+a.views+"categorias/nivelesDir.tpl.html",scope:{idiomapreg:"=",eventoactual:"=",nivelesking:"="},link:function(a,b,c){},controller:"NivelesCtrl"}}])}.call(this),function(){"use strict";angular.module("WissenSystem").config(["$stateProvider","App","USER_ROLES","PERMISSIONS","$translateProvider",function(a,b,c,d,e){a.state("panel.informes",{url:"^/informes/",views:{contenido_panel:{templateUrl:""+b.views+"informes/informes.tpl.html",controller:"InformesCtrl"}},resolve:{resolved_user:["AuthService",function(a){return a.verificar()}]},data:{pageTitle:"Informes"}}),e.translations("EN",{INICIO_MENU:"Home"}).translations("ES",{INICIO_MENU:"Inicio"}).translations("PT",{INICIO_MENU:"Inicio"}).translations("FR",{INICIO_MENU:"Inicio"})}])}.call(this),function(){"use strict";angular.module("WissenSystem").controller("InformesCtrl",["$scope","$http","Restangular","$state","$cookies","$rootScope","toastr","preguntasServ","$filter",function(a,b,c,d,e,f,g,h,i){}])}.call(this),function(){"use strict";angular.module("WissenSystem").config(["$stateProvider","App",function(a,b){return a.state("panel.filemanager",{url:"/filemanager",views:{contenido_panel:{templateUrl:""+b.views+"fileManager/fileManager.tpl.html",controller:"FileManagerCtrl"}},data:{pageTitle:"Administrador de archivos"}})}])}.call(this),function(){"use strict";angular.module("WissenSystem").controller("FileManagerCtrl",["$scope","Upload","$timeout","$filter","App","Restangular","Perfil","$uibModal","$mdDialog","resolved_user","toastr","AuthService",function(a,b,c,d,e,f,g,h,i,j,k,l){var m,n,o;a.USER=j,a.subir_intacta={},a.hasRoleOrPerm=l.hasRoleOrPerm,m=function(){return a.dato={imgUsuario:{id:a.USER.imagen_id,nombre:a.USER.image_nombre}}},m(),a.perfilPath=e.images+"perfil/",a.imgFiles=[],a.errorMsg="",a.fileReaderSupported=null!==window.FileReader&&(null===window.FileAPI||FileAPI.html5!==!1),a.dato.usuarioElegido=[],f.one("imagenes/usuarios").customGET().then(function(b){return a.imagenes=b.imagenes,a.usuarios=b.usuarios,a.dato.usuarioElegido=b[0],a.dato.imgParaUsuario=b.imagenes.length>0?b.imagenes[0]:void 0},function(a){return k.error("No se trajeron las imágenes y usuarios.")}),a.upload=function(b){var c,d,e,f,g;if(a.imgFiles=b,a.errorMsg="",b&&b.length){for(g=[],d=e=0,f=b.length;f>=0?f>e:e>f;d=f>=0?++e:--e)c=b[d],g.push(n(c));return g}},n=function(b){return a.errorMsg=null,o(b),a.generateThumb(b)},a.generateThumb=function(b){return null!==b&&a.fileReaderSupported&&b.type.indexOf("image")>-1?c(function(){var a;return a=new FileReader,a.readAsDataURL(b),a.onload=function(a){return c(function(){return b.dataUrl=a.target.result})}}):void 0},o=function(c){var d;return d=a.subir_intacta.intacta?"-intacta":"",c.size>1e7?void(a.errorMsg="Archivo excede los 10MB permitidos."):b.upload({url:e.Server+"api/imagenes/store"+d,file:c}).progress(function(a){var b;return b=parseInt(100*a.loaded/a.total),c.porcentaje=b}).success(function(b,c,d,e){return a.imagenes.push(b)}).error(function(a){return console.log("Falla uploading: ",a)}).xhr(function(a){})},a.pedirCambioUsuario=function(b){return f.one("imagenes/cambiar-imagen-perfil/"+a.USER.id).customPUT({imagen_id:b.id}).then(function(c){return g.setImagen(c.imagen_id,b.nombre),a.$emit("cambianImgs",{image:c}),k.success("Imagen principal cambiada")},function(a){return k.error("No se pudo cambiar imagen","Problema")})},a.cambiarLogo=function(a){return f.one("imagenes/cambiar-logo").customPUT({logo_id:a.id}).then(function(a){return k.success("Logo del colegio cambiado")},function(a){return k.error("No se pudo cambiar el logo","Problema")})},a.asignToUser=function(b,c){return i.show({controller:"AsignToUserCtrl",templateUrl:e.views+"fileManager/asignToUser.tpl.html",parent:angular.element(document.body),targetEvent:b,clickOutsideToClose:!0,resolve:{usuarios:function(){return a.usuarios},perfilPath:function(){return a.perfilPath}}}).then(function(b){return a.cambiarFotoUnUsuario(b,c)},function(){return a.status="You didn't name your dog."})},a.imagenSelect=function(a,b){},a.fotoSelect=function(a,b){},a.rotarImagen=function(a){return f.one("imagenes/rotarimagen/"+a.id).customPUT().then(function(b){return a.nombre="",k.success("Imagen rotada"),a.nombre=b+"?"+(new Date).getTime()},function(a){return k.error("Imagen no rotada")})},a.borrarImagen=function(b){var c;return c=h.open({templateUrl:"==fileManager/removeImage.tpl.html",controller:"RemoveImageCtrl",size:"sm",resolve:{imagen:function(){return b}}}),c.result.then(function(b){return a.imagenes=d("filter")(a.imagenes,{id:"!"+b.id})})},a.usuarioSelect=function(b,c){return a.dato.selectUsuarioModel=b},a.cambiarFotoUnUsuario=function(a,b){var c;return c={imgUsuario:b.id},f.one("imagenes/cambiar-img-usuario/"+a.id).customPUT(c).then(function(c){return k.success("Imagen asignada con éxito"),a.imagen_id=b.id,a.imagen_nombre=b.nombre},function(a){return k.error("Error al asignar foto al usuario","Problema")})},a.pedirCambioFirma=function(a,b){var c;return c={imgFirma:b.id},$http.put("::perfiles/cambiar-firma/"+a.id,c).then(function(a){return k.success("Firma asignada con éxito")},function(a){return k.error("Error al asignar firma","Problema")})}}])}.call(this),function(){angular.module("WissenSystem").controller("RemoveImageCtrl",["$scope","$uibModalInstance","imagen","App","$http","AuthService","toastr",function(a,b,c,d,e,f,g){a.imagesPath=d.images+"perfil/",a.imagen=c,a.hasRoleOrPerm=f.hasRoleOrPerm,a.ok=function(){return e["delete"]("::imagenes/destroy/"+c.id).then(function(a){return g.success("La imagen ha sido removida.")},function(a){return g.error("No se pudo eliminar la imagen.")}),b.close(c)},a.cancel=function(){return b.dismiss("cancel")}}])}.call(this),function(){"use strict";angular.module("WissenSystem").controller("AsignToUserCtrl",["$scope","$mdDialog","toastr","usuarios","perfilPath",function(a,b,c,d,e){a.usuarios=d,a.perfilPath=e,a.asignar=function(a){return b.hide(a)},a.cancelar=function(){return b.hide()}}])}.call(this),GridSampler={},GridSampler.checkAndNudgePoints=function(a,b){for(var c=qrcode.width,d=qrcode.height,e=!0,f=0;f<b.length&&e;f+=2){var g=Math.floor(b[f]),h=Math.floor(b[f+1]);if(-1>g||g>c||-1>h||h>d)throw"Error.checkAndNudgePoints ";e=!1,-1==g?(b[f]=0,e=!0):g==c&&(b[f]=c-1,e=!0),-1==h?(b[f+1]=0,e=!0):h==d&&(b[f+1]=d-1,e=!0)}e=!0;for(var f=b.length-2;f>=0&&e;f-=2){var g=Math.floor(b[f]),h=Math.floor(b[f+1]);if(-1>g||g>c||-1>h||h>d)throw"Error.checkAndNudgePoints ";e=!1,-1==g?(b[f]=0,e=!0):g==c&&(b[f]=c-1,e=!0),-1==h?(b[f+1]=0,e=!0):h==d&&(b[f+1]=d-1,e=!0)}},GridSampler.sampleGrid3=function(a,b,c){for(var d=new BitMatrix(b),e=new Array(b<<1),f=0;b>f;f++){for(var g=e.length,h=f+.5,i=0;g>i;i+=2)e[i]=(i>>1)+.5,e[i+1]=h;c.transformPoints1(e),GridSampler.checkAndNudgePoints(a,e);try{for(var i=0;g>i;i+=2){var j=4*Math.floor(e[i])+Math.floor(e[i+1])*qrcode.width*4,k=a[Math.floor(e[i])+qrcode.width*Math.floor(e[i+1])];qrcode.imagedata.data[j]=k?255:0,qrcode.imagedata.data[j+1]=k?255:0,qrcode.imagedata.data[j+2]=0,qrcode.imagedata.data[j+3]=255,k&&d.set_Renamed(i>>1,f)}}catch(l){throw"Error.checkAndNudgePoints"}}return d},GridSampler.sampleGridx=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=PerspectiveTransform.quadrilateralToQuadrilateral(c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r);return GridSampler.sampleGrid3(a,b,s)},Version.VERSION_DECODE_INFO=new Array(31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017),Version.VERSIONS=buildVersions(),Version.getVersionForNumber=function(a){if(1>a||a>40)throw"ArgumentException";return Version.VERSIONS[a-1]},Version.getProvisionalVersionForDimension=function(a){if(a%4!=1)throw"Error getProvisionalVersionForDimension";try{return Version.getVersionForNumber(a-17>>2)}catch(b){throw"Error getVersionForNumber"}},Version.decodeVersionInformation=function(a){for(var b=4294967295,c=0,d=0;d<Version.VERSION_DECODE_INFO.length;d++){var e=Version.VERSION_DECODE_INFO[d];if(e==a)return this.getVersionForNumber(d+7);var f=FormatInformation.numBitsDiffering(a,e);b>f&&(c=d+7,b=f)}return 3>=b?this.getVersionForNumber(c):null},PerspectiveTransform.quadrilateralToQuadrilateral=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=this.quadrilateralToSquare(a,b,c,d,e,f,g,h),r=this.squareToQuadrilateral(i,j,k,l,m,n,o,p);return r.times(q)},PerspectiveTransform.squareToQuadrilateral=function(a,b,c,d,e,f,g,h){return dy2=h-f,dy3=b-d+f-h,0==dy2&&0==dy3?new PerspectiveTransform(c-a,e-c,a,d-b,f-d,b,0,0,1):(dx1=c-e,dx2=g-e,dx3=a-c+e-g,dy1=d-f,denominator=dx1*dy2-dx2*dy1,a13=(dx3*dy2-dx2*dy3)/denominator,a23=(dx1*dy3-dx3*dy1)/denominator,new PerspectiveTransform(c-a+a13*c,g-a+a23*g,a,d-b+a13*d,h-b+a23*h,b,a13,a23,1))},PerspectiveTransform.quadrilateralToSquare=function(a,b,c,d,e,f,g,h){return this.squareToQuadrilateral(a,b,c,d,e,f,g,h).buildAdjoint()};var FORMAT_INFO_MASK_QR=21522,FORMAT_INFO_DECODE_LOOKUP=new Array(new Array(21522,0),new Array(20773,1),new Array(24188,2),new Array(23371,3),new Array(17913,4),new Array(16590,5),new Array(20375,6),new Array(19104,7),new Array(30660,8),new Array(29427,9),new Array(32170,10),new Array(30877,11),new Array(26159,12),new Array(25368,13),new Array(27713,14),new Array(26998,15),new Array(5769,16),new Array(5054,17),new Array(7399,18),new Array(6608,19),new Array(1890,20),new Array(597,21),new Array(3340,22),new Array(2107,23),new Array(13663,24),new Array(12392,25),new Array(16177,26),new Array(14854,27),new Array(9396,28),new Array(8579,29),new Array(11994,30),new Array(11245,31)),BITS_SET_IN_HALF_BYTE=new Array(0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4);FormatInformation.numBitsDiffering=function(a,b){return a^=b,BITS_SET_IN_HALF_BYTE[15&a]+BITS_SET_IN_HALF_BYTE[15&URShift(a,4)]+BITS_SET_IN_HALF_BYTE[15&URShift(a,8)]+BITS_SET_IN_HALF_BYTE[15&URShift(a,12)]+BITS_SET_IN_HALF_BYTE[15&URShift(a,16)]+BITS_SET_IN_HALF_BYTE[15&URShift(a,20)]+BITS_SET_IN_HALF_BYTE[15&URShift(a,24)]+BITS_SET_IN_HALF_BYTE[15&URShift(a,28)]},FormatInformation.decodeFormatInformation=function(a){var b=FormatInformation.doDecodeFormatInformation(a);return null!=b?b:FormatInformation.doDecodeFormatInformation(a^FORMAT_INFO_MASK_QR)},FormatInformation.doDecodeFormatInformation=function(a){for(var b=4294967295,c=0,d=0;d<FORMAT_INFO_DECODE_LOOKUP.length;d++){var e=FORMAT_INFO_DECODE_LOOKUP[d],f=e[0];if(f==a)return new FormatInformation(e[1]);var g=this.numBitsDiffering(a,f);b>g&&(c=e[1],b=g)}return 3>=b?new FormatInformation(c):null},ErrorCorrectionLevel.forBits=function(a){if(0>a||a>=FOR_BITS.length)throw"ArgumentException";return FOR_BITS[a]};var L=new ErrorCorrectionLevel(0,1,"L"),M=new ErrorCorrectionLevel(1,0,"M"),Q=new ErrorCorrectionLevel(2,3,"Q"),H=new ErrorCorrectionLevel(3,2,"H"),FOR_BITS=new Array(M,L,H,Q);DataBlock.getDataBlocks=function(a,b,c){if(a.length!=b.TotalCodewords)throw"ArgumentException";for(var d=b.getECBlocksForLevel(c),e=0,f=d.getECBlocks(),g=0;g<f.length;g++)e+=f[g].Count;for(var h=new Array(e),i=0,j=0;j<f.length;j++)for(var k=f[j],g=0;g<k.Count;g++){var l=k.DataCodewords,m=d.ECCodewordsPerBlock+l;h[i++]=new DataBlock(l,new Array(m))}for(var n=h[0].codewords.length,o=h.length-1;o>=0;){var p=h[o].codewords.length;if(p==n)break;o--}o++;for(var q=n-d.ECCodewordsPerBlock,r=0,g=0;q>g;g++)for(var j=0;i>j;j++)h[j].codewords[g]=a[r++];for(var j=o;i>j;j++)h[j].codewords[q]=a[r++];for(var s=h[0].codewords.length,g=q;s>g;g++)for(var j=0;i>j;j++){var t=o>j?g:g+1;h[j].codewords[t]=a[r++]}return h},DataMask={},DataMask.forReference=function(a){if(0>a||a>7)throw"System.ArgumentException";return DataMask.DATA_MASKS[a]},DataMask.DATA_MASKS=new Array(new DataMask000,new DataMask001,new DataMask010,new DataMask011,new DataMask100,new DataMask101,new DataMask110,new DataMask111),GF256.QR_CODE_FIELD=new GF256(285),GF256.DATA_MATRIX_FIELD=new GF256(301),GF256.addOrSubtract=function(a,b){return a^b},Decoder={},Decoder.rsDecoder=new ReedSolomonDecoder(GF256.QR_CODE_FIELD),Decoder.correctErrors=function(a,b){for(var c=a.length,d=new Array(c),e=0;c>e;e++)d[e]=255&a[e];var f=a.length-b;try{Decoder.rsDecoder.decode(d,f)}catch(g){throw g}for(var e=0;b>e;e++)a[e]=d[e]},Decoder.decode=function(a){for(var b=new BitMatrixParser(a),c=b.readVersion(),d=b.readFormatInformation().ErrorCorrectionLevel,e=b.readCodewords(),f=DataBlock.getDataBlocks(e,c,d),g=0,h=0;h<f.length;h++)g+=f[h].NumDataCodewords;for(var i=new Array(g),j=0,k=0;k<f.length;k++){var l=f[k],m=l.Codewords,n=l.NumDataCodewords;Decoder.correctErrors(m,n);for(var h=0;n>h;h++)i[j++]=m[h]}var o=new QRCodeDataBlockReader(i,c.VersionNumber,d.Bits);return o},qrcode={},qrcode.imagedata=null,qrcode.width=0,qrcode.height=0,qrcode.qrCodeSymbol=null,qrcode.debug=!1,qrcode.maxImgSize=1048576,qrcode.sizeOfDataLengthInfo=[[10,9,8,8],[12,11,16,10],[14,13,16,12]],qrcode.callback=null,qrcode.decode=function(a){if(0==arguments.length){var b=document.getElementById("qr-canvas"),c=b.getContext("2d");return qrcode.width=b.width,qrcode.height=b.height,qrcode.imagedata=c.getImageData(0,0,qrcode.width,qrcode.height),qrcode.result=qrcode.process(c),null!=qrcode.callback&&qrcode.callback(qrcode.result),qrcode.result}var d=new Image;d.onload=function(){var a=document.createElement("canvas"),b=a.getContext("2d"),c=d.height,e=d.width;if(d.width*d.height>qrcode.maxImgSize){var f=d.width/d.height;c=Math.sqrt(qrcode.maxImgSize/f),e=f*c}a.width=e,a.height=c,b.drawImage(d,0,0,a.width,a.height),qrcode.width=a.width,qrcode.height=a.height;try{qrcode.imagedata=b.getImageData(0,0,a.width,a.height)}catch(g){return qrcode.result="Cross domain image reading not supported in your browser! Save it to your computer then drag and drop the file!",void(null!=qrcode.callback&&qrcode.callback(qrcode.result))}try{qrcode.result=qrcode.process(b)}catch(g){console.log(g),qrcode.result="error decoding QR Code"}null!=qrcode.callback&&qrcode.callback(qrcode.result)},d.src=a},qrcode.isUrl=function(a){var b=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return b.test(a)},qrcode.decode_url=function(a){var b="";try{b=escape(a)}catch(c){console.log(c),b=a}var d="";try{d=decodeURIComponent(b)}catch(c){console.log(c),d=b}return d},qrcode.decode_utf8=function(a){return qrcode.isUrl(a)?qrcode.decode_url(a):a},qrcode.process=function(a){var b=(new Date).getTime(),c=qrcode.grayScaleToBitmap(qrcode.grayscale());if(qrcode.debug){for(var d=0;d<qrcode.height;d++)for(var e=0;e<qrcode.width;e++){var f=4*e+d*qrcode.width*4;qrcode.imagedata.data[f]=(c[e+d*qrcode.width],0),qrcode.imagedata.data[f+1]=(c[e+d*qrcode.width],0),qrcode.imagedata.data[f+2]=c[e+d*qrcode.width]?255:0}a.putImageData(qrcode.imagedata,0,0)}var g=new Detector(c),h=g.detect();qrcode.debug&&a.putImageData(qrcode.imagedata,0,0);for(var i=Decoder.decode(h.bits),j=i.DataByte,k="",l=0;l<j.length;l++)for(var m=0;m<j[l].length;m++)k+=String.fromCharCode(j[l][m]);var n=(new Date).getTime(),o=n-b;return console.log(o),qrcode.decode_utf8(k)},qrcode.getPixel=function(a,b){if(qrcode.width<a)throw"point error";if(qrcode.height<b)throw"point error";return point=4*a+b*qrcode.width*4,p=(33*qrcode.imagedata.data[point]+34*qrcode.imagedata.data[point+1]+33*qrcode.imagedata.data[point+2])/100,p},qrcode.binarize=function(a){for(var b=new Array(qrcode.width*qrcode.height),c=0;c<qrcode.height;c++)for(var d=0;d<qrcode.width;d++){var e=qrcode.getPixel(d,c);b[d+c*qrcode.width]=a>=e?!0:!1}return b},qrcode.getMiddleBrightnessPerArea=function(a){for(var b=4,c=Math.floor(qrcode.width/b),d=Math.floor(qrcode.height/b),e=new Array(b),f=0;b>f;f++){e[f]=new Array(b);for(var g=0;b>g;g++)e[f][g]=new Array(0,0)}for(var h=0;b>h;h++)for(var i=0;b>i;i++){e[i][h][0]=255;for(var j=0;d>j;j++)for(var k=0;c>k;k++){var l=a[c*i+k+(d*h+j)*qrcode.width];l<e[i][h][0]&&(e[i][h][0]=l),l>e[i][h][1]&&(e[i][h][1]=l)}}for(var m=new Array(b),n=0;b>n;n++)m[n]=new Array(b);for(var h=0;b>h;h++)for(var i=0;b>i;i++)m[i][h]=Math.floor((e[i][h][0]+e[i][h][1])/2);return m},qrcode.grayScaleToBitmap=function(a){for(var b=qrcode.getMiddleBrightnessPerArea(a),c=b.length,d=Math.floor(qrcode.width/c),e=Math.floor(qrcode.height/c),f=new Array(qrcode.height*qrcode.width),g=0;c>g;g++)for(var h=0;c>h;h++)for(var i=0;e>i;i++)for(var j=0;d>j;j++)f[d*h+j+(e*g+i)*qrcode.width]=a[d*h+j+(e*g+i)*qrcode.width]<b[h][g]?!0:!1;return f},qrcode.grayscale=function(){for(var a=new Array(qrcode.width*qrcode.height),b=0;b<qrcode.height;b++)for(var c=0;c<qrcode.width;c++){var d=qrcode.getPixel(c,b);a[c+b*qrcode.width]=d}return a},Array.prototype.remove=function(a,b){var c=this.slice((b||a)+1||this.length);return this.length=0>a?this.length+a:a,this.push.apply(this,c)};var MIN_SKIP=3,MAX_MODULES=57,INTEGER_MATH_SHIFT=8,CENTER_QUORUM=2;qrcode.orderBestPatterns=function(a){function b(a,b){return xDiff=a.X-b.X,yDiff=a.Y-b.Y,Math.sqrt(xDiff*xDiff+yDiff*yDiff)}function c(a,b,c){var d=b.x,e=b.y;return(c.x-d)*(a.y-e)-(c.y-e)*(a.x-d)}var d,e,f,g=b(a[0],a[1]),h=b(a[1],a[2]),i=b(a[0],a[2]);if(h>=g&&h>=i?(e=a[0],d=a[1],f=a[2]):i>=h&&i>=g?(e=a[1],d=a[0],f=a[2]):(e=a[2],d=a[0],f=a[1]),c(d,e,f)<0){var j=d;d=f,f=j}a[0]=d,a[1]=e,a[2]=f},function(){angular.module("WissenSystem").config(["App","$stateProvider","$translateProvider",function(a,b,c){return b.state("qrscanner",{url:"/qrscanner",views:{principal:{templateUrl:""+a.views+"qrcode/qrScanner.tpl.html",controller:"QrScannerCtrl"}},resolve:{resolved_user:["AuthService",function(a){return a.verificar()}]},data:{pageTitle:"QR Scanner"}})}])}.call(this),function(){angular.module("WissenSystem").controller("QrScannerCtrl",["$scope","Restangular","toastr","resolved_user","App","AuthService","MySocket",function(a,b,c,d,e,f,g){return a.USER=d,a.imagesPath=e.images,a.esperando=!1,a.usuarios=[],a.selectedUser={},f.verificar_acceso(),a.onSuccess=function(d){var e;return a.esperando?void 0:(c.info("Reconocido..."),a.esperando=!0,e={code:d},a.selectedUser.id&&(e.user_id=a.selectedUser.id),b.one("qr").customPOST(e).then(function(b){return b.res?"no_encontrado"===b.res&&c.warning("Código NO encontrado en la base de datos"):b.accepted?(a.selectedUser.id?g.got_qr(b,a.selectedUser.id):g.got_qr(b),c.success('Código acceptado: "'+b.comando+'"')):c.warning("Código NO aceptado","Tal vez ya ha sido usado antes"),a.esperando=!1},function(b){return c.warning("No se pudo reconocer el código qr"),console.log("No se pudo reconocer el código qr ",b),a.esperando=!1}))},a.onError=function(b){return a.errorqr=b},a.onVideoError=function(b){return a.errorqr=b},a.seleccionarUsu=function(b){var c,d,e,f,g;if(b.seleccionado=!b.seleccionado,b.seleccionado){for(a.selectedUser=b,f=a.usuarios,g=[],d=0,e=f.length;e>d;d++)c=f[d],c.id!==b.id?g.push(c.seleccionado=!1):g.push(void 0);return g}},a.seleccionarCkUsu=function(b){var c,d,e,f,g;if(b.seleccionado){for(a.selectedUser=b,f=a.usuarios,g=[],d=0,e=f.length;e>d;d++)c=f[d],c.id!==b.id?g.push(c.seleccionado=!1):g.push(void 0);return g}},b.all("usuarios").getList().then(function(b){return a.usuarios=b})}])}.call(this),function(){"use strict";angular.module("WissenSystem").config(["$stateProvider","App","USER_ROLES","PERMISSIONS","$translateProvider",function(a,b,c,d,e){a.state("proyectando",{url:"/proyectando",views:{principal:{templateUrl:""+b.views+"proyectando/proyectando.tpl.html",controller:"ProyectandoCtrl"}},resolve:{resolved_user:["AuthService",function(a){return a.verificar()}]},data:{pageTitle:"WissenSystem - Proyectando"}}).state("proyectando.participantes",{url:"^/participantes",views:{contenido_panel:{templateUrl:""+b.views+"proyectando/participantes.tpl.html",controller:"ParticipantesCtrl"}},data:{pageTitle:"Participantes"}}).state("proyectando.question",{url:"^/question",views:{contenido_panel:{templateUrl:""+b.views+"proyectando/question.tpl.html",controller:"SCQuestionCtrl"}},data:{pageTitle:"Pregunta"}}).state("proyectando.puntaje_particip",{url:"^/puntaje_particip",views:{contenido_panel:{templateUrl:""+b.views+"proyectando/puntajeParticip.tpl.html",controller:"SCPuntajeParticipCtrl"}},data:{pageTitle:"Puntaje Participante"}}),e.preferredLanguage("ES"),e.translations("EN",{INICIO_MENU:"Home",USERS_MENU:"Users",EVENTS_MENU:"Events",ENTIDADES_MENU:"Entities",CATEGS_MENU:"Categories",PREGUNTAS_MENU:"Questions",EVALUACIONES_MENU:"Tests",IDIOMA_MENU:"Language",INFORMES_MENU:"Reports",CONTROL_MENU:"Monitoring",SCANNER_MENU:"QR Scanner",SALIR:"Sign out",ELIMINATORIAS:"Playoffs",GRAN_FINAL:"Great ultimate",INSCRITO_EN:"You are signed in:",NO_ESTAS_INSCRITO:"You are`t signed in any category.",EXAM_HECHOS:"Done Exams"}).translations("ES",{INICIO_MENU:"Inicio",EVENTS_MENU:"Eventos",ENTIDADES_MENU:"Entidades",CATEGS_MENU:"Categorías",PREGUNTAS_MENU:"Preguntas",EVALUACIONES_MENU:"Evaluaciones",USERS_MENU:"Usuarios",IDIOMA_MENU:"Idioma",INFORMES_MENU:"Informes",CONTROL_MENU:"Control",SCANNER_MENU:"Escaner QR",SALIR:"Salir",ELIMINATORIAS:"Eliminatorias",GRAN_FINAL:"Gran final",INSCRITO_EN:"Estás inscrito en:",NO_ESTAS_INSCRITO:"No estás inscrito en ninguna categoría.",EXAM_HECHOS:"Exámenes hechos"}).translations("PT",{INICIO_MENU:"Iniciação",EVENTS_MENU:"Eventos",ENTIDADES_MENU:"Entidades",CATEGS_MENU:"Categorias",PREGUNTAS_MENU:"Interrogatório",EVALUACIONES_MENU:"Evaluations",USERS_MENU:"Usuários",IDIOMA_MENU:"Língua",INFORMES_MENU:"Informação",CONTROL_MENU:"Controle",SCANNER_MENU:"QR Scanner",SALIR:"Deixar",ELIMINATORIAS:"Playoffs",GRAN_FINAL:"Grande final",INSCRITO_EN:"Você está matriculado:",NO_ESTAS_INSCRITO:"Você não está registrado em qualquer categoria.",EXAM_HECHOS:"Testes feitos"}).translations("FR",{INICIO_MENU:"Initiation",EVENTS_MENU:"Événements",ENTIDADES_MENU:"Entités",CATEGS_MENU:"Catégories",
PREGUNTAS_MENU:"Questionnement",EVALUACIONES_MENU:"Evaluations",USERS_MENU:"Utilisateurs",IDIOMA_MENU:"Langue",INFORMES_MENU:"Rapports",CONTROL_MENU:"Contrôle",SCANNER_MENU:"QR Scanner",SALIR:"Laisser",ELIMINATORIAS:"Playoffs",GRAN_FINAL:"Grande finale",INSCRITO_EN:"Vous êtes inscrit à:",NO_ESTAS_INSCRITO:"Vous n'êtes pas inscrit dans aucune catégorie.",EXAM_HECHOS:"Tests effectués"})}])}.call(this),function(){"use strict";angular.module("WissenSystem").controller("ProyectandoCtrl",["$scope","$http","Restangular","$state","$stateParams","$cookies","$rootScope","AuthService","Perfil","App","resolved_user","toastr","$translate","$filter","$uibModal","MySocket","Fullscreen",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a.USER=k,a.imagesPath=j.images,h.verificar_acceso(),g.$on("$stateChangeSuccess",function(b,c,d,e,f){return a.cambiarTema("theme-zero")}),g.reload=function(){return d.go(d.current,e,{reload:!0})},a.setFullScreen=function(){return q.toggleAll()},a.openMenu=function(a,b){var c;return c=b,a(b)},a.cambiarIdioma=function(b){return c.one("idiomas/cambiar-idioma").customPUT({idioma_id:b.id}).then(function(c){var d,e,f,g;for(m.use(b.abrev),a.USER.idioma_main_id=b.id,a.idiomas_del_sistema(),g=a.idiomas_usados,e=0,f=g.length;f>e;e++)d=g[e],d.actual=d.abrev===b.abrev?!0:!1;return l.success("Idioma cambiado por "+b.abrev)},function(a){return console.log("No se pudo cambiar el idioma.",a)})},a.set_system_event=function(b){return c.one("eventos/set-evento-actual").customPUT({id:b.id}).then(function(c){return console.log("Evento cambiado: ",c),angular.forEach(a.USER.eventos,function(a,b){return a.actual=!1}),b.actual=!0,l.success("Evento actual cambiado por "+b.alias)},function(a){return console.log("Error conectando!",a),l.warning("No se pudo cambiar el evento actual.")})},a.evento_actual={},a.el_evento_actual=function(){if(a.USER){if(!h.isAuthorized("can_work_like_admin"))return a.evento_actual=a.USER.evento_actual;try{return a.evento_actual=n("filter")(a.USER.eventos,{id:a.USER.evento_selected_id})[0]}catch(b){return a.evento_actual={}}finally{g.$broadcast("cambia_evento_actual")}}},a.el_evento_actual(),a.set_user_event=function(b){return c.one("eventos/set-user-event").customPUT({evento_id:b.id}).then(function(c){return console.log("Evento cambiado: ",c),a.USER.evento_selected_id=b.id,a.el_evento_actual(),l.success("Evento actual cambiado por "+b.alias),g.$broadcast("cambio_evento_user")},function(a){return console.log("Error conectando!",a),l.warning("No se pudo cambiar el evento actual.")})},a.logout=function(){return p.unregister(),h.logout(),a.in_evento_actual={},c.one("login/logout").customPUT().then(function(a){return console.log("Desconectado con éxito: ",a)},function(a){return console.log("Error desconectando!",a)})},a.traerEventos=function(){return c.all("eventos").getList().then(function(b){return a.USER.eventos=b,a.el_evento_actual()},function(a){return console.log("No se trajeron los eventos.")})}}])}.call(this),function(){angular.module("WissenSystem").controller("ParticipantesCtrl",["$scope","$rootScope","AuthService","Perfil","App","SocketData","toastr","$translate","$filter","$uibModal","MySocket",function(a,b,c,d,e,f,g,h,i,j,k){k.get_clts(),a.SocketData=f,a.participantesDeCategoria=function(a){return i("filter")(f.clientes,{registrado:!0,categsel:a.categoria_id})}}]).controller("SCPuntajeParticipCtrl",["$scope","$rootScope","AuthService","Perfil","App","SocketData","toastr","$translate","$filter","$uibModal","MySocket",function(a,b,c,d,e,f,g,h,i,j,k){a.SocketData=f}])}.call(this),function(){angular.module("WissenSystem").controller("SCQuestionCtrl",["$scope","$http","Restangular","$state","MySocket","$rootScope","AuthService","Perfil","App","resolved_user","toastr","SocketData","$filter","$uibModal",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){a.MySocket=e,a.SocketData=l}])}.call(this),function(){angular.module("WissenSystem").factory("AuthService",["Restangular","$state","$http","$cookies","Perfil","$rootScope","AUTH_EVENTS","$q","$filter","toastr","MySocket",function(a,b,c,d,e,f,g,h,i,j,k){var l;return l={},l.verificando=!1,l.promesa_de_verificacion={},l.verificar=function(){var a;return l.verificando?l.promesa_de_verificacion:(a=h.defer(),e.User().id?a.resolve(e.User()):d.get("xtoken")?void 0!==d.get("xtoken")&&"undefined"!==d.get("xtoken")&&"[object Object]"!==d.get("xtoken")?l.login_from_token().then(function(b){return e.setUser(b),a.resolve(b)},function(b){return console.log("No se logueó from token"),a.reject(b)}):(console.log("Token mal estructurado: ",d.get("xtoken")),l.borrarToken(),f.$broadcast(g.notAuthenticated),a.reject("Token mal estructurado.")):(console.log("No hay cookie token."),a.reject("No hay cookie token."),b.go("login"),f.$broadcast(g.notAuthenticated)),l.promesa_de_verificacion=a.promise,l.promesa_de_verificacion)},l.verificar_acceso=function(){var a,c;return e.User().id||b.go("login"),c=b.current,c.data.needed_permissions?(a=c.data.needed_permissions,l.isAuthorized(a)?void 0:(console.log("No tiene permisos, y... "),f.lastState=c.name,l.isAuthenticated()?(f.$broadcast(g.notAuthorized),console.log("...está Autenticado.")):(console.log("...NO está Autenticado."),b.transitionTo("login")))):!0},l.login_credentials=function(i){var m;return m=h.defer(),l.borrarToken(),a.one("login/login").customPOST(i).then(function(a){return a.token?(d.put("xtoken",a.token),c.defaults.headers.common.Authorization="Bearer "+d.get("xtoken"),e.setUser(a),k.registrar(a),f.$broadcast(g.loginSuccess),m.resolve(a)):(console.log("No se trajo un token en el login.",a),f.$broadcast(g.loginFailed),m.reject("Error en login"))},function(a){return console.log("No se pudo loguear. ",a,b),a.data&&a.data.error&&("Token expirado"===a.data.error||"token_expired"===a.error?(j.warning("La sesión ha expirado"),"login"!==b.current.name&&b.go("login")):f.$broadcast(g.loginFailed)),m.reject("Error en login")}),m.promise},l.login_from_token=function(){var b,i;return b=h.defer(),e.User().id?b.resolve(e.User()):(c.defaults.headers.common.Authorization="Bearer "+d.get("xtoken"),i=a.one("login/verificar").post().then(function(a){return k.registrar(a),f.$broadcast(g.loginSuccess),e.setUser(a),b.resolve(a)},function(a){return console.log("No se pudo loguear con token. ",a),b.reject("Error en login con token."),f.$broadcast(g.loginFailed)})),b.promise},l.logout=function(a){return f.lastState=null,f.lastStateParam=null,l.borrarToken(),e.deleteUser(),b.transitionTo("login")},l.borrarToken=function(){return d.remove("xtoken"),delete c.defaults.headers.common.Authorization},l.isAuthenticated=function(){return!!e.User().id},l.isAuthorized=function(a){var b,c;return c=e.User(),c.is_superuser?!0:(angular.isArray(a)||(a=[a]),angular.isArray(c.perms)?(b=[],_.each(a,function(a){return-1!==c.perms.indexOf(a)?b.push(a):void 0}),l.isAuthenticated()&&b.length>0):a.length>0?!1:!0)},l.hasRoleOrPerm=function(a,b){var c;if(!angular.isArray(a)){if(!a)return!1;a=[a]}return c=[],_.each(a,function(a){var b;return b=[],b=i("filter")(e.User().roles,{name:a}),b&&b.length>0?c.push(a):void 0}),c.length>0},l}])}.call(this),function(){angular.module("WissenSystem").factory("Perfil",["Restangular","App","$q","$cookies","$rootScope","AUTH_EVENTS","$http",function(a,b,c,d,e,f,g){var h,i;return i={},h=0,{setUser:function(a){return i=a},User:function(){return i},id:function(){return i.user_id},idioma:function(){return i.idioma_main_id},setImagen:function(a,b){return i.imagen_id=a,i.imagen_nombre=b},setResourceId:function(a){return h=a},getResourceId:function(){return h},deleteUser:function(){return i={}}}}])}.call(this),function(){angular.module("WissenSystem").factory("preguntasServ",["Restangular","App","$q","$cookies","$rootScope","AUTH_EVENTS","$http",function(a,b,c,d,e,f,g){var h,i,j,k;return j=[],i=!1,h=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,k=[],{setUser:function(a){var b;return b=a},getPreguntas:function(){var b;return b=c.defer(),i===!1?(k=h.open("wissenDB",2),k.onupgradeneeded=function(){var a,b;return a=k.result,b=a.createObjectStore("preguntas_king",{keyPath:"id",autoIncrement:!0}),b.put({descripcion:"Una pregunta para traducir",tipo_pregunta:"Test",duracion:20,categoria_id:1,added_by:1,preguntas_traducidas:[{id:1,enunciado:"<p>¿Cuánto es <b>dos</b> más dos?</p>",ayuda:"Este es un texto de ayuda",pregunta_id:4,idioma_id:1,idioma:"Español",puntos:5,added_by:1,opciones:[{id:1,definicion:"Primera opción, y necesito meter mucho texto para ver que tal se verá al ingresar más cosas.",is_correct:!1},{id:2,definicion:"Segunda opción",is_correct:!0},{id:3,definicion:"Tercera opción",is_correct:!1}]},{id:2,enunciado:"How much is 2+2?",ayuda:"",pregunta_id:4,idioma_id:2,idioma:"English",puntos:5,added_by:1,opciones:[{id:4,definicion:"Fist option",is_correct:!1},{id:5,definicion:"Second option",is_correct:!0},{id:6,definicion:"Third option",is_correct:!1}]}]},{descripcion:"Otra pregunta",tipo_pregunta:"Test",duracion:20,categoria_id:1,added_by:1,preguntas_traducidas:[{id:1,enunciado:"<p>¿Quién es más rápido?</p>",ayuda:"Debes pensar en tu familia",pregunta_id:5,idioma_id:1,idioma:"Español",puntos:5,added_by:1,opciones:[{id:7,definicion:"Mi mamá.",is_correct:!1},{id:8,definicion:"Mi papá",is_correct:!0},{id:9,definicion:"Mi hermano",is_correct:!1},{id:10,definicion:"Yo",is_correct:!1}]},{id:2,enunciado:"Who is the faster one in the family?",ayuda:"You have to think in your family",pregunta_id:5,idioma_id:2,idioma:"English",puntos:5,added_by:1,opciones:[{id:11,definicion:"My mother",is_correct:!1},{id:12,definicion:"My father",is_correct:!0},{id:13,definicion:"My brother",is_correct:!1},{id:14,definicion:"Me",is_correct:!1}]}]})},k.onsuccess=function(){var a,c,d;return a=k.result,d=a.transaction(["preguntas_king"],"readwrite"),c=d.objectStore("preguntas_king"),k=c.get(1),k.onerror=function(a){return console.log("Error")},k.onsuccess=function(a){return console.log("Powerrr",k.result),b.resolve([k.result])}}):(a.all("preguntas_king",{dato:"ujno",mas:"otro"}).getList().then(function(a){return console.log("Este es el pedido de preguntas",a),b.resolve(a)},function(a){return console.log("Falló pedido de preguntas",a),b.reject(a)}),j=[{id:5,descripcion:"Otra pregunta",tipo_pregunta:"Test",duracion:20,categoria_id:1,added_by:1,preguntas_traducidas:[{id:1,enunciado:"<p>¿Quién es más rápido?</p>",ayuda:"Debes pensar en tu familia",pregunta_id:5,idioma_id:1,idioma:"Español",puntos:5,added_by:1,opciones:[{id:7,definicion:"Mi mamá.",is_correct:!1},{id:8,definicion:"Mi papá",is_correct:!0},{id:9,definicion:"Mi hermano",is_correct:!1},{id:10,definicion:"Yo",is_correct:!1}]},{id:2,enunciado:"Who is the faster one in the family?",ayuda:"You have to think in your family",pregunta_id:5,idioma_id:2,idioma:"English",puntos:5,added_by:1,opciones:[{id:11,definicion:"My mother",is_correct:!1},{id:12,definicion:"My father",is_correct:!0},{id:13,definicion:"My brother",is_correct:!1},{id:14,definicion:"Me",is_correct:!1}]}]}],b.resolve(j)),b.promise},savePregunta:function(a){var b;return b=c.defer(),k=h.open("wissenDB",2),k.onsuccess=function(){var b,c,d;return b=k.result,d=b.transaction(["preguntas_king"],"readwrite"),c=d.objectStore("preguntas_king"),console.log("objectStore",c),c.put(a)},b.promise}}}])}.call(this),function(){angular.module("WissenSystem").factory("MySocket",["$websocket","App","$q","$rootScope","Perfil","$interval","$cookies","$http","$state","SocketData","$filter",function(a,b,c,d,e,f,g,h,i,j,k){var l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L;return L="ws://"+localStorage.getItem("dominio")+":8787",q=a(L,{reconnectIfNotNormalClose:!0}),o=[],this.usuarios_all=[],r={},this.mensajes=[],q.onOpen(function(a){return e.User().id?A(e.User()):p()}),q.onClose(function(a){return j.clientes=[]}),q.onError(function(a){return console.log("Error de Socket",a)}),q.onMessage(function(a){var b;switch(a=JSON.parse(a.data),a.comando){case"conectado":return j.conectado(a.cliente);case"validado":return e.setResourceId(a.yo.resourceId),b=j.cliente(a.yo.resourceId),b?j.actualizar_clt(a.yo):j.clientes.push(a.yo);case"desconectado":return j.desconectar(a.clt);case"registrado":return b=j.cliente(a.clt.resourceId),b?j.actualizar_clt(a.clt):(j.clientes.push(a.clt),d.$emit("clt_registrado",{clientes:j.clientes}));case"unregistered":return j.actualizar_clt(a.client);case"take_clts":return j.clientes=a.clts;case"got_your_qr":if(a.seleccionar)return j.usuarios_all=a.usuarios,j.token_auth=a.token;if(a.token)return g.put("xtoken",a.token),h.defaults.headers.common.Authorization="Bearer "+g.get("xtoken"),i.go("panel");break;case"correspondencia":return this.mensajes=void 0===this.mensajes?[]:this.mensajes,a.mensaje.from=JSON.parse(a.mensaje.from),this.mensajes.push(a.mensaje),d.$emit("llegaCorrespondencia",{mensajes:this.mensajes});case"sesion_closed":if(a.clt.resourceId===e.getResourceId())return K(),d.lastState=null,d.lastStateParam=null,e.deleteUser(),i.transitionTo("login"),g.remove("xtoken"),delete h.defaults.headers.common.Authorization;break;case"nombre_punto_cambiado":return b=j.cliente(a.resourceId),b.nombre_punto=k("clearhtml")(a.nombre),d.$emit("nombre_punto_cambiado",{nombre:b.nombre_punto});case"take_usuarios":return j.usuarios_all=a.usuarios;case"enter":if(a.token)return g.put("xtoken",a.token),h.defaults.headers.common.Authorization="Bearer "+g.get("xtoken"),i.go("panel");break;case"change_the_categ_selected":return b=j.cliente(e.getResourceId()),b.categsel=a.categsel,j.actualizar_clt(b,a.categsel);case"change_a_categ_selected":return b=j.cliente(a.resourceId),b.categsel=a.categsel,j.actualizar_clt(b,a.categsel);case"a_categ_selected_change":return b=j.cliente(a.resourceId),b.categsel=a.categsel,j.actualizar_clt(b);case"empezar_examen":return d.$emit("empezar_examen");case"sc_show_participantes":return u(),j.config.categorias_traduc=a.categorias_traduc,i.go("proyectando.participantes");case"sc_show_question":return j.config.pregunta=a.pregunta,j.config.reveal_answer=!1,i.go("proyectando.question");case"sc_show_logo_entidad_partici":return j.config.show_logo_entidad_partici=a.valor;case"sc_show_puntaje_particip":return j.config.cliente_to_show=a.cliente,i.go("proyectando.puntaje_particip");case"sc_answered":return b=j.cliente(a.resourceId),b.answered=a.valor,j.actualizar_clt(b);case"next_question":return i.is("panel.examen_respuesta")&&(b=j.cliente(a.resourceId),b.answered="waiting",j.actualizar_clt(b)),d.$emit("next_question");case"prev_question":return i.is("panel.examen_respuesta")&&(b=j.cliente(a.resourceId),b.answered="waiting",j.actualizar_clt(b)),d.$emit("prev_question")}}),A=function(a){var b;return b=null===localStorage.getItem("nombre_punto")?!1:localStorage.getItem("nombre_punto"),q.send({comando:"registrar",usuario:a,nombre_punto:b})},K=function(){return console.log("Entra para unregistrar"),q.send({comando:"unregister"})},p=function(a){var b;return b=null===localStorage.getItem("nombre_punto")?!1:localStorage.getItem("nombre_punto"),a?q.send({comando:"conectar",qr:a,nombre_punto:b}):q.send({comando:"conectar",nombre_punto:b})},w=function(a,b){return b?(r={comando:"got_qr",qr:a,usuario_id:b,from_token:g.get("xtoken")},q.send(r)):q.send({comando:"got_qr",qr:a,from_token:g.get("xtoken")})},y=function(a,b){return a?(r={comando:"let_him_enter",usuario_id:a,from_token:g.get("xtoken"),resourceId:b},q.send(r)):void 0},u=function(){return r={comando:"get_clts"},q.send(r)},I=function(a){return q.send({comando:"correspondencia",mensaje:a})},J=function(a,b){return q.send({comando:"correspondencia",mensaje:a,to:b.resourceId})},l=function(a){return q.send({comando:"cerrar_sesion",resourceId:a})},x=function(a,b){return b=k("clearhtml")(b),q.send({comando:"guardar_nombre_punto",resourceId:a,nombre:b})},v=function(){var a;return console.log(j.usuarios_all.length),0===j.usuarios_all.length?(a=g.get("xtoken"),q.send({comando:"get_usuarios",from_token:a})):void 0},m=function(a,b){var c;return c=j.cliente(a),c.categsel=b,j.actualizar_clt(c,b),q.send({comando:"change_a_categ_selected",resourceId:a,categsel:b})},n=function(a){var b;return b=j.cliente(e.getResourceId()),b.categsel=a,j.actualizar_clt(b,a),q.send({comando:"warn_my_categ_selected",categsel:a})},s=function(){return q.send({comando:"empezar_examen"})},t=function(a){return q.send({comando:"empezar_examen_cliente",resourceId:a})},F=function(a){return q.send({comando:"sc_show_participantes",categorias_traduc:a})},H=function(a,b){return q.send({comando:"sc_show_question",no_question:a,pregunta:b})},D=function(){return q.send({comando:"sc_reveal_answer"})},E=function(a){return q.send({comando:"sc_show_logo_entidad_partici",valor:a})},G=function(a){return q.send({comando:"sc_show_puntaje_particip",cliente:a})},B=function(a,b){return q.send({comando:"sc_answered",resourceId:a,valor:b})},C=function(){return q.send({comando:"next_question"})},z={clientes:o,usuarios_all:this.usuarios_all,mensajes:function(){return this.mensajes},conectar:p,readyState:function(){return q.readyState},getClts:function(){return q.send({comando:"get_clts"})},registrar:A,unregister:K,got_qr:w,send_email:I,send_email_to:J,get_clts:u,cerrar_sesion:l,guardar_nombre_punto:x,get_usuarios:v,let_him_enter:y,change_a_categ_selected:m,change_my_categ_selected:n,empezar_examen:s,empezar_examen_cliente:t,sc_show_participantes:F,sc_show_question:H,sc_reveal_answer:D,sc_show_logo_entidad_partici:E,sc_show_puntaje_particip:G,sc_answered:B,sc_next_question:C}}]).factory("SocketData",["$websocket","App","$rootScope","$filter",function(a,b,c,d){var e,f,g,h,i,j,k,l,m;return this.clientes=[],m=[],j=[],l="",h={pregunta:{},reveal_answer:!1,show_logo_entidad_partici:!1},i=function(a){return this.clientes=d("filter")(this.clientes,{resourceId:"!"+a.resourceId})},f=function(a){var b,c,d,e;for(e=this.clientes,c=0,d=e.length;d>c;c++)if(b=e[c],b.resourceId===a)return b;return!1},e=function(a,b){var c,d,e,f,g;for(g=this.clientes,d=e=0,f=g.length;f>e;d=++e)c=g[d],c.resourceId===a.resourceId&&this.clientes.splice(d,1,a);return!1},g=function(a){var b,c,d,e,f;for(b=!1,f=this.clientes,d=0,e=f.length;e>d;d++)c=f[d],c.resourceId===a.resourceId&&(b=!0);return b||this.clientes.push(a),!0},k={clientes:this.clientes,usuarios_all:m,mensajes:j,desconectar:i,token_auth:l,cliente:f,conectado:g,actualizar_clt:e,config:h}}])}.call(this),function(){angular.module("WissenSystem").filter("porIdioma",[function(){return function(a,b){var c,d,e,f,g;if(a){for(e=[],b=parseFloat(b),f=0,g=a.length;g>f;f++)c=a[f],d=parseFloat(c.idioma_id),b===d&&e.push(c);return e}return!1}}]).filter("idiomas_del_sistema",[function(){return function(a,b){var c,d,e,f;if(a){for(d=[],e=0,f=a.length;f>e;e++)c=a[e],b?c.used_by_system||d.push(c):c.used_by_system&&d.push(c);return d}return!1}}]).filter("porIdiomasEdit",[function(){return function(a,b){var c,d,e,f,g,h,i,j;if(a&&a.length>0&&a[0].uncodigo_id&&console.log(a,b),f=[],b&&a)for(g=0,i=b.length;i>g;g++)for(d=b[g],d=parseFloat(d),h=0,j=a.length;j>h;h++)c=a[h],e=parseFloat(c.idioma_id),d===e&&f.push(c);return f}}]).filter("catsByIdioma",[function(){return function(a,b){var c,d,e,f;for(d=[],e=0,f=a.length;f>e;e++)c=a[e],c.idioma_id===parseFloat(b)&&d.push(c);return d}}])}.call(this),function(){angular.module("WissenSystem").filter("clearhtml",function(){return function(a){return a?String(a).replace(/<[^>]+>/gm,""):""}})}.call(this),function(){angular.module("WissenSystem").filter("categsInscritas",["$filter",function(a){return function(b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p;if(d=parseInt(d),b&&c){if(i=[],void 0===b[0]||0===b.length||void 0===b.length)return[];if(1===b.length)for(j=b[0],k=0,n=c.length;n>k;k++)g=c[k],f=a("porIdioma")(g.categorias_traducidas,d),f.length>0&&(f=f[0]),f.algunos=!1,f.nivel_id=g.nivel_id,h=a("filter")(j.inscripciones,{categoria_id:g.id}),h.length>0?(f.incripcion_id=h.id,f.selected=!0):(f.incripcion_id=void 0,f.selected=!1),i.push(f);else if(b.length>1)for(l=0,o=c.length;o>l;l++){for(g=c[l],f=a("porIdioma")(g.categorias_traducidas,d),f.length>0&&(f=f[0]),f.nivel_id=g.nivel_id,f.incripcion_id=void 0,e=0,m=0,p=b.length;p>m;m++)j=b[m],h=a("filter")(j.inscripciones,{categoria_id:g.id}),h.length>0&&e++;0===e?(f.selected=!1,f.algunos=!1):e===b.length?(f.selected=!0,f.algunos=!1):(f.selected=!1,f.algunos=!0),i.push(f)}return i}return[]}}]).filter("categsInscritasDeUsuario",["$filter",function(a){return function(b,c,d){var e,f,g,h,i,j;if(b&&c){for(h=[],i=0,j=c.length;j>i;i++)f=c[i],e=a("porIdioma")(f.categorias_traducidas,parseFloat(d)),e.length>0&&(e=e[0],g=a("filter")(b.inscripciones,{categoria_id:f.id}),g&&g.length>0&&(g=g[0],e.allowed_to_answer=g.allowed_to_answer,e.examenes=g.examenes,e.inscripcion_id=g.id,h.push(e)));return h}return[]}}]).filter("categSelectedDeUsuario",["$filter",function(a){return function(b,c,d,e){var f,g,h,i,j,k;if(b&&c){for(i=[],j=0,k=c.length;k>j;j++)g=c[j],g.id===parseInt(e)&&(f=a("porIdioma")(g.categorias_traducidas,parseFloat(d)),f.length>0&&(f=f[0],h=a("filter")(b.inscripciones,{categoria_id:g.id}),h&&h.length>0&&(h=h[0],f.allowed_to_answer=h.allowed_to_answer,f.examenes=h.examenes,f.inscripcion_id=h.id,i.push(f))));return i}return[]}}])}.call(this),function(){angular.module("WissenSystem").filter("nombreEntidad",["$filter",function(a){return function(b,c,d){var e;return b&&c?(b=parseFloat(b),e=a("filter")(c,{id:b}),e.length>0?d?e[0].alias:e[0].nombre:b):b}}]).filter("nivelesTraducidos",["$filter",function(a){return function(b,c){var d,e,f,g,h;if(b&&c){for(c=parseFloat(c),f=[],g=0,h=b.length;h>g;g++)e=b[g],d=a("porIdioma")(e.niveles_traducidos,c),d.length>0&&(d[0].nivel_king_id=e.id,f.push(d[0]));return f}return b}}]).filter("categoriasTraducidas",["$filter",function(a){return function(b,c,d){var e,f,g,h,i;if(b&&c){for(c=parseFloat(c),g=[],h=0,i=b.length;i>h;h++)e=b[h],d?(d=parseFloat(d),e.nivel_id===d&&(f=a("porIdioma")(e.categorias_traducidas,c),f.length>0&&(f[0].categoria_king_id=e.id,g.push(f[0])))):(f=a("porIdioma")(e.categorias_traducidas,c),f.length>0&&g.push(f[0]));return g}return b}}]).filter("nombreCategoria",["$filter",function(a){return function(b,c,d,e){var f,g;return b=parseFloat(b),d=parseFloat(d),f=a("filter")(c,{id:b}),f.length>0?(f=f[0],g=a("porIdioma")(f.categorias_traducidas,d),g.length>0?(g=g[0],e?g.abrev:g.nombre):""):""}}])}.call(this),function(){angular.module("WissenSystem").filter("cantPregsEvaluacion",["$filter","Perfil",function(a,b){return function(c){var d,e,f,g,h;if(c){for(d=0,g=0,h=c.length;h>g;g++)f=c[g],f.tipo_pregunta?d++:(e=a("porIdioma")(f.contenidos_traducidos,b.idioma()),e.length>0&&(d+=e[0].preguntas_agrupadas.length));return d}return!1}}]).filter("noPregActual",["$filter","Perfil",function(a,b){return function(c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;if(c){for(d=0,l=0,p=c.length;p>l;l++)if(j=c[l],d++,j.tipo_pregunta){for(i=a("porIdioma")(j.preguntas_traducidas,b.idioma()),k=!1,m=0,q=i.length;q>m;m++)for(g=i[m],x=g.opciones,n=0,r=x.length;r>n;n++)e=x[n],e.respondida&&(k=!0);if(!k)return d}else for(h=a("porIdioma")(j.contenidos_traducidos,b.idioma()),o=0,s=h.length;s>o;o++)for(f=h[o],d++,y=f.preguntas_agrupadas,v=0,t=y.length;t>v;v++){for(g=y[v],k=!1,z=g.opciones,w=0,u=z.length;u>w;w++)e=z[w],e.respondida&&(k=!0);if(!k)return d}return d}return!1}}]).filter("preguntaActual",["$filter","Perfil",function(a,b){return function(c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;if(c){for(m=0,q=c.length;q>m;m++)if(j=c[m],j.tipo_pregunta){for(i=a("porIdioma")(j.preguntas_traducidas,b.idioma()),l=!1,n=0,r=i.length;r>n;n++)for(g=i[n],y=g.opciones,o=0,s=y.length;s>o;o++)e=y[o],e.respondida&&(l=!0);if(!l)return[j]}else for(h=a("porIdioma")(j.contenidos_traducidos,b.idioma()),p=0,t=h.length;t>p;p++)for(f=h[p],z=f.preguntas_agrupadas,w=0,u=z.length;u>w;w++){for(g=z[w],l=!1,A=g.opciones,x=0,v=A.length;v>x;x++)e=A[x],e.respondida&&(l=!0);if(!l)return[j]}return k=c[0],k.terminado=!0,k=[k]}return!1}}])}.call(this),function(){angular.module("WissenSystem").directive("updateTitle",["$rootScope","$timeout",function(a,b){return{link:function(c,d){var e;return e=function(a,c,e){var f;return f="MyVc",c.data&&c.data.pageTitle&&(f=c.data.pageTitle),e&&e.username&&(f=e.username+" - MyVc"),b(function(){return d.text(f)},0,!1)},a.$on("$stateChangeSuccess",e)}}}])}.call(this),function(){angular.module("WissenSystem").directive("contenteditable",["$timeout","$window",function(a,b){return{require:"ngModel",scope:{guardarNombrePunto:"="},link:function(c,d,e,f){return d.bind("blur keyup change",function(e){return a(function(){var a;return 13===e.keyCode?(e.cancelBubble=!0,e.returnValue=!1,a=b.document.getElementById("msg-especifico"),a&&a.focus(),c.guardarNombrePunto(c.$parent.cliente),e.preventDefault()):c.$apply(function(){return f.$setViewValue(d.html())})},0)}),f.$render=function(){return d.html(f.$viewValue)}}}}])}.call(this);